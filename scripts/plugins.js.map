{"version":3,"sources":["plugins.js"],"names":["factory","define","amd","exports","module","jQuery","$","undefined","defaultOpts","beforeShow","noop","move","change","show","hide","color","flat","showInput","allowEmpty","showButtons","clickoutFiresChange","showInitial","showPalette","showPaletteOnly","hideAfterPaletteSelect","togglePaletteOnly","showSelectionPalette","localStorageKey","appendTo","maxSelectionSize","cancelText","chooseText","togglePaletteMoreText","togglePaletteLessText","clearText","noColorSelectedText","preferredFormat","className","containerClassName","replacerClassName","showAlpha","theme","palette","selectionPalette","disabled","offset","spectrums","IE","exec","window","navigator","userAgent","rgbaSupport","contains","str","substr","indexOf","elem","document","createElement","style","cssText","backgroundColor","replaceInput","join","markup","gradientFix","i","paletteTemplate","p","opts","html","length","current","tiny","tinycolor","c","toHsl","l","equals","formattedString","toString","swatchStyle","toRgbString","toFilter","push","cls","append","attr","hideAll","instanceOptions","o","callbackContext","extend","callbacks","bind","spectrum","element","resize","throttle","reflow","visible","isDragging","dragWidth","dragHeight","dragHelperHeight","slideHeight","slideWidth","alphaWidth","alphaSlideHelperWidth","slideHelperHeight","currentHue","currentSaturation","currentValue","currentAlpha","paletteArray","paletteLookup","slice","draggingClass","shiftMovementDirection","doc","ownerDocument","body","boundElement","container","addClass","pickerContainer","find","dragger","dragHelper","slider","slideHelper","alphaSliderInner","alphaSlider","alphaSlideHelper","textInput","paletteContainer","initialColorContainer","cancelButton","clearButton","chooseButton","toggleButton","isInput","is","isInputTypeColor","inputTypeColorSupport","shouldReplace","replacer","offsetElement","previewElement","initialColor","val","colorOnShow","currentPreferredFormat","isEmpty","applyOptions","text","isArray","j","rgb","toggleClass","initialize","after","parent","updateSelectionPaletteFromStorage","e","toggle","stopPropagation","target","preventDefault","disable","click","setFromTextInput","setTimeout","keydown","keyCode","revert","updateOriginalInput","trigger","isValid","css","outerWidth","draggable","dragX","dragY","shiftKey","Math","round","dragStart","dragStop","parseFloat","oldDragX","oldDragY","furtherFromX","abs","setSaturation","setValue","set","updateUI","format","addColorToSelectionPalette","paletteElementClick","data","ignore","closest","paletteEvent","delegate","localStorage","oldPalette","split","each","inArray","shift","getUniqueSelectionPalette","unique","reverse","drawPalette","currentColor","get","map","drawInitial","initial","removeClass","value","event","Event","isDefaultPrevented","onkeydown","clickout","button","unbind","ignoreFormatChange","newColor","newHsv","toHsv","h","s","v","a","getFormat","fromRatio","hasClass","updateHelperLocations","flatColor","toHexString","realColor","displayColor","realHex","realRgb","alpha","toRgb","realAlpha","gradient","gradientType","max","min","alphaX","slideY","fireCallback","hasChanged","width","height","getOffset","destroy","remove","spect","id","option","optionName","optionValue","enable","setOffset","coord","picker","input","extraY","dpWidth","dpHeight","outerHeight","inputHeight","docElem","documentElement","viewWidth","clientWidth","scrollLeft","viewHeight","clientHeight","scrollTop","top","left","func","obj","Array","prototype","args","call","arguments","apply","concat","onmove","onstart","onstop","dragging","maxHeight","maxWidth","hasTouch","duringDragEvents","prevent","stop","returnValue","documentMode","t0","originalEvent","touches","pageX","pageY","start","rightclick","which","wait","debounce","timeout","context","throttler","clearTimeout","fn","dataID","extra","method","Error","removeData","options","load","loadOpts","defaults","_cachedResult","colorInput","type","localization","palettes","processNativeColorInputs","colorInputs","trimLeft","trimRight","tinyCounter","math","mathRound","mathMin","mathMax","mathRandom","random","inputToRGB","_originalInput","_r","r","_g","g","_b","b","_a","_roundA","_format","_gradientType","_ok","ok","_tc_id","isDark","getBrightness","isLight","getOriginalInput","getAlpha","setAlpha","boundAlpha","hsv","rgbToHsv","toHsvString","hsl","rgbToHsl","toHslString","toHex","allow3Char","rgbToHex","toHex8","rgbaToHex","toHex8String","toPercentageRgb","bound01","toPercentageRgbString","toName","hexNames","secondColor","hex8String","secondHex8String","formatSet","hasAlpha","needsAlphaFormat","_applyModification","lighten","brighten","darken","desaturate","saturate","greyscale","spin","_applyCombination","analogous","complement","monochromatic","splitcomplement","triad","tetrad","hasOwnProperty","convertToPercentage","stringInputToObject","rgbToRgb","String","hsvToRgb","hslToRgb","d","hue2rgb","q","t","floor","f","mod","hex","pad2","charAt","convertDecimalToHex","color1","color2","amount","clamp01","hue","results","slices","part","ret","modification","mix","rgb1","rgb2","w","w1","w2","rgba","readability","c1","c2","brightnessA","brightnessB","colorDiff","brightness","isReadable","mostReadable","baseColor","colorList","bestColor","bestScore","bestIsReadable","readable","score","names","aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","burntsienna","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkgrey","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","green","greenyellow","grey","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightgrey","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen","flip","flipped","isNaN","n","isOnePointZero","processPercent","isPercentage","parseInt","parseIntFromHex","convertHexToDecimal","matchers","CSS_INTEGER","CSS_NUMBER","CSS_UNIT","PERMISSIVE_MATCH3","PERMISSIVE_MATCH4","RegExp","hsla","hsva","hex3","hex6","hex8","replace","toLowerCase","named","match","EasyEditor","defaultButtons","buttons","buttonsHtml","overwriteButtonSettings","onLoaded","randomString","substring","dropdown","attachEvents","bootstrap","addToolbar","handleKeypress","handleResizeImage","utils","_this","tag","prop","placeholderText","marginTop","marginBottom","getElementById","wrap","$wrapperElem","containerClass","isSelectionInsideElement","execCommand","addEventListener","clipboardData","getData","tagName","sel","containerNode","toUpperCase","getSelection","rangeCount","getRangeAt","commonAncestorContainer","selection","createRange","parentElement","nodeType","parentNode","before","$toolbarContainer","populateButtons","injectButton","settings","buttonIdentifier","newSettings","buttonHtml","buttonTitle","childOf","$parentContainer","children","clickHandler","hasChild","openDropdownOf","identifier","index","removeFormatting","arg","inFullArea","isSelectionOutsideOfEditor","selectedText","range","$parent","node","deleteContents","insertNode","contents","unwrap","topMostParent","hasParentNode","parentsUntil","el","removeEmptyTags","removeBlockElementFromSelection","removeBr","result","removeBrNode","selectedHtml","cloneContents","temp","replaceWith","childNodes","wrapSelectionWithNodeName","name","blockElement","class","attribute","keepHtml","nodeName","isWrapped","isAlreadyWrapped","cloneRange","addAttribute","selectionContainsHtml","clonedSelection","div","appendChild","innerHTML","textContent","localName","surroundContents","removeAllRanges","addRange","removeWrappedDuplicateTag","wrapSelectionWithList","tagname","listArray","filter","wrappedListHtml","item","trim","startContainer","insertAtCaret","elementContainsSelection","isOrContains","insertHtml","closeModal","bindData","getYoutubeVideoIdFromUrl","url","videoId","openModal","selector","$temp","focus","bold","italic","h2","h3","h4","x","alignleft","aligncenter","alignright","quote","code","link","prompt","list","source","thisButton","$elemContainer","$elem","$tempTextarea","on","easyEditor","limiter","limit","setCount","src","chars"],"mappings":"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","file":"plugins.js","sourcesContent":["/*global jQuery:false, define:false, noop:true */\n// Spectrum Colorpicker v1.7.1\n// https://github.com/bgrins/spectrum\n// Author: Brian Grinstead\n// License: MIT\n\n(function (factory) {\n    'use strict';\n\n    if (typeof define === 'function' && define.amd) { // AMD\n        define(['jquery'], factory);\n    }\n    else if (typeof exports === 'object' && typeof module === 'object') { // CommonJS\n        module.exports = factory;\n    }\n    else { // Browser\n        factory(jQuery);\n    }\n})(function($, undefined) {\n    'use strict';\n\n    var defaultOpts = {\n\n        // Callbacks\n        beforeShow: noop,\n        move: noop,\n        change: noop,\n        show: noop,\n        hide: noop,\n\n        // Options\n        color: false,\n        flat: false,\n        showInput: true,\n        allowEmpty: true,\n        showButtons: true,\n        clickoutFiresChange: true,\n        showInitial: true,\n        showPalette: false,\n        showPaletteOnly: false,\n        hideAfterPaletteSelect: false,\n        togglePaletteOnly: false,\n        showSelectionPalette: true,\n        localStorageKey: false,\n        appendTo: 'body',\n        maxSelectionSize: 7,\n        cancelText: 'cancel',\n        chooseText: 'choose',\n        togglePaletteMoreText: 'more',\n        togglePaletteLessText: 'less',\n        clearText: 'Clear Color Selection',\n        noColorSelectedText: 'No Color Selected',\n        preferredFormat: false,\n        className: '', // Deprecated - use containerClassName and replacerClassName instead.\n        containerClassName: '',\n        replacerClassName: '',\n        showAlpha: false,\n        theme: 'sp-light',\n        palette: [['#ffffff', '#000000', '#ff0000', '#ff8000', '#ffff00', '#008000', '#0000ff', '#4b0082', '#9400d3', '#fff']],\n        selectionPalette: [],\n        disabled: false,\n        offset: null\n    },\n    spectrums = [],\n    IE = !!/msie/i.exec( window.navigator.userAgent ),\n    rgbaSupport = (function() {\n        function contains( str, substr ) {\n            return !!~('' + str).indexOf(substr);\n        }\n\n        var elem = document.createElement('div');\n        var style = elem.style;\n        style.cssText = 'background-color:rgba(0,0,0,.5)';\n        return contains(style.backgroundColor, 'rgba') || contains(style.backgroundColor, 'hsla');\n    })(),\n    replaceInput = [\n        '<div class=\"sp-replacer\">',\n            '<div class=\"sp-preview\"><div class=\"sp-preview-inner\"></div></div>',\n            '<div class=\"sp-dd\">&#9660;</div>',\n        '</div>'\n    ].join(''),\n    markup = (function () {\n\n        // IE does not support gradients with multiple stops, so we need to simulate\n        //  that for the rainbow slider with 8 divs that each have a single gradient\n        var gradientFix = '';\n        if (IE) {\n            for (var i = 1; i <= 6; i++) {\n                gradientFix += '<div class=\"sp-' + i + '\"\"></div>';\n            }\n        }\n\n        return [\n            '<div class=\"sp-container sp-hidden\">',\n                '<div class=\"sp-palette-container\">',\n                    '<div class=\"sp-palette sp-thumb sp-cf\"></div>',\n                    '<div class=\"sp-palette-button-container sp-cf\">',\n                        '<button type=\"button\" class=\"sp-palette-toggle\"></button>',\n                    '</div>',\n                '</div>',\n                '<div class=\"sp-picker-container\">',\n                    '<div class=\"sp-top sp-cf\">',\n                        '<div class=\"sp-fill\"></div>',\n                        '<div class=\"sp-top-inner\">',\n                            '<div class=\"sp-color\">',\n                                '<div class=\"sp-sat\">',\n                                    '<div class=\"sp-val\">',\n                                        '<div class=\"sp-dragger\"></div>',\n                                    '</div>',\n                                '</div>',\n                            '</div>',\n                            '<div class=\"sp-clear sp-clear-display\">',\n                            '</div>',\n                            '<div class=\"sp-hue\">',\n                                '<div class=\"sp-slider\"></div>',\n                                gradientFix,\n                            '</div>',\n                        '</div>',\n                        '<div class=\"sp-alpha\"><div class=\"sp-alpha-inner\"><div class=\"sp-alpha-handle\"></div></div></div>',\n                    '</div>',\n                    '<div class=\"sp-input-container sp-cf\">',\n                        '<input class=\"sp-input\" type=\"text\" spellcheck=\"false\"  />',\n                    '</div>',\n                    '<div class=\"sp-initial sp-thumb sp-cf\"></div>',\n                    '<div class=\"sp-button-container sp-cf\">',\n                        '<a class=\"sp-cancel\" href=\"#\"></a>',\n                        '<button type=\"button\" class=\"sp-choose\"></button>',\n                    '</div>',\n                '</div>',\n            '</div>'\n        ].join('');\n    })();\n\n    function paletteTemplate (p, color, className, opts) {\n        var html = [];\n        for (var i = 0; i < p.length; i++) {\n            var current = p[i];\n            if(current) {\n                var tiny = tinycolor(current);\n                var c = tiny.toHsl().l < 0.5 ? 'sp-thumb-el sp-thumb-dark' : 'sp-thumb-el sp-thumb-light';\n                c += (tinycolor.equals(color, current)) ? ' sp-thumb-active' : '';\n                var formattedString = tiny.toString(opts.preferredFormat || 'rgb');\n                var swatchStyle = rgbaSupport ? ('background-color:' + tiny.toRgbString()) : 'filter:' + tiny.toFilter();\n                html.push('<span title=\"' + formattedString + '\" data-color=\"' + tiny.toRgbString() + '\" class=\"' + c + '\"><span class=\"sp-thumb-inner\" style=\"' + swatchStyle + ';\" /></span>');\n            } else {\n                var cls = 'sp-clear-display';\n                html.push($('<div />')\n                    .append($('<span data-color=\"\" style=\"background-color:transparent;\" class=\"' + cls + '\"></span>')\n                        .attr('title', opts.noColorSelectedText)\n                    )\n                    .html()\n                );\n            }\n        }\n        return '<div class=\"sp-cf ' + className + '\">' + html.join('') + '</div>';\n    }\n\n    function hideAll() {\n        for (var i = 0; i < spectrums.length; i++) {\n            if (spectrums[i]) {\n                spectrums[i].hide();\n            }\n        }\n    }\n\n    function instanceOptions(o, callbackContext) {\n        var opts = $.extend({}, defaultOpts, o);\n        opts.callbacks = {\n            'move': bind(opts.move, callbackContext),\n            'change': bind(opts.change, callbackContext),\n            'show': bind(opts.show, callbackContext),\n            'hide': bind(opts.hide, callbackContext),\n            'beforeShow': bind(opts.beforeShow, callbackContext)\n        };\n\n        return opts;\n    }\n\n    function spectrum(element, o) {\n\n        var opts = instanceOptions(o, element),\n            flat = opts.flat,\n            showSelectionPalette = opts.showSelectionPalette,\n            localStorageKey = opts.localStorageKey,\n            theme = opts.theme,\n            callbacks = opts.callbacks,\n            resize = throttle(reflow, 10),\n            visible = false,\n            isDragging = false,\n            dragWidth = 0,\n            dragHeight = 0,\n            dragHelperHeight = 0,\n            slideHeight = 0,\n            slideWidth = 0,\n            alphaWidth = 0,\n            alphaSlideHelperWidth = 0,\n            slideHelperHeight = 0,\n            currentHue = 0,\n            currentSaturation = 0,\n            currentValue = 0,\n            currentAlpha = 1,\n            palette = [],\n            paletteArray = [],\n            paletteLookup = {},\n            selectionPalette = opts.selectionPalette.slice(0),\n            maxSelectionSize = opts.maxSelectionSize,\n            draggingClass = 'sp-dragging',\n            shiftMovementDirection = null;\n\n        var doc = element.ownerDocument,\n            body = doc.body,\n            boundElement = $(element),\n            disabled = false,\n            container = $(markup, doc).addClass(theme),\n            pickerContainer = container.find('.sp-picker-container'),\n            dragger = container.find('.sp-color'),\n            dragHelper = container.find('.sp-dragger'),\n            slider = container.find('.sp-hue'),\n            slideHelper = container.find('.sp-slider'),\n            alphaSliderInner = container.find('.sp-alpha-inner'),\n            alphaSlider = container.find('.sp-alpha'),\n            alphaSlideHelper = container.find('.sp-alpha-handle'),\n            textInput = container.find('.sp-input'),\n            paletteContainer = container.find('.sp-palette'),\n            initialColorContainer = container.find('.sp-initial'),\n            cancelButton = container.find('.sp-cancel'),\n            clearButton = container.find('.sp-clear'),\n            chooseButton = container.find('.sp-choose'),\n            toggleButton = container.find('.sp-palette-toggle'),\n            isInput = boundElement.is('input'),\n            isInputTypeColor = isInput && boundElement.attr('type') === 'color' && inputTypeColorSupport(),\n            shouldReplace = isInput && !flat,\n            replacer = (shouldReplace) ? $(replaceInput).addClass(theme).addClass(opts.className).addClass(opts.replacerClassName) : $([]),\n            offsetElement = (shouldReplace) ? replacer : boundElement,\n            previewElement = replacer.find('.sp-preview-inner'),\n            initialColor = opts.color || (isInput && boundElement.val()),\n            colorOnShow = false,\n            preferredFormat = opts.preferredFormat,\n            currentPreferredFormat = preferredFormat,\n            clickoutFiresChange = !opts.showButtons || opts.clickoutFiresChange,\n            isEmpty = !initialColor,\n            allowEmpty = opts.allowEmpty && !isInputTypeColor;\n\n        function applyOptions() {\n\n            if (opts.showPaletteOnly) {\n                opts.showPalette = true;\n            }\n\n            toggleButton.text(opts.showPaletteOnly ? opts.togglePaletteMoreText : opts.togglePaletteLessText);\n\n            if (opts.palette) {\n                palette = opts.palette.slice(0);\n                paletteArray = $.isArray(palette[0]) ? palette : [palette];\n                paletteLookup = {};\n                for (var i = 0; i < paletteArray.length; i++) {\n                    for (var j = 0; j < paletteArray[i].length; j++) {\n                        var rgb = tinycolor(paletteArray[i][j]).toRgbString();\n                        paletteLookup[rgb] = true;\n                    }\n                }\n            }\n\n            container.toggleClass('sp-flat', flat);\n            container.toggleClass('sp-input-disabled', !opts.showInput);\n            container.toggleClass('sp-alpha-enabled', opts.showAlpha);\n            container.toggleClass('sp-clear-enabled', allowEmpty);\n            container.toggleClass('sp-buttons-disabled', !opts.showButtons);\n            container.toggleClass('sp-palette-buttons-disabled', !opts.togglePaletteOnly);\n            container.toggleClass('sp-palette-disabled', !opts.showPalette);\n            container.toggleClass('sp-palette-only', opts.showPaletteOnly);\n            container.toggleClass('sp-initial-disabled', !opts.showInitial);\n            container.addClass(opts.className).addClass(opts.containerClassName);\n\n            reflow();\n        }\n\n        function initialize() {\n\n            if (IE) {\n                container.find('*:not(input)').attr('unselectable', 'on');\n            }\n\n            applyOptions();\n\n            if (shouldReplace) {\n                boundElement.after(replacer).hide();\n            }\n\n            if (!allowEmpty) {\n                clearButton.hide();\n            }\n\n            if (flat) {\n                boundElement.after(container).hide();\n            }\n            else {\n\n                var appendTo = opts.appendTo === 'parent' ? boundElement.parent() : $(opts.appendTo);\n                if (appendTo.length !== 1) {\n                    appendTo = $('body');\n                }\n\n                appendTo.append(container);\n            }\n\n            updateSelectionPaletteFromStorage();\n\n            offsetElement.bind('click.spectrum touchstart.spectrum', function (e) {\n                if (!disabled) {\n                    toggle();\n                }\n\n                e.stopPropagation();\n\n                if (!$(e.target).is('input')) {\n                    e.preventDefault();\n                }\n            });\n\n            if(boundElement.is(':disabled') || (opts.disabled === true)) {\n                disable();\n            }\n\n            // Prevent clicks from bubbling up to document.  This would cause it to be hidden.\n            container.click(stopPropagation);\n\n            // Handle user typed input\n            textInput.change(setFromTextInput);\n            textInput.bind('paste', function () {\n                setTimeout(setFromTextInput, 1);\n            });\n            textInput.keydown(function (e) { if (e.keyCode ===13) { setFromTextInput(); } });\n\n            cancelButton.text(opts.cancelText);\n            cancelButton.bind('click.spectrum', function (e) {\n                e.stopPropagation();\n                e.preventDefault();\n                revert();\n                hide();\n            });\n\n            clearButton.attr('title', opts.clearText);\n            clearButton.bind('click.spectrum', function (e) {\n                e.stopPropagation();\n                e.preventDefault();\n                isEmpty = true;\n                move();\n\n                if(flat) {\n                    //for the flat style, this is a change event\n                    updateOriginalInput(true);\n                }\n            });\n\n            chooseButton.text(opts.chooseText);\n            chooseButton.bind('click.spectrum', function (e) {\n                e.stopPropagation();\n                e.preventDefault();\n\n                if (IE && textInput.is(':focus')) {\n                    textInput.trigger('change');\n                }\n\n                if (isValid()) {\n                    updateOriginalInput(true);\n                    hide();\n                }\n            });\n\n            toggleButton.text(opts.showPaletteOnly ? opts.togglePaletteMoreText : opts.togglePaletteLessText);\n            toggleButton.bind('click.spectrum', function (e) {\n                e.stopPropagation();\n                e.preventDefault();\n\n                opts.showPaletteOnly = !opts.showPaletteOnly;\n\n                // To make sure the Picker area is drawn on the right, next to the\n                // Palette area (and not below the palette), first move the Palette\n                // to the left to make space for the picker, plus 5px extra.\n                // The 'applyOptions' function puts the whole container back into place\n                // and takes care of the button-text and the sp-palette-only CSS class.\n                if (!opts.showPaletteOnly && !flat) {\n                    container.css('left', '-=' + (pickerContainer.outerWidth(true) + 5));\n                }\n                applyOptions();\n            });\n\n            draggable(alphaSlider, function (dragX, dragY, e) {\n                currentAlpha = (dragX / alphaWidth);\n                isEmpty = false;\n                if (e.shiftKey) {\n                    currentAlpha = Math.round(currentAlpha * 10) / 10;\n                }\n\n                move();\n            }, dragStart, dragStop);\n\n            draggable(slider, function (dragX, dragY) {\n                currentHue = parseFloat(dragY / slideHeight);\n                isEmpty = false;\n                if (!opts.showAlpha) {\n                    currentAlpha = 1;\n                }\n                move();\n            }, dragStart, dragStop);\n\n            draggable(dragger, function (dragX, dragY, e) {\n\n                // shift+drag should snap the movement to either the x or y axis.\n                if (!e.shiftKey) {\n                    shiftMovementDirection = null;\n                }\n                else if (!shiftMovementDirection) {\n                    var oldDragX = currentSaturation * dragWidth;\n                    var oldDragY = dragHeight - (currentValue * dragHeight);\n                    var furtherFromX = Math.abs(dragX - oldDragX) > Math.abs(dragY - oldDragY);\n\n                    shiftMovementDirection = furtherFromX ? 'x' : 'y';\n                }\n\n                var setSaturation = !shiftMovementDirection || shiftMovementDirection === 'x';\n                var setValue = !shiftMovementDirection || shiftMovementDirection === 'y';\n\n                if (setSaturation) {\n                    currentSaturation = parseFloat(dragX / dragWidth);\n                }\n                if (setValue) {\n                    currentValue = parseFloat((dragHeight - dragY) / dragHeight);\n                }\n\n                isEmpty = false;\n                if (!opts.showAlpha) {\n                    currentAlpha = 1;\n                }\n\n                move();\n\n            }, dragStart, dragStop);\n\n            if (!!initialColor) {\n                set(initialColor);\n\n                // In case color was black - update the preview UI and set the format\n                // since the set function will not run (default color is black).\n                updateUI();\n                currentPreferredFormat = preferredFormat || tinycolor(initialColor).format;\n\n                addColorToSelectionPalette(initialColor);\n            }\n            else {\n                updateUI();\n            }\n\n            if (flat) {\n                show();\n            }\n\n            function paletteElementClick(e) {\n                if (e.data && e.data.ignore) {\n                    set($(e.target).closest('.sp-thumb-el').data('color'));\n                    move();\n                }\n                else {\n                    set($(e.target).closest('.sp-thumb-el').data('color'));\n                    move();\n                    updateOriginalInput(true);\n                    if (opts.hideAfterPaletteSelect) {\n                      hide();\n                    }\n                }\n\n                return false;\n            }\n\n            var paletteEvent = IE ? 'mousedown.spectrum' : 'click.spectrum touchstart.spectrum';\n            paletteContainer.delegate('.sp-thumb-el', paletteEvent, paletteElementClick);\n            initialColorContainer.delegate('.sp-thumb-el:nth-child(1)', paletteEvent, { ignore: true }, paletteElementClick);\n        }\n\n        function updateSelectionPaletteFromStorage() {\n\n            if (localStorageKey && window.localStorage) {\n\n                // Migrate old palettes over to new format.  May want to remove this eventually.\n                try {\n                    var oldPalette = window.localStorage[localStorageKey].split(',#');\n                    if (oldPalette.length > 1) {\n                        delete window.localStorage[localStorageKey];\n                        $.each(oldPalette, function(i, c) {\n                             addColorToSelectionPalette(c);\n                        });\n                    }\n                }\n                catch(e) { }\n\n                try {\n                    selectionPalette = window.localStorage[localStorageKey].split(';');\n                }\n                catch (e) { }\n            }\n        }\n\n        function addColorToSelectionPalette(color) {\n            if (showSelectionPalette) {\n                var rgb = tinycolor(color).toRgbString();\n                if (!paletteLookup[rgb] && $.inArray(rgb, selectionPalette) === -1) {\n                    selectionPalette.push(rgb);\n                    while(selectionPalette.length > maxSelectionSize) {\n                        selectionPalette.shift();\n                    }\n                }\n\n                if (localStorageKey && window.localStorage) {\n                    try {\n                        window.localStorage[localStorageKey] = selectionPalette.join(';');\n                    }\n                    catch(e) { }\n                }\n            }\n        }\n\n        function getUniqueSelectionPalette() {\n            var unique = [];\n            if (opts.showPalette) {\n                for (var i = 0; i < selectionPalette.length; i++) {\n                    var rgb = tinycolor(selectionPalette[i]).toRgbString();\n\n                    if (!paletteLookup[rgb]) {\n                        unique.push(selectionPalette[i]);\n                    }\n                }\n            }\n\n            return unique.reverse().slice(0, opts.maxSelectionSize);\n        }\n\n        function drawPalette() {\n\n            var currentColor = get();\n\n            var html = $.map(paletteArray, function (palette, i) {\n                return paletteTemplate(palette, currentColor, 'sp-palette-row sp-palette-row-' + i, opts);\n            });\n\n            updateSelectionPaletteFromStorage();\n\n            if (selectionPalette) {\n                html.push(paletteTemplate(getUniqueSelectionPalette(), currentColor, 'sp-palette-row sp-palette-row-selection', opts));\n            }\n\n            paletteContainer.html(html.join(''));\n        }\n\n        function drawInitial() {\n            if (opts.showInitial) {\n                var initial = colorOnShow;\n                var current = get();\n                initialColorContainer.html(paletteTemplate([initial, current], current, 'sp-palette-row-initial', opts));\n            }\n        }\n\n        function dragStart() {\n            if (dragHeight <= 0 || dragWidth <= 0 || slideHeight <= 0) {\n                reflow();\n            }\n            isDragging = true;\n            container.addClass(draggingClass);\n            shiftMovementDirection = null;\n            boundElement.trigger('dragstart.spectrum', [ get() ]);\n        }\n\n        function dragStop() {\n            isDragging = false;\n            container.removeClass(draggingClass);\n            boundElement.trigger('dragstop.spectrum', [ get() ]);\n        }\n\n        function setFromTextInput() {\n\n            var value = textInput.val();\n\n            if ((value === null || value === '') && allowEmpty) {\n                set(null);\n                updateOriginalInput(true);\n            }\n            else {\n                var tiny = tinycolor(value);\n                if (tiny.isValid()) {\n                    set(tiny);\n                    updateOriginalInput(true);\n                }\n                else {\n                    textInput.addClass('sp-validation-error');\n                }\n            }\n        }\n\n        function toggle() {\n            if (visible) {\n                hide();\n            }\n            else {\n                show();\n            }\n        }\n\n        function show() {\n            var event = $.Event('beforeShow.spectrum');\n\n            if (visible) {\n                reflow();\n                return;\n            }\n\n            boundElement.trigger(event, [ get() ]);\n\n            if (callbacks.beforeShow(get()) === false || event.isDefaultPrevented()) {\n                return;\n            }\n\n            hideAll();\n            visible = true;\n\n            $(doc).bind('keydown.spectrum', onkeydown);\n            $(doc).bind('click.spectrum', clickout);\n            $(window).bind('resize.spectrum', resize);\n            replacer.addClass('sp-active');\n            container.removeClass('sp-hidden');\n\n            reflow();\n            updateUI();\n\n            colorOnShow = get();\n\n            drawInitial();\n            callbacks.show(colorOnShow);\n            boundElement.trigger('show.spectrum', [ colorOnShow ]);\n        }\n\n        function onkeydown(e) {\n            // Close on ESC\n            if (e.keyCode === 27) {\n                hide();\n            }\n        }\n\n        function clickout(e) {\n            // Return on right click.\n            if (e.button ===2) { return; }\n\n            // If a drag event was happening during the mouseup, don't hide\n            // on click.\n            if (isDragging) { return; }\n\n            if (clickoutFiresChange) {\n                updateOriginalInput(true);\n            }\n            else {\n                revert();\n            }\n            hide();\n        }\n\n        function hide() {\n            // Return if hiding is unnecessary\n            if (!visible || flat) { return; }\n            visible = false;\n\n            $(doc).unbind('keydown.spectrum', onkeydown);\n            $(doc).unbind('click.spectrum', clickout);\n            $(window).unbind('resize.spectrum', resize);\n\n            replacer.removeClass('sp-active');\n            container.addClass('sp-hidden');\n\n            callbacks.hide(get());\n            boundElement.trigger('hide.spectrum', [ get() ]);\n        }\n\n        function revert() {\n            set(colorOnShow, true);\n        }\n\n        function set(color, ignoreFormatChange) {\n            if (tinycolor.equals(color, get())) {\n                // Update UI just in case a validation error needs\n                // to be cleared.\n                updateUI();\n                return;\n            }\n\n            var newColor, newHsv;\n            if (!color && allowEmpty) {\n                isEmpty = true;\n            } else {\n                isEmpty = false;\n                newColor = tinycolor(color);\n                newHsv = newColor.toHsv();\n\n                currentHue = (newHsv.h % 360) / 360;\n                currentSaturation = newHsv.s;\n                currentValue = newHsv.v;\n                currentAlpha = newHsv.a;\n            }\n            updateUI();\n\n            if (newColor && newColor.isValid() && !ignoreFormatChange) {\n                currentPreferredFormat = preferredFormat || newColor.getFormat();\n            }\n        }\n\n        function get(opts) {\n            opts = opts || { };\n\n            if (allowEmpty && isEmpty) {\n                return null;\n            }\n\n            return tinycolor.fromRatio({\n                h: currentHue,\n                s: currentSaturation,\n                v: currentValue,\n                a: Math.round(currentAlpha * 100) / 100\n            }, { format: opts.format || currentPreferredFormat });\n        }\n\n        function isValid() {\n            return !textInput.hasClass('sp-validation-error');\n        }\n\n        function move() {\n            updateUI();\n\n            callbacks.move(get());\n            boundElement.trigger('move.spectrum', [ get() ]);\n        }\n\n        function updateUI() {\n\n            textInput.removeClass('sp-validation-error');\n\n            updateHelperLocations();\n\n            // Update dragger background color (gradients take care of saturation and value).\n            var flatColor = tinycolor.fromRatio({ h: currentHue, s: 1, v: 1 });\n            dragger.css('background-color', flatColor.toHexString());\n\n            // Get a format that alpha will be included in (hex and names ignore alpha)\n            var format = currentPreferredFormat;\n            if (currentAlpha < 1 && !(currentAlpha === 0 && format === 'name')) {\n                if (format === 'hex' || format === 'hex3' || format === 'hex6' || format === 'name') {\n                    format = 'rgb';\n                }\n            }\n\n            var realColor = get({ format: format }),\n                displayColor = '';\n\n             //reset background info for preview element\n            previewElement.removeClass('sp-clear-display');\n            previewElement.css('background-color', 'transparent');\n\n            if (!realColor && allowEmpty) {\n                // Update the replaced elements background with icon indicating no color selection\n                previewElement.addClass('sp-clear-display');\n            }\n            else {\n                var realHex = realColor.toHexString(),\n                    realRgb = realColor.toRgbString();\n\n                // Update the replaced elements background color (with actual selected color)\n                if (rgbaSupport || realColor.alpha === 1) {\n                    previewElement.css('background-color', realRgb);\n                }\n                else {\n                    previewElement.css('background-color', 'transparent');\n                    previewElement.css('filter', realColor.toFilter());\n                }\n\n                if (opts.showAlpha) {\n                    var rgb = realColor.toRgb();\n                    rgb.a = 0;\n                    var realAlpha = tinycolor(rgb).toRgbString();\n                    var gradient = 'linear-gradient(left, ' + realAlpha + ', ' + realHex + ')';\n\n                    if (IE) {\n                        alphaSliderInner.css('filter', tinycolor(realAlpha).toFilter({ gradientType: 1 }, realHex));\n                    }\n                    else {\n                        alphaSliderInner.css('background', '-webkit-' + gradient);\n                        alphaSliderInner.css('background', '-moz-' + gradient);\n                        alphaSliderInner.css('background', '-ms-' + gradient);\n                        // Use current syntax gradient on unprefixed property.\n                        alphaSliderInner.css('background',\n                            'linear-gradient(to right, ' + realAlpha + ', ' + realHex + ')');\n                    }\n                }\n\n                displayColor = realColor.toString(format);\n            }\n\n            // Update the text entry input as it changes happen\n            if (opts.showInput) {\n                textInput.val(displayColor);\n            }\n\n            if (opts.showPalette) {\n                drawPalette();\n            }\n\n            drawInitial();\n        }\n\n        function updateHelperLocations() {\n            var s = currentSaturation;\n            var v = currentValue;\n\n            if(allowEmpty && isEmpty) {\n                //if selected color is empty, hide the helpers\n                alphaSlideHelper.hide();\n                slideHelper.hide();\n                dragHelper.hide();\n            }\n            else {\n                //make sure helpers are visible\n                alphaSlideHelper.show();\n                slideHelper.show();\n                dragHelper.show();\n\n                // Where to show the little circle in that displays your current selected color\n                var dragX = s * dragWidth;\n                var dragY = dragHeight - (v * dragHeight);\n                dragX = Math.max(\n                    -dragHelperHeight,\n                    Math.min(dragWidth - dragHelperHeight, dragX - dragHelperHeight)\n                );\n                dragY = Math.max(\n                    -dragHelperHeight,\n                    Math.min(dragHeight - dragHelperHeight, dragY - dragHelperHeight)\n                );\n                dragHelper.css({\n                    'top': dragY + 'px',\n                    'left': dragX + 'px'\n                });\n\n                var alphaX = currentAlpha * alphaWidth;\n                alphaSlideHelper.css({\n                    'left': (alphaX - (alphaSlideHelperWidth / 2)) + 'px'\n                });\n\n                // Where to show the bar that displays your current selected hue\n                var slideY = (currentHue) * slideHeight;\n                slideHelper.css({\n                    'top': (slideY - slideHelperHeight) + 'px'\n                });\n            }\n        }\n\n        function updateOriginalInput(fireCallback) {\n            var color = get(),\n                displayColor = '',\n                hasChanged = !tinycolor.equals(color, colorOnShow);\n\n            if (color) {\n                displayColor = color.toString(currentPreferredFormat);\n                // Update the selection palette with the current color\n                addColorToSelectionPalette(color);\n            }\n\n            if (isInput) {\n                boundElement.val(displayColor);\n            }\n\n            if (fireCallback && hasChanged) {\n                callbacks.change(color);\n                boundElement.trigger('change', [ color ]);\n            }\n        }\n\n        function reflow() {\n            dragWidth = dragger.width();\n            dragHeight = dragger.height();\n            dragHelperHeight = dragHelper.height();\n            slideWidth = slider.width();\n            slideHeight = slider.height();\n            slideHelperHeight = slideHelper.height();\n            alphaWidth = alphaSlider.width();\n            alphaSlideHelperWidth = alphaSlideHelper.width();\n\n            if (!flat) {\n                container.css('position', 'absolute');\n                if (opts.offset) {\n                    container.offset(opts.offset);\n                } else {\n                    container.offset(getOffset(container, offsetElement));\n                }\n            }\n\n            updateHelperLocations();\n\n            if (opts.showPalette) {\n                drawPalette();\n            }\n\n            boundElement.trigger('reflow.spectrum');\n        }\n\n        function destroy() {\n            boundElement.show();\n            offsetElement.unbind('click.spectrum touchstart.spectrum');\n            container.remove();\n            replacer.remove();\n            spectrums[spect.id] = null;\n        }\n\n        function option(optionName, optionValue) {\n            if (optionName === undefined) {\n                return $.extend({}, opts);\n            }\n            if (optionValue === undefined) {\n                return opts[optionName];\n            }\n\n            opts[optionName] = optionValue;\n            applyOptions();\n        }\n\n        function enable() {\n            disabled = false;\n            boundElement.attr('disabled', false);\n            offsetElement.removeClass('sp-disabled');\n        }\n\n        function disable() {\n            hide();\n            disabled = true;\n            boundElement.attr('disabled', true);\n            offsetElement.addClass('sp-disabled');\n        }\n\n        function setOffset(coord) {\n            opts.offset = coord;\n            reflow();\n        }\n\n        initialize();\n\n        var spect = {\n            show: show,\n            hide: hide,\n            toggle: toggle,\n            reflow: reflow,\n            option: option,\n            enable: enable,\n            disable: disable,\n            offset: setOffset,\n            set: function (c) {\n                set(c);\n                updateOriginalInput();\n            },\n            get: get,\n            destroy: destroy,\n            container: container\n        };\n\n        spect.id = spectrums.push(spect) - 1;\n\n        return spect;\n    }\n\n    /**\n    * checkOffset - get the offset below/above and left/right element depending on screen position\n    * Thanks https://github.com/jquery/jquery-ui/blob/master/ui/jquery.ui.datepicker.js\n    */\n    function getOffset(picker, input) {\n        var extraY = 0;\n        var dpWidth = picker.outerWidth();\n        var dpHeight = picker.outerHeight();\n        var inputHeight = input.outerHeight();\n        var doc = picker[0].ownerDocument;\n        var docElem = doc.documentElement;\n        var viewWidth = docElem.clientWidth + $(doc).scrollLeft();\n        var viewHeight = docElem.clientHeight + $(doc).scrollTop();\n        var offset = input.offset();\n        offset.top += inputHeight;\n\n        offset.left -=\n            Math.min(offset.left, (offset.left + dpWidth > viewWidth && viewWidth > dpWidth) ?\n            Math.abs(offset.left + dpWidth - viewWidth) : 0);\n\n        offset.top -=\n            Math.min(offset.top, ((offset.top + dpHeight > viewHeight && viewHeight > dpHeight) ?\n            Math.abs(dpHeight + inputHeight - extraY) : extraY));\n\n        return offset;\n    }\n\n    /**\n    * noop - do nothing\n    */\n    function noop() {\n\n    }\n\n    /**\n    * stopPropagation - makes the code only doing this a little easier to read in line\n    */\n    function stopPropagation(e) {\n        e.stopPropagation();\n    }\n\n    /**\n    * Create a function bound to a given object\n    * Thanks to underscore.js\n    */\n    function bind(func, obj) {\n        var slice = Array.prototype.slice;\n        var args = slice.call(arguments, 2);\n        return function () {\n            return func.apply(obj, args.concat(slice.call(arguments)));\n        };\n    }\n\n    /**\n    * Lightweight drag helper.  Handles containment within the element, so that\n    * when dragging, the x is within [0,element.width] and y is within [0,element.height]\n    */\n    function draggable(element, onmove, onstart, onstop) {\n        onmove = onmove || function () { };\n        onstart = onstart || function () { };\n        onstop = onstop || function () { };\n        var doc = document;\n        var dragging = false;\n        var offset = {};\n        var maxHeight = 0;\n        var maxWidth = 0;\n        var hasTouch = ('ontouchstart' in window);\n\n        var duringDragEvents = {};\n        duringDragEvents['selectstart'] = prevent;\n        duringDragEvents['dragstart'] = prevent;\n        duringDragEvents['touchmove mousemove'] = move;\n        duringDragEvents['touchend mouseup'] = stop;\n\n        function prevent(e) {\n            if (e.stopPropagation) {\n                e.stopPropagation();\n            }\n            if (e.preventDefault) {\n                e.preventDefault();\n            }\n            e.returnValue = false;\n        }\n\n        function move(e) {\n            if (dragging) {\n                // Mouseup happened outside of window\n                if (IE && doc.documentMode < 9 && !e.button) {\n                    return stop();\n                }\n\n                var t0 = e.originalEvent && e.originalEvent.touches && e.originalEvent.touches[0];\n                var pageX = t0 && t0.pageX || e.pageX;\n                var pageY = t0 && t0.pageY || e.pageY;\n\n                var dragX = Math.max(0, Math.min(pageX - offset.left, maxWidth));\n                var dragY = Math.max(0, Math.min(pageY - offset.top, maxHeight));\n\n                if (hasTouch) {\n                    // Stop scrolling in iOS\n                    prevent(e);\n                }\n\n                onmove.apply(element, [dragX, dragY, e]);\n            }\n        }\n\n        function start(e) {\n            var rightclick = (e.which) ? (e.which ===3) : (e.button === 2);\n\n            if (!rightclick && !dragging) {\n                if (onstart.apply(element, arguments) !== false) {\n                    dragging = true;\n                    maxHeight = $(element).height();\n                    maxWidth = $(element).width();\n                    offset = $(element).offset();\n\n                    $(doc).bind(duringDragEvents);\n                    $(doc.body).addClass('sp-dragging');\n\n                    move(e);\n\n                    prevent(e);\n                }\n            }\n        }\n\n        function stop() {\n            if (dragging) {\n                $(doc).unbind(duringDragEvents);\n                $(doc.body).removeClass('sp-dragging');\n\n                // Wait a tick before notifying observers to allow the click event\n                // to fire in Chrome.\n                setTimeout(function() {\n                    onstop.apply(element, arguments);\n                }, 0);\n            }\n            dragging = false;\n        }\n\n        $(element).bind('touchstart mousedown', start);\n    }\n\n    function throttle(func, wait, debounce) {\n        var timeout;\n        return function () {\n            var context = this, args = arguments;\n            var throttler = function () {\n                timeout = null;\n                func.apply(context, args);\n            };\n            if (debounce) clearTimeout(timeout);\n            if (debounce || !timeout) timeout = setTimeout(throttler, wait);\n        };\n    }\n\n    function inputTypeColorSupport() {\n        return $.fn.spectrum.inputTypeColorSupport();\n    }\n\n    /**\n    * Define a jQuery plugin\n    */\n    var dataID = 'spectrum.id';\n    $.fn.spectrum = function (opts, extra) {\n\n        if (typeof opts === 'string') {\n\n            var returnValue = this;\n            var args = Array.prototype.slice.call( arguments, 1 );\n\n            this.each(function () {\n                var spect = spectrums[$(this).data(dataID)];\n                if (spect) {\n                    var method = spect[opts];\n                    if (!method) {\n                        throw new Error( 'Spectrum: no such method: \"' + opts + '\"' );\n                    }\n\n                    if (opts === 'get') {\n                        returnValue = spect.get();\n                    }\n                    else if (opts === 'container') {\n                        returnValue = spect.container;\n                    }\n                    else if (opts === 'option') {\n                        returnValue = spect.option.apply(spect, args);\n                    }\n                    else if (opts === 'destroy') {\n                        spect.destroy();\n                        $(this).removeData(dataID);\n                    }\n                    else {\n                        method.apply(spect, args);\n                    }\n                }\n            });\n\n            return returnValue;\n        }\n\n        // Initializing a new instance of spectrum\n        return this.spectrum('destroy').each(function () {\n            var options = $.extend({}, opts, $(this).data());\n            var spect = spectrum(this, options);\n            $(this).data(dataID, spect.id);\n        });\n    };\n\n    $.fn.spectrum.load = true;\n    $.fn.spectrum.loadOpts = {};\n    $.fn.spectrum.draggable = draggable;\n    $.fn.spectrum.defaults = defaultOpts;\n    $.fn.spectrum.inputTypeColorSupport = function inputTypeColorSupport() {\n        if (typeof inputTypeColorSupport._cachedResult === 'undefined') {\n            var colorInput = $('<input type=\"color\"/>')[0]; // if color element is supported, value will default to not null\n            inputTypeColorSupport._cachedResult = colorInput.type === 'color' && colorInput.value !== '';\n        }\n        return inputTypeColorSupport._cachedResult;\n    };\n\n    $.spectrum = { };\n    $.spectrum.localization = { };\n    $.spectrum.palettes = { };\n\n    $.fn.spectrum.processNativeColorInputs = function () {\n        var colorInputs = $('input[type=color]');\n        if (colorInputs.length && !inputTypeColorSupport()) {\n            colorInputs.spectrum({\n                preferredFormat: 'hex6'\n            });\n        }\n    };\n\n    // TinyColor v1.1.2\n    // https://github.com/bgrins/TinyColor\n    // Brian Grinstead, MIT License\n\n    (function() {\n\n    var trimLeft = /^[\\s,#]+/,\n        trimRight = /\\s+$/,\n        tinyCounter = 0,\n        math = Math,\n        mathRound = math.round,\n        mathMin = math.min,\n        mathMax = math.max,\n        mathRandom = math.random;\n\n    var tinycolor = function(color, opts) {\n\n        color = (color) ? color : '';\n        opts = opts || { };\n\n        // If input is already a tinycolor, return itself\n        if (color instanceof tinycolor) {\n           return color;\n        }\n        // If we are called as a function, call using new instead\n        if (!(this instanceof tinycolor)) {\n            return new tinycolor(color, opts);\n        }\n\n        var rgb = inputToRGB(color);\n        this._originalInput = color,\n        this._r = rgb.r,\n        this._g = rgb.g,\n        this._b = rgb.b,\n        this._a = rgb.a,\n        this._roundA = mathRound(100*this._a) / 100,\n        this._format = opts.format || rgb.format;\n        this._gradientType = opts.gradientType;\n\n        // Don't let the range of [0,255] come back in [0,1].\n        // Potentially lose a little bit of precision here, but will fix issues where\n        // .5 gets interpreted as half of the total, instead of half of 1\n        // If it was supposed to be 128, this was already taken care of by `inputToRgb`\n        if (this._r < 1) { this._r = mathRound(this._r); }\n        if (this._g < 1) { this._g = mathRound(this._g); }\n        if (this._b < 1) { this._b = mathRound(this._b); }\n\n        this._ok = rgb.ok;\n        this._tc_id = tinyCounter++;\n    };\n\n    tinycolor.prototype = {\n        isDark: function() {\n            return this.getBrightness() < 128;\n        },\n        isLight: function() {\n            return !this.isDark();\n        },\n        isValid: function() {\n            return this._ok;\n        },\n        getOriginalInput: function() {\n          return this._originalInput;\n        },\n        getFormat: function() {\n            return this._format;\n        },\n        getAlpha: function() {\n            return this._a;\n        },\n        getBrightness: function() {\n            var rgb = this.toRgb();\n            return (rgb.r * 299 + rgb.g * 587 + rgb.b * 114) / 1000;\n        },\n        setAlpha: function(value) {\n            this._a = boundAlpha(value);\n            this._roundA = mathRound(100*this._a) / 100;\n            return this;\n        },\n        toHsv: function() {\n            var hsv = rgbToHsv(this._r, this._g, this._b);\n            return { h: hsv.h * 360, s: hsv.s, v: hsv.v, a: this._a };\n        },\n        toHsvString: function() {\n            var hsv = rgbToHsv(this._r, this._g, this._b);\n            var h = mathRound(hsv.h * 360), s = mathRound(hsv.s * 100), v = mathRound(hsv.v * 100);\n            return (this._a === 1) ?\n              'hsv('  + h + ', ' + s + '%, ' + v + '%)' :\n              'hsva(' + h + ', ' + s + '%, ' + v + '%, '+ this._roundA + ')';\n        },\n        toHsl: function() {\n            var hsl = rgbToHsl(this._r, this._g, this._b);\n            return { h: hsl.h * 360, s: hsl.s, l: hsl.l, a: this._a };\n        },\n        toHslString: function() {\n            var hsl = rgbToHsl(this._r, this._g, this._b);\n            var h = mathRound(hsl.h * 360), s = mathRound(hsl.s * 100), l = mathRound(hsl.l * 100);\n            return (this._a === 1) ?\n              'hsl('  + h + ', ' + s + '%, ' + l + '%)' :\n              'hsla(' + h + ', ' + s + '%, ' + l + '%, '+ this._roundA + ')';\n        },\n        toHex: function(allow3Char) {\n            return rgbToHex(this._r, this._g, this._b, allow3Char);\n        },\n        toHexString: function(allow3Char) {\n            return '#' + this.toHex(allow3Char);\n        },\n        toHex8: function() {\n            return rgbaToHex(this._r, this._g, this._b, this._a);\n        },\n        toHex8String: function() {\n            return '#' + this.toHex8();\n        },\n        toRgb: function() {\n            return { r: mathRound(this._r), g: mathRound(this._g), b: mathRound(this._b), a: this._a };\n        },\n        toRgbString: function() {\n            return (this._a === 1) ?\n              'rgb('  + mathRound(this._r) + ', ' + mathRound(this._g) + ', ' + mathRound(this._b) + ')' :\n              'rgba(' + mathRound(this._r) + ', ' + mathRound(this._g) + ', ' + mathRound(this._b) + ', ' + this._roundA + ')';\n        },\n        toPercentageRgb: function() {\n            return { r: mathRound(bound01(this._r, 255) * 100) + '%', g: mathRound(bound01(this._g, 255) * 100) + '%', b: mathRound(bound01(this._b, 255) * 100) + '%', a: this._a };\n        },\n        toPercentageRgbString: function() {\n            return (this._a === 1) ?\n              'rgb('  + mathRound(bound01(this._r, 255) * 100) + '%, ' + mathRound(bound01(this._g, 255) * 100) + '%, ' + mathRound(bound01(this._b, 255) * 100) + '%)' :\n              'rgba(' + mathRound(bound01(this._r, 255) * 100) + '%, ' + mathRound(bound01(this._g, 255) * 100) + '%, ' + mathRound(bound01(this._b, 255) * 100) + '%, ' + this._roundA + ')';\n        },\n        toName: function() {\n            if (this._a === 0) {\n                return 'transparent';\n            }\n\n            if (this._a < 1) {\n                return false;\n            }\n\n            return hexNames[rgbToHex(this._r, this._g, this._b, true)] || false;\n        },\n        toFilter: function(secondColor) {\n            var hex8String = '#' + rgbaToHex(this._r, this._g, this._b, this._a);\n            var secondHex8String = hex8String;\n            var gradientType = this._gradientType ? 'GradientType = 1, ' : '';\n\n            if (secondColor) {\n                var s = tinycolor(secondColor);\n                secondHex8String = s.toHex8String();\n            }\n\n            return 'progid:DXImageTransform.Microsoft.gradient('+gradientType+'startColorstr='+hex8String+',endColorstr='+secondHex8String+')';\n        },\n        toString: function(format) {\n            var formatSet = !!format;\n            format = format || this._format;\n\n            var formattedString = false;\n            var hasAlpha = this._a < 1 && this._a >= 0;\n            var needsAlphaFormat = !formatSet && hasAlpha && (format === 'hex' || format === 'hex6' || format === 'hex3' || format === 'name');\n\n            if (needsAlphaFormat) {\n                // Special case for 'transparent', all other non-alpha formats\n                // will return rgba when there is transparency.\n                if (format === 'name' && this._a === 0) {\n                    return this.toName();\n                }\n                return this.toRgbString();\n            }\n            if (format === 'rgb') {\n                formattedString = this.toRgbString();\n            }\n            if (format === 'prgb') {\n                formattedString = this.toPercentageRgbString();\n            }\n            if (format === 'hex' || format === 'hex6') {\n                formattedString = this.toHexString();\n            }\n            if (format === 'hex3') {\n                formattedString = this.toHexString(true);\n            }\n            if (format === 'hex8') {\n                formattedString = this.toHex8String();\n            }\n            if (format === 'name') {\n                formattedString = this.toName();\n            }\n            if (format === 'hsl') {\n                formattedString = this.toHslString();\n            }\n            if (format === 'hsv') {\n                formattedString = this.toHsvString();\n            }\n\n            return formattedString || this.toHexString();\n        },\n\n        _applyModification: function(fn, args) {\n            var color = fn.apply(null, [this].concat([].slice.call(args)));\n            this._r = color._r;\n            this._g = color._g;\n            this._b = color._b;\n            this.setAlpha(color._a);\n            return this;\n        },\n        lighten: function() {\n            return this._applyModification(lighten, arguments);\n        },\n        brighten: function() {\n            return this._applyModification(brighten, arguments);\n        },\n        darken: function() {\n            return this._applyModification(darken, arguments);\n        },\n        desaturate: function() {\n            return this._applyModification(desaturate, arguments);\n        },\n        saturate: function() {\n            return this._applyModification(saturate, arguments);\n        },\n        greyscale: function() {\n            return this._applyModification(greyscale, arguments);\n        },\n        spin: function() {\n            return this._applyModification(spin, arguments);\n        },\n\n        _applyCombination: function(fn, args) {\n            return fn.apply(null, [this].concat([].slice.call(args)));\n        },\n        analogous: function() {\n            return this._applyCombination(analogous, arguments);\n        },\n        complement: function() {\n            return this._applyCombination(complement, arguments);\n        },\n        monochromatic: function() {\n            return this._applyCombination(monochromatic, arguments);\n        },\n        splitcomplement: function() {\n            return this._applyCombination(splitcomplement, arguments);\n        },\n        triad: function() {\n            return this._applyCombination(triad, arguments);\n        },\n        tetrad: function() {\n            return this._applyCombination(tetrad, arguments);\n        }\n    };\n\n    // If input is an object, force 1 into '1.0' to handle ratios properly\n    // String input requires '1.0' as input, so 1 will be treated as 1\n    tinycolor.fromRatio = function(color, opts) {\n        if (typeof color === 'object') {\n            var newColor = {};\n            for (var i in color) {\n                if (color.hasOwnProperty(i)) {\n                    if (i === 'a') {\n                        newColor[i] = color[i];\n                    }\n                    else {\n                        newColor[i] = convertToPercentage(color[i]);\n                    }\n                }\n            }\n            color = newColor;\n        }\n\n        return tinycolor(color, opts);\n    };\n\n    // Given a string or object, convert that input to RGB\n    // Possible string inputs:\n    //\n    //     'red'\n    //     '#f00' or 'f00'\n    //     '#ff0000' or 'ff0000'\n    //     '#ff000000' or 'ff000000'\n    //     'rgb 255 0 0' or 'rgb (255, 0, 0)'\n    //     'rgb 1.0 0 0' or 'rgb (1, 0, 0)'\n    //     'rgba (255, 0, 0, 1)' or 'rgba 255, 0, 0, 1'\n    //     'rgba (1.0, 0, 0, 1)' or 'rgba 1.0, 0, 0, 1'\n    //     'hsl(0, 100%, 50%)' or 'hsl 0 100% 50%'\n    //     'hsla(0, 100%, 50%, 1)' or 'hsla 0 100% 50%, 1'\n    //     'hsv(0, 100%, 100%)' or 'hsv 0 100% 100%'\n    //\n    function inputToRGB(color) {\n\n        var rgb = { r: 0, g: 0, b: 0 };\n        var a = 1;\n        var ok = false;\n        var format = false;\n\n        if (typeof color === 'string') {\n            color = stringInputToObject(color);\n        }\n\n        if (typeof color === 'object') {\n            if (color.hasOwnProperty('r') && color.hasOwnProperty('g') && color.hasOwnProperty('b')) {\n                rgb = rgbToRgb(color.r, color.g, color.b);\n                ok = true;\n                format = String(color.r).substr(-1) === '%' ? 'prgb' : 'rgb';\n            }\n            else if (color.hasOwnProperty('h') && color.hasOwnProperty('s') && color.hasOwnProperty('v')) {\n                color.s = convertToPercentage(color.s);\n                color.v = convertToPercentage(color.v);\n                rgb = hsvToRgb(color.h, color.s, color.v);\n                ok = true;\n                format = 'hsv';\n            }\n            else if (color.hasOwnProperty('h') && color.hasOwnProperty('s') && color.hasOwnProperty('l')) {\n                color.s = convertToPercentage(color.s);\n                color.l = convertToPercentage(color.l);\n                rgb = hslToRgb(color.h, color.s, color.l);\n                ok = true;\n                format = 'hsl';\n            }\n\n            if (color.hasOwnProperty('a')) {\n                a = color.a;\n            }\n        }\n\n        a = boundAlpha(a);\n\n        return {\n            ok: ok,\n            format: color.format || format,\n            r: mathMin(255, mathMax(rgb.r, 0)),\n            g: mathMin(255, mathMax(rgb.g, 0)),\n            b: mathMin(255, mathMax(rgb.b, 0)),\n            a: a\n        };\n    }\n\n\n    // Conversion Functions\n    // --------------------\n\n    // `rgbToHsl`, `rgbToHsv`, `hslToRgb`, `hsvToRgb` modified from:\n    // <http://mjijackson.com/2008/02/rgb-to-hsl-and-rgb-to-hsv-color-model-conversion-algorithms-in-javascript>\n\n    // `rgbToRgb`\n    // Handle bounds / percentage checking to conform to CSS color spec\n    // <http://www.w3.org/TR/css3-color/>\n    // *Assumes:* r, g, b in [0, 255] or [0, 1]\n    // *Returns:* { r, g, b } in [0, 255]\n    function rgbToRgb(r, g, b){\n        return {\n            r: bound01(r, 255) * 255,\n            g: bound01(g, 255) * 255,\n            b: bound01(b, 255) * 255\n        };\n    }\n\n    // `rgbToHsl`\n    // Converts an RGB color value to HSL.\n    // *Assumes:* r, g, and b are contained in [0, 255] or [0, 1]\n    // *Returns:* { h, s, l } in [0,1]\n    function rgbToHsl(r, g, b) {\n\n        r = bound01(r, 255);\n        g = bound01(g, 255);\n        b = bound01(b, 255);\n\n        var max = mathMax(r, g, b), min = mathMin(r, g, b);\n        var h, s, l = (max + min) / 2;\n\n        if(max === min) {\n            h = s = 0; // achromatic\n        }\n        else {\n            var d = max - min;\n            s = l > 0.5 ? d / (2 - max - min) : d / (max + min);\n            switch(max) {\n                case r: h = (g - b) / d + (g < b ? 6 : 0); break;\n                case g: h = (b - r) / d + 2; break;\n                case b: h = (r - g) / d + 4; break;\n            }\n\n            h /= 6;\n        }\n\n        return { h: h, s: s, l: l };\n    }\n\n    // `hslToRgb`\n    // Converts an HSL color value to RGB.\n    // *Assumes:* h is contained in [0, 1] or [0, 360] and s and l are contained [0, 1] or [0, 100]\n    // *Returns:* { r, g, b } in the set [0, 255]\n    function hslToRgb(h, s, l) {\n        var r, g, b;\n\n        h = bound01(h, 360);\n        s = bound01(s, 100);\n        l = bound01(l, 100);\n\n        function hue2rgb(p, q, t) {\n            if(t < 0) t += 1;\n            if(t > 1) t -= 1;\n            if(t < 1/6) return p + (q - p) * 6 * t;\n            if(t < 1/2) return q;\n            if(t < 2/3) return p + (q - p) * (2/3 - t) * 6;\n            return p;\n        }\n\n        if(s === 0) {\n            r = g = b = l; // achromatic\n        }\n        else {\n            var q = l < 0.5 ? l * (1 + s) : l + s - l * s;\n            var p = 2 * l - q;\n            r = hue2rgb(p, q, h + 1/3);\n            g = hue2rgb(p, q, h);\n            b = hue2rgb(p, q, h - 1/3);\n        }\n\n        return { r: r * 255, g: g * 255, b: b * 255 };\n    }\n\n    // `rgbToHsv`\n    // Converts an RGB color value to HSV\n    // *Assumes:* r, g, and b are contained in the set [0, 255] or [0, 1]\n    // *Returns:* { h, s, v } in [0,1]\n    function rgbToHsv(r, g, b) {\n\n        r = bound01(r, 255);\n        g = bound01(g, 255);\n        b = bound01(b, 255);\n\n        var max = mathMax(r, g, b), min = mathMin(r, g, b);\n        var h, s, v = max;\n\n        var d = max - min;\n        s = max === 0 ? 0 : d / max;\n\n        if(max === min) {\n            h = 0; // achromatic\n        }\n        else {\n            switch(max) {\n                case r: h = (g - b) / d + (g < b ? 6 : 0); break;\n                case g: h = (b - r) / d + 2; break;\n                case b: h = (r - g) / d + 4; break;\n            }\n            h /= 6;\n        }\n        return { h: h, s: s, v: v };\n    }\n\n    // `hsvToRgb`\n    // Converts an HSV color value to RGB.\n    // *Assumes:* h is contained in [0, 1] or [0, 360] and s and v are contained in [0, 1] or [0, 100]\n    // *Returns:* { r, g, b } in the set [0, 255]\n     function hsvToRgb(h, s, v) {\n\n        h = bound01(h, 360) * 6;\n        s = bound01(s, 100);\n        v = bound01(v, 100);\n\n        var i = math.floor(h),\n            f = h - i,\n            p = v * (1 - s),\n            q = v * (1 - f * s),\n            t = v * (1 - (1 - f) * s),\n            mod = i % 6,\n            r = [v, q, p, p, t, v][mod],\n            g = [t, v, v, q, p, p][mod],\n            b = [p, p, t, v, v, q][mod];\n\n        return { r: r * 255, g: g * 255, b: b * 255 };\n    }\n\n    // `rgbToHex`\n    // Converts an RGB color to hex\n    // Assumes r, g, and b are contained in the set [0, 255]\n    // Returns a 3 or 6 character hex\n    function rgbToHex(r, g, b, allow3Char) {\n\n        var hex = [\n            pad2(mathRound(r).toString(16)),\n            pad2(mathRound(g).toString(16)),\n            pad2(mathRound(b).toString(16))\n        ];\n\n        // Return a 3 character hex if possible\n        if (allow3Char && hex[0].charAt(0) === hex[0].charAt(1) && hex[1].charAt(0) === hex[1].charAt(1) && hex[2].charAt(0) === hex[2].charAt(1)) {\n            return hex[0].charAt(0) + hex[1].charAt(0) + hex[2].charAt(0);\n        }\n\n        return hex.join('');\n    }\n        // `rgbaToHex`\n        // Converts an RGBA color plus alpha transparency to hex\n        // Assumes r, g, b and a are contained in the set [0, 255]\n        // Returns an 8 character hex\n        function rgbaToHex(r, g, b, a) {\n\n            var hex = [\n                pad2(convertDecimalToHex(a)),\n                pad2(mathRound(r).toString(16)),\n                pad2(mathRound(g).toString(16)),\n                pad2(mathRound(b).toString(16))\n            ];\n\n            return hex.join('');\n        }\n\n    // `equals`\n    // Can be called with any tinycolor input\n    tinycolor.equals = function (color1, color2) {\n        if (!color1 || !color2) { return false; }\n        return tinycolor(color1).toRgbString() === tinycolor(color2).toRgbString();\n    };\n    tinycolor.random = function() {\n        return tinycolor.fromRatio({\n            r: mathRandom(),\n            g: mathRandom(),\n            b: mathRandom()\n        });\n    };\n\n\n    // Modification Functions\n    // ----------------------\n    // Thanks to less.js for some of the basics here\n    // <https://github.com/cloudhead/less.js/blob/master/lib/less/functions.js>\n\n    function desaturate(color, amount) {\n        amount = (amount === 0) ? 0 : (amount || 10);\n        var hsl = tinycolor(color).toHsl();\n        hsl.s -= amount / 100;\n        hsl.s = clamp01(hsl.s);\n        return tinycolor(hsl);\n    }\n\n    function saturate(color, amount) {\n        amount = (amount === 0) ? 0 : (amount || 10);\n        var hsl = tinycolor(color).toHsl();\n        hsl.s += amount / 100;\n        hsl.s = clamp01(hsl.s);\n        return tinycolor(hsl);\n    }\n\n    function greyscale(color) {\n        return tinycolor(color).desaturate(100);\n    }\n\n    function lighten (color, amount) {\n        amount = (amount === 0) ? 0 : (amount || 10);\n        var hsl = tinycolor(color).toHsl();\n        hsl.l += amount / 100;\n        hsl.l = clamp01(hsl.l);\n        return tinycolor(hsl);\n    }\n\n    function brighten(color, amount) {\n        amount = (amount === 0) ? 0 : (amount || 10);\n        var rgb = tinycolor(color).toRgb();\n        rgb.r = mathMax(0, mathMin(255, rgb.r - mathRound(255 * - (amount / 100))));\n        rgb.g = mathMax(0, mathMin(255, rgb.g - mathRound(255 * - (amount / 100))));\n        rgb.b = mathMax(0, mathMin(255, rgb.b - mathRound(255 * - (amount / 100))));\n        return tinycolor(rgb);\n    }\n\n    function darken (color, amount) {\n        amount = (amount === 0) ? 0 : (amount || 10);\n        var hsl = tinycolor(color).toHsl();\n        hsl.l -= amount / 100;\n        hsl.l = clamp01(hsl.l);\n        return tinycolor(hsl);\n    }\n\n    // Spin takes a positive or negative amount within [-360, 360] indicating the change of hue.\n    // Values outside of this range will be wrapped into this range.\n    function spin(color, amount) {\n        var hsl = tinycolor(color).toHsl();\n        var hue = (mathRound(hsl.h) + amount) % 360;\n        hsl.h = hue < 0 ? 360 + hue : hue;\n        return tinycolor(hsl);\n    }\n\n    // Combination Functions\n    // ---------------------\n    // Thanks to jQuery xColor for some of the ideas behind these\n    // <https://github.com/infusion/jQuery-xcolor/blob/master/jquery.xcolor.js>\n\n    function complement(color) {\n        var hsl = tinycolor(color).toHsl();\n        hsl.h = (hsl.h + 180) % 360;\n        return tinycolor(hsl);\n    }\n\n    function triad(color) {\n        var hsl = tinycolor(color).toHsl();\n        var h = hsl.h;\n        return [\n            tinycolor(color),\n            tinycolor({ h: (h + 120) % 360, s: hsl.s, l: hsl.l }),\n            tinycolor({ h: (h + 240) % 360, s: hsl.s, l: hsl.l })\n        ];\n    }\n\n    function tetrad(color) {\n        var hsl = tinycolor(color).toHsl();\n        var h = hsl.h;\n        return [\n            tinycolor(color),\n            tinycolor({ h: (h + 90) % 360, s: hsl.s, l: hsl.l }),\n            tinycolor({ h: (h + 180) % 360, s: hsl.s, l: hsl.l }),\n            tinycolor({ h: (h + 270) % 360, s: hsl.s, l: hsl.l })\n        ];\n    }\n\n    function splitcomplement(color) {\n        var hsl = tinycolor(color).toHsl();\n        var h = hsl.h;\n        return [\n            tinycolor(color),\n            tinycolor({ h: (h + 72) % 360, s: hsl.s, l: hsl.l}),\n            tinycolor({ h: (h + 216) % 360, s: hsl.s, l: hsl.l})\n        ];\n    }\n\n    function analogous(color, results, slices) {\n        results = results || 6;\n        slices = slices || 30;\n\n        var hsl = tinycolor(color).toHsl();\n        var part = 360 / slices;\n        var ret = [tinycolor(color)];\n\n        for (hsl.h = ((hsl.h - (part * results >> 1)) + 720) % 360; --results; ) {\n            hsl.h = (hsl.h + part) % 360;\n            ret.push(tinycolor(hsl));\n        }\n        return ret;\n    }\n\n    function monochromatic(color, results) {\n        results = results || 6;\n        var hsv = tinycolor(color).toHsv();\n        var h = hsv.h, s = hsv.s, v = hsv.v;\n        var ret = [];\n        var modification = 1 / results;\n\n        while (results--) {\n            ret.push(tinycolor({ h: h, s: s, v: v}));\n            v = (v + modification) % 1;\n        }\n\n        return ret;\n    }\n\n    // Utility Functions\n    // ---------------------\n\n    tinycolor.mix = function(color1, color2, amount) {\n        amount = (amount === 0) ? 0 : (amount || 50);\n\n        var rgb1 = tinycolor(color1).toRgb();\n        var rgb2 = tinycolor(color2).toRgb();\n\n        var p = amount / 100;\n        var w = p * 2 - 1;\n        var a = rgb2.a - rgb1.a;\n\n        var w1;\n\n        if (w * a === -1) {\n            w1 = w;\n        } else {\n            w1 = (w + a) / (1 + w * a);\n        }\n\n        w1 = (w1 + 1) / 2;\n\n        var w2 = 1 - w1;\n\n        var rgba = {\n            r: rgb2.r * w1 + rgb1.r * w2,\n            g: rgb2.g * w1 + rgb1.g * w2,\n            b: rgb2.b * w1 + rgb1.b * w2,\n            a: rgb2.a * p  + rgb1.a * (1 - p)\n        };\n\n        return tinycolor(rgba);\n    };\n\n\n    // Readability Functions\n    // ---------------------\n    // <http://www.w3.org/TR/AERT#color-contrast>\n\n    // `readability`\n    // Analyze the 2 colors and returns an object with the following properties:\n    //    `brightness`: difference in brightness between the two colors\n    //    `color`: difference in color/hue between the two colors\n    tinycolor.readability = function(color1, color2) {\n        var c1 = tinycolor(color1);\n        var c2 = tinycolor(color2);\n        var rgb1 = c1.toRgb();\n        var rgb2 = c2.toRgb();\n        var brightnessA = c1.getBrightness();\n        var brightnessB = c2.getBrightness();\n        var colorDiff = (\n            Math.max(rgb1.r, rgb2.r) - Math.min(rgb1.r, rgb2.r) +\n            Math.max(rgb1.g, rgb2.g) - Math.min(rgb1.g, rgb2.g) +\n            Math.max(rgb1.b, rgb2.b) - Math.min(rgb1.b, rgb2.b)\n        );\n\n        return {\n            brightness: Math.abs(brightnessA - brightnessB),\n            color: colorDiff\n        };\n    };\n\n    // `readable`\n    // http://www.w3.org/TR/AERT#color-contrast\n    // Ensure that foreground and background color combinations provide sufficient contrast.\n    // *Example*\n    //    tinycolor.isReadable('#000', '#111') => false\n    tinycolor.isReadable = function(color1, color2) {\n        var readability = tinycolor.readability(color1, color2);\n        return readability.brightness > 125 && readability.color > 500;\n    };\n\n    // `mostReadable`\n    // Given a base color and a list of possible foreground or background\n    // colors for that base, returns the most readable color.\n    // *Example*\n    //    tinycolor.mostReadable('#123', ['#fff', '#000']) => '#000'\n    tinycolor.mostReadable = function(baseColor, colorList) {\n        var bestColor = null;\n        var bestScore = 0;\n        var bestIsReadable = false;\n        for (var i=0; i < colorList.length; i++) {\n\n            // We normalize both around the 'acceptable' breaking point,\n            // but rank brightness constrast higher than hue.\n\n            var readability = tinycolor.readability(baseColor, colorList[i]);\n            var readable = readability.brightness > 125 && readability.color > 500;\n            var score = 3 * (readability.brightness / 125) + (readability.color / 500);\n\n            if ((readable && ! bestIsReadable) ||\n                (readable && bestIsReadable && score > bestScore) ||\n                ((! readable) && (! bestIsReadable) && score > bestScore)) {\n                bestIsReadable = readable;\n                bestScore = score;\n                bestColor = tinycolor(colorList[i]);\n            }\n        }\n        return bestColor;\n    };\n\n\n    // Big List of Colors\n    // ------------------\n    // <http://www.w3.org/TR/css3-color/#svg-color>\n    var names = tinycolor.names = {\n        aliceblue: 'f0f8ff',\n        antiquewhite: 'faebd7',\n        aqua: '0ff',\n        aquamarine: '7fffd4',\n        azure: 'f0ffff',\n        beige: 'f5f5dc',\n        bisque: 'ffe4c4',\n        black: '000',\n        blanchedalmond: 'ffebcd',\n        blue: '00f',\n        blueviolet: '8a2be2',\n        brown: 'a52a2a',\n        burlywood: 'deb887',\n        burntsienna: 'ea7e5d',\n        cadetblue: '5f9ea0',\n        chartreuse: '7fff00',\n        chocolate: 'd2691e',\n        coral: 'ff7f50',\n        cornflowerblue: '6495ed',\n        cornsilk: 'fff8dc',\n        crimson: 'dc143c',\n        cyan: '0ff',\n        darkblue: '00008b',\n        darkcyan: '008b8b',\n        darkgoldenrod: 'b8860b',\n        darkgray: 'a9a9a9',\n        darkgreen: '006400',\n        darkgrey: 'a9a9a9',\n        darkkhaki: 'bdb76b',\n        darkmagenta: '8b008b',\n        darkolivegreen: '556b2f',\n        darkorange: 'ff8c00',\n        darkorchid: '9932cc',\n        darkred: '8b0000',\n        darksalmon: 'e9967a',\n        darkseagreen: '8fbc8f',\n        darkslateblue: '483d8b',\n        darkslategray: '2f4f4f',\n        darkslategrey: '2f4f4f',\n        darkturquoise: '00ced1',\n        darkviolet: '9400d3',\n        deeppink: 'ff1493',\n        deepskyblue: '00bfff',\n        dimgray: '696969',\n        dimgrey: '696969',\n        dodgerblue: '1e90ff',\n        firebrick: 'b22222',\n        floralwhite: 'fffaf0',\n        forestgreen: '228b22',\n        fuchsia: 'f0f',\n        gainsboro: 'dcdcdc',\n        ghostwhite: 'f8f8ff',\n        gold: 'ffd700',\n        goldenrod: 'daa520',\n        gray: '808080',\n        green: '008000',\n        greenyellow: 'adff2f',\n        grey: '808080',\n        honeydew: 'f0fff0',\n        hotpink: 'ff69b4',\n        indianred: 'cd5c5c',\n        indigo: '4b0082',\n        ivory: 'fffff0',\n        khaki: 'f0e68c',\n        lavender: 'e6e6fa',\n        lavenderblush: 'fff0f5',\n        lawngreen: '7cfc00',\n        lemonchiffon: 'fffacd',\n        lightblue: 'add8e6',\n        lightcoral: 'f08080',\n        lightcyan: 'e0ffff',\n        lightgoldenrodyellow: 'fafad2',\n        lightgray: 'd3d3d3',\n        lightgreen: '90ee90',\n        lightgrey: 'd3d3d3',\n        lightpink: 'ffb6c1',\n        lightsalmon: 'ffa07a',\n        lightseagreen: '20b2aa',\n        lightskyblue: '87cefa',\n        lightslategray: '789',\n        lightslategrey: '789',\n        lightsteelblue: 'b0c4de',\n        lightyellow: 'ffffe0',\n        lime: '0f0',\n        limegreen: '32cd32',\n        linen: 'faf0e6',\n        magenta: 'f0f',\n        maroon: '800000',\n        mediumaquamarine: '66cdaa',\n        mediumblue: '0000cd',\n        mediumorchid: 'ba55d3',\n        mediumpurple: '9370db',\n        mediumseagreen: '3cb371',\n        mediumslateblue: '7b68ee',\n        mediumspringgreen: '00fa9a',\n        mediumturquoise: '48d1cc',\n        mediumvioletred: 'c71585',\n        midnightblue: '191970',\n        mintcream: 'f5fffa',\n        mistyrose: 'ffe4e1',\n        moccasin: 'ffe4b5',\n        navajowhite: 'ffdead',\n        navy: '000080',\n        oldlace: 'fdf5e6',\n        olive: '808000',\n        olivedrab: '6b8e23',\n        orange: 'ffa500',\n        orangered: 'ff4500',\n        orchid: 'da70d6',\n        palegoldenrod: 'eee8aa',\n        palegreen: '98fb98',\n        paleturquoise: 'afeeee',\n        palevioletred: 'db7093',\n        papayawhip: 'ffefd5',\n        peachpuff: 'ffdab9',\n        peru: 'cd853f',\n        pink: 'ffc0cb',\n        plum: 'dda0dd',\n        powderblue: 'b0e0e6',\n        purple: '800080',\n        rebeccapurple: '663399',\n        red: 'f00',\n        rosybrown: 'bc8f8f',\n        royalblue: '4169e1',\n        saddlebrown: '8b4513',\n        salmon: 'fa8072',\n        sandybrown: 'f4a460',\n        seagreen: '2e8b57',\n        seashell: 'fff5ee',\n        sienna: 'a0522d',\n        silver: 'c0c0c0',\n        skyblue: '87ceeb',\n        slateblue: '6a5acd',\n        slategray: '708090',\n        slategrey: '708090',\n        snow: 'fffafa',\n        springgreen: '00ff7f',\n        steelblue: '4682b4',\n        tan: 'd2b48c',\n        teal: '008080',\n        thistle: 'd8bfd8',\n        tomato: 'ff6347',\n        turquoise: '40e0d0',\n        violet: 'ee82ee',\n        wheat: 'f5deb3',\n        white: 'fff',\n        whitesmoke: 'f5f5f5',\n        yellow: 'ff0',\n        yellowgreen: '9acd32'\n    };\n\n    // Make it easy to access colors via `hexNames[hex]`\n    var hexNames = tinycolor.hexNames = flip(names);\n\n\n    // Utilities\n    // ---------\n\n    // `{ 'name1': 'val1' }` becomes `{ 'val1': 'name1' }`\n    function flip(o) {\n        var flipped = { };\n        for (var i in o) {\n            if (o.hasOwnProperty(i)) {\n                flipped[o[i]] = i;\n            }\n        }\n        return flipped;\n    }\n\n    // Return a valid alpha value [0,1] with all invalid values being set to 1\n    function boundAlpha(a) {\n        a = parseFloat(a);\n\n        if (isNaN(a) || a < 0 || a > 1) {\n            a = 1;\n        }\n\n        return a;\n    }\n\n    // Take input from [0, n] and return it as [0, 1]\n    function bound01(n, max) {\n        if (isOnePointZero(n)) { n = '100%'; }\n\n        var processPercent = isPercentage(n);\n        n = mathMin(max, mathMax(0, parseFloat(n)));\n\n        // Automatically convert percentage into number\n        if (processPercent) {\n            n = parseInt(n * max, 10) / 100;\n        }\n\n        // Handle floating point rounding errors\n        if ((math.abs(n - max) < 0.000001)) {\n            return 1;\n        }\n\n        // Convert into [0, 1] range if it isn't already\n        return (n % max) / parseFloat(max);\n    }\n\n    // Force a number between 0 and 1\n    function clamp01(val) {\n        return mathMin(1, mathMax(0, val));\n    }\n\n    // Parse a base-16 hex value into a base-10 integer\n    function parseIntFromHex(val) {\n        return parseInt(val, 16);\n    }\n\n    // Need to handle 1.0 as 100%, since once it is a number, there is no difference between it and 1\n    // <http://stackoverflow.com/questions/7422072/javascript-how-to-detect-number-as-a-decimal-including-1-0>\n    function isOnePointZero(n) {\n        return typeof n === 'string' && n.indexOf('.') != -1 && parseFloat(n) === 1;\n    }\n\n    // Check to see if string passed in is a percentage\n    function isPercentage(n) {\n        return typeof n === 'string' && n.indexOf('%') != -1;\n    }\n\n    // Force a hex value to have 2 characters\n    function pad2(c) {\n        return c.length === 1 ? '0' + c : '' + c;\n    }\n\n    // Replace a decimal with it's percentage value\n    function convertToPercentage(n) {\n        if (n <= 1) {\n            n = (n * 100) + '%';\n        }\n\n        return n;\n    }\n\n    // Converts a decimal to a hex value\n    function convertDecimalToHex(d) {\n        return Math.round(parseFloat(d) * 255).toString(16);\n    }\n    // Converts a hex value to a decimal\n    function convertHexToDecimal(h) {\n        return (parseIntFromHex(h) / 255);\n    }\n\n    var matchers = (function() {\n\n        // <http://www.w3.org/TR/css3-values/#integers>\n        var CSS_INTEGER = '[-\\\\+]?\\\\d+%?';\n\n        // <http://www.w3.org/TR/css3-values/#number-value>\n        var CSS_NUMBER = '[-\\\\+]?\\\\d*\\\\.\\\\d+%?';\n\n        // Allow positive/negative integer/number.  Don't capture the either/or, just the entire outcome.\n        var CSS_UNIT = '(?:' + CSS_NUMBER + ')|(?:' + CSS_INTEGER + ')';\n\n        // Actual matching.\n        // Parentheses and commas are optional, but not required.\n        // Whitespace can take the place of commas or opening paren\n        var PERMISSIVE_MATCH3 = '[\\\\s|\\\\(]+(' + CSS_UNIT + ')[,|\\\\s]+(' + CSS_UNIT + ')[,|\\\\s]+(' + CSS_UNIT + ')\\\\s*\\\\)?';\n        var PERMISSIVE_MATCH4 = '[\\\\s|\\\\(]+(' + CSS_UNIT + ')[,|\\\\s]+(' + CSS_UNIT + ')[,|\\\\s]+(' + CSS_UNIT + ')[,|\\\\s]+(' + CSS_UNIT + ')\\\\s*\\\\)?';\n\n        return {\n            rgb: new RegExp('rgb' + PERMISSIVE_MATCH3),\n            rgba: new RegExp('rgba' + PERMISSIVE_MATCH4),\n            hsl: new RegExp('hsl' + PERMISSIVE_MATCH3),\n            hsla: new RegExp('hsla' + PERMISSIVE_MATCH4),\n            hsv: new RegExp('hsv' + PERMISSIVE_MATCH3),\n            hsva: new RegExp('hsva' + PERMISSIVE_MATCH4),\n            hex3: /^([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,\n            hex6: /^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,\n            hex8: /^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/\n        };\n    })();\n\n    // `stringInputToObject`\n    // Permissive string parsing.  Take in a number of formats, and output an object\n    // based on detected format.  Returns `{ r, g, b }` or `{ h, s, l }` or `{ h, s, v}`\n    function stringInputToObject(color) {\n\n        color = color.replace(trimLeft,'').replace(trimRight, '').toLowerCase();\n        var named = false;\n        if (names[color]) {\n            color = names[color];\n            named = true;\n        }\n        else if (color === 'transparent') {\n            return { r: 0, g: 0, b: 0, a: 0, format: 'name' };\n        }\n\n        // Try to match string input using regular expressions.\n        // Keep most of the number bounding out of this function - don't worry about [0,1] or [0,100] or [0,360]\n        // Just return an object and let the conversion functions handle that.\n        // This way the result will be the same whether the tinycolor is initialized with string or object.\n        var match;\n        if ((match = matchers.rgb.exec(color))) {\n            return { r: match[1], g: match[2], b: match[3] };\n        }\n        if ((match = matchers.rgba.exec(color))) {\n            return { r: match[1], g: match[2], b: match[3], a: match[4] };\n        }\n        if ((match = matchers.hsl.exec(color))) {\n            return { h: match[1], s: match[2], l: match[3] };\n        }\n        if ((match = matchers.hsla.exec(color))) {\n            return { h: match[1], s: match[2], l: match[3], a: match[4] };\n        }\n        if ((match = matchers.hsv.exec(color))) {\n            return { h: match[1], s: match[2], v: match[3] };\n        }\n        if ((match = matchers.hsva.exec(color))) {\n            return { h: match[1], s: match[2], v: match[3], a: match[4] };\n        }\n        if ((match = matchers.hex8.exec(color))) {\n            return {\n                a: convertHexToDecimal(match[1]),\n                r: parseIntFromHex(match[2]),\n                g: parseIntFromHex(match[3]),\n                b: parseIntFromHex(match[4]),\n                format: named ? 'name' : 'hex8'\n            };\n        }\n        if ((match = matchers.hex6.exec(color))) {\n            return {\n                r: parseIntFromHex(match[1]),\n                g: parseIntFromHex(match[2]),\n                b: parseIntFromHex(match[3]),\n                format: named ? 'name' : 'hex'\n            };\n        }\n        if ((match = matchers.hex3.exec(color))) {\n            return {\n                r: parseIntFromHex(match[1] + '' + match[1]),\n                g: parseIntFromHex(match[2] + '' + match[2]),\n                b: parseIntFromHex(match[3] + '' + match[3]),\n                format: named ? 'name' : 'hex'\n            };\n        }\n\n        return false;\n    }\n\n    window.tinycolor = tinycolor;\n    })();\n\n    $(function () {\n        if ($.fn.spectrum.load) {\n            $.fn.spectrum.processNativeColorInputs();\n        }\n    });\n\n});\n\n(function($, document, window){\n    'use strict';\n\n    function EasyEditor( element, options ){\n        this.elem = element;\n        options = options || {};\n        this.className = options.className || 'easyeditor';\n\n        // 'bold', 'italic', 'link', 'h2', 'h3', 'h4', 'alignleft', 'aligncenter', 'alignright', 'quote', 'code', 'list', 'x', 'source'\n        var defaultButtons = ['bold', 'italic', 'link', 'h2', 'h3', 'h4', 'alignleft', 'aligncenter', 'alignright'];\n        this.buttons = options.buttons || defaultButtons;\n        this.buttonsHtml = options.buttonsHtml || null;\n        this.overwriteButtonSettings = options.overwriteButtonSettings || null;\n        this.css = options.css || null;\n        this.onLoaded = typeof options.onLoaded === 'function' ? options.onLoaded : null;\n        this.randomString = Math.random().toString(36).substring(7);\n        this.theme = options.theme || null;\n        this.dropdown = options.dropdown || {};\n\n        this.attachEvents();\n    }\n\n    // initialize\n    EasyEditor.prototype.attachEvents = function() {\n        this.bootstrap();\n        this.addToolbar();\n        this.handleKeypress();\n        this.handleResizeImage();\n        this.utils();\n\n        if(this.onLoaded !== null) {\n            this.onLoaded.call(this);\n        }\n    };\n\n    // Adding necessary classes and attributes in editor\n    EasyEditor.prototype.bootstrap = function() {\n        var _this = this;\n        var tag = $(_this.elem).prop('tagName').toLowerCase();\n\n        if(tag === 'textarea' || tag === 'input') {\n            var placeholderText = $(_this.elem).attr('placeholder') || '';\n\n            var marginTop = $(_this.elem).css('marginTop') || 0;\n            var marginBottom = $(_this.elem).css('marginBottom') || 0;\n            var style = '';\n            if(marginTop.length > 0 || marginBottom.length > 0) {\n                style = ' style=\"margin-top: ' + marginTop + '; margin-bottom: ' + marginBottom + '\" ';\n            }\n\n            $(_this.elem).after('<div id=\"' + _this.randomString + '-editor\" placeholder=\"' + placeholderText + '\">' + $(_this.elem).val() + '</div>');\n            $(_this.elem).hide().addClass(_this.randomString + '-bind');\n\n            _this.elem = document.getElementById(_this.randomString + '-editor');\n            $(_this.elem).attr('contentEditable', true).addClass(_this.className).wrap('<div class=\"'+ _this.className +'-wrapper\"' + style + '></div>');\n        }\n        else {\n            $(_this.elem).attr('contentEditable', true).addClass(_this.className).wrap('<div class=\"'+ _this.className +'-wrapper\"></div>');\n        }\n\n        this.$wrapperElem = $(_this.elem).parent();\n\n        if(_this.css !== null) {\n            $(_this.elem).css(_this.css);\n        }\n\n        this.containerClass = '.' + _this.className +'-wrapper';\n\n        if(typeof _this.elem === 'string') {\n            _this.elem = $(_this.elem).get(0);\n        }\n\n        if(_this.theme !== null) {\n            $(_this.elem).closest(_this.containerClass).addClass(_this.theme);\n        }\n    };\n\n    // enter and paste key handler\n    EasyEditor.prototype.handleKeypress = function(){\n        var _this = this;\n\n        $(_this.elem).keydown(function(e) {\n            if(e.keyCode === 13 && _this.isSelectionInsideElement('li') === false) {\n                e.preventDefault();\n\n                if(e.shiftKey === true) {\n                    document.execCommand('insertHTML', false, '<br>');\n                }\n                else {\n                    document.execCommand('insertHTML', false, '<br><br>');\n                }\n\n                return false;\n            }\n        });\n\n        _this.elem.addEventListener('paste', function(e) {\n            e.preventDefault();\n            var text = e.clipboardData.getData('text/plain').replace(/\\n/ig, '<br>');\n            document.execCommand('insertHTML', false, text);\n        });\n\n    };\n\n    EasyEditor.prototype.isSelectionInsideElement = function(tagName) {\n        var sel, containerNode;\n        tagName = tagName.toUpperCase();\n        if (window.getSelection) {\n            sel = window.getSelection();\n            if (sel.rangeCount > 0) {\n                containerNode = sel.getRangeAt(0).commonAncestorContainer;\n            }\n        } else if ( (sel = document.selection) && sel.type != \"Control\" ) {\n            containerNode = sel.createRange().parentElement();\n        }\n        while (containerNode) {\n            if (containerNode.nodeType == 1 && containerNode.tagName == tagName) {\n                return true;\n            }\n            containerNode = containerNode.parentNode;\n        }\n        return false;\n    };\n\n    // adding toolbar\n    EasyEditor.prototype.addToolbar = function(){\n        var _this = this;\n\n        $(_this.elem).before('<div class=\"'+ _this.className +'-toolbar\"><ul></ul></div>');\n        this.$toolbarContainer = this.$wrapperElem.find('.' + _this.className +'-toolbar');\n\n        this.populateButtons();\n    };\n\n    // inejct button events\n    EasyEditor.prototype.injectButton = function(settings){\n        var _this = this;\n\n        // overwritting default button settings\n        if(_this.overwriteButtonSettings !== null && _this.overwriteButtonSettings[settings.buttonIdentifier] !== undefined) {\n            var newSettings = $.extend({}, settings, _this.overwriteButtonSettings[settings.buttonIdentifier]);\n            settings = newSettings;\n        }\n\n        // if button html exists overwrite default button html\n        if(_this.buttonsHtml !== null && _this.buttonsHtml[settings.buttonIdentifier] !== undefined) {\n            settings.buttonHtml = _this.buttonsHtml[settings.buttonIdentifier];\n        }\n\n        // if buttonTitle parameter exists\n        var buttonTitle;\n        if(settings.buttonTitle) {\n            buttonTitle = settings.buttonTitle;\n        }\n        else {\n            buttonTitle = settings.buttonIdentifier.replace(/\\W/g, ' ');\n        }\n\n        // adding button html\n        if(settings.buttonHtml) {\n            if(settings.childOf !== undefined) {\n                var $parentContainer = _this.$toolbarContainer.find('.toolbar-' + settings.childOf).parent('li');\n\n                if($parentContainer.find('ul').length === 0) {\n                    $parentContainer.append('<ul></ul>');\n                }\n\n                $parentContainer = $parentContainer.find('ul');\n                $parentContainer.append('<li><button class=\"toolbar-'+ settings.buttonIdentifier +'\" title=\"'+ buttonTitle +'\">'+ settings.buttonHtml +'</button></li>');\n            }\n            else {\n                _this.$toolbarContainer.children('ul').append('<li><button class=\"toolbar-'+ settings.buttonIdentifier +'\" title=\"'+ buttonTitle +'\">'+ settings.buttonHtml +'</button></li>');\n            }\n        }\n\n        // bind click event\n        if(typeof settings.clickHandler === 'function') {\n            $('html').find(_this.elem).closest(_this.containerClass).delegate('.toolbar-'+ settings.buttonIdentifier, 'click', function(event){\n                if(typeof settings.hasChild !== undefined && settings.hasChild === true) {\n                    event.stopPropagation();\n                }\n                else {\n                    event.preventDefault();\n                }\n\n                settings.clickHandler.call(this, this);\n                $(_this.elem).trigger('keyup');\n            });\n        }\n    };\n\n    // open dropdown\n    EasyEditor.prototype.openDropdownOf = function(identifier){\n        var _this = this;\n        $(_this.elem).closest(_this.containerClass).find('.toolbar-' + identifier).parent().children('ul').show();\n    };\n\n    // bidning all buttons\n    EasyEditor.prototype.populateButtons = function(){\n        var _this = this;\n\n        $.each(_this.buttons, function(index, button) {\n            if(typeof _this[button] === 'function'){\n                _this[button]();\n            }\n        });\n\n    };\n\n    // allowing resizing image\n    EasyEditor.prototype.handleResizeImage = function(){\n        var _this = this;\n\n        $('html').delegate(_this.containerClass + ' figure', 'click', function(event) {\n            event.stopPropagation();\n            $(this).addClass('is-resizable');\n        });\n\n        $('html').delegate(_this.containerClass + ' figure.is-resizable', 'mousemove', function(event) {\n            $(this).find('img').css({ 'width' : $(this).width() + 'px' });\n        });\n\n        $(document).click(function() {\n            $(_this.elem).find('figure').removeClass('is-resizable');\n        });\n    };\n\n    // get selection\n    EasyEditor.prototype.getSelection = function(){\n        if (window.getSelection) {\n            var selection = window.getSelection();\n\n            if (selection.rangeCount) {\n                return selection;\n            }\n        }\n\n        return false;\n    };\n\n    // remove formatting\n    EasyEditor.prototype.removeFormatting = function(arg){\n        var _this = this;\n        var inFullArea = arg.inFullArea;\n\n        if(_this.isSelectionOutsideOfEditor() === true) {\n            return false;\n        }\n\n        if(inFullArea === false) {\n            var selection = _this.getSelection();\n            var selectedText = selection.toString();\n\n            if(selection && selectedText.length > 0) {\n\n                var range = selection.getRangeAt(0);\n                var $parent = $(range.commonAncestorContainer.parentNode);\n\n                if($parent.attr('class') === _this.className || $parent.attr('class') === _this.className + '-wrapper') {\n                    var node = document.createElement('span');\n                    $(node).attr('data-value', 'temp').html(selectedText.replace(/\\n/ig, '<br>'));\n                    range.deleteContents();\n                    range.insertNode(node);\n\n                    $('[data-value=\"temp\"]').contents().unwrap();\n                }\n                else {\n\n                    var topMostParent;\n                    var hasParentNode = false;\n                    $.each($parent.parentsUntil(_this.elem), function(index, el) {\n                        topMostParent = el;\n                        hasParentNode = true;\n                    });\n\n                    if(hasParentNode === true) {\n                        $(topMostParent).html($(topMostParent).text().replace(/\\n/ig, '<br>')).contents().unwrap();\n                    }\n                    else {\n                        $parent.contents().unwrap();\n                    }\n\n                }\n\n            }\n        }\n        else {\n            $(_this.elem).html($(_this.elem).text().replace(/\\n/ig, '<br>'));\n        }\n\n        // _this.removeEmptyTags();\n    };\n\n    // removing empty tags\n    EasyEditor.prototype.removeEmptyTags = function(){\n        var _this = this;\n        $(_this.elem).html( $(_this.elem).html().replace(/(<(?!\\/)[^>]+>)+(<\\/[^>]+>)+/, '') );\n    };\n\n    // remove block elemenet from selection\n    EasyEditor.prototype.removeBlockElementFromSelection = function(selection, removeBr){\n        var _this = this;\n        var result;\n\n        removeBr = removeBr === undefined ? false : removeBr;\n        var removeBrNode = '';\n        if(removeBr === true) {\n            removeBrNode = ', br';\n        }\n\n        var range = selection.getRangeAt(0);\n        var selectedHtml = range.cloneContents();\n        var temp = document.createElement('temp');\n        $(temp).html(selectedHtml);\n        $(temp).find('h1, h2, h3, h4, h5, h6, p, div' + removeBrNode).each(function() { $(this).replaceWith(this.childNodes); });\n        result = $(temp).html();\n\n        return result;\n    };\n\n    // wrap selction with a tag\n    EasyEditor.prototype.wrapSelectionWithNodeName = function(arg){\n        var _this = this;\n        if(_this.isSelectionOutsideOfEditor() === true) {\n            return false;\n        }\n\n        var node = {\n            name: 'span',\n            blockElement: false,\n            style: null,\n            class: null,\n            attribute: null,\n            keepHtml: false\n        };\n\n        if(typeof arg === 'string') {\n            node.name = arg;\n        }\n        else {\n            node.name = arg.nodeName || node.name;\n            node.blockElement = arg.blockElement || node.blockElement;\n            node.style = arg.style || node.style;\n            node.class = arg.class || node.class;\n            node.attribute = arg.attribute || node.attribute;\n            node.keepHtml = arg.keepHtml || node.keepHtml;\n        }\n\n        var selection = _this.getSelection();\n\n        if(selection && selection.toString().length > 0 && selection.rangeCount) {\n            // checking if already wrapped\n            var isWrapped = _this.isAlreadyWrapped(selection, node);\n\n            // wrap node\n            var range = selection.getRangeAt(0).cloneRange();\n            var tag = document.createElement(node.name);\n\n                // adding necessary attribute to tag\n                if(node.style !== null || node.class !== null || node.attribute !== null) {\n                    tag = _this.addAttribute(tag, node);\n                }\n\n            // if selection contains html, surround contents has some problem with pre html tag and raw text selection\n            if(_this.selectionContainsHtml(range)) {\n                range = selection.getRangeAt(0);\n\n                if(node.keepHtml === true) {\n                    var clonedSelection = range.cloneContents();\n                    var div = document.createElement('div');\n                    div.appendChild(clonedSelection);\n                    $(tag).html(div.innerHTML);\n                }\n                else {\n                    tag.textContent = selection.toString();\n                }\n\n                range.deleteContents();\n                range.insertNode(tag);\n\n                if(range.commonAncestorContainer.localName === node.name) {\n                    $(range.commonAncestorContainer).contents().unwrap();\n                    _this.removeEmptyTags();\n                }\n            }\n            else {\n                range.surroundContents(tag);\n                selection.removeAllRanges();\n                selection.addRange(range);\n            }\n\n            if(isWrapped === true) {\n                _this.removeWrappedDuplicateTag(tag);\n            }\n\n            _this.removeEmptyTags();\n            selection.removeAllRanges();\n        }\n    };\n\n    // wrap selection with unordered list\n    EasyEditor.prototype.wrapSelectionWithList = function(tagname){\n        var _this = this;\n        tagname = tagname || 'ul';\n\n        // preventing outside selection\n        if(_this.isSelectionOutsideOfEditor() === true) {\n            return false;\n        }\n\n        // if text selected\n        var selection = _this.getSelection();\n        if(selection && selection.toString().length > 0 && selection.rangeCount) {\n            var selectedHtml = _this.removeBlockElementFromSelection(selection, true);\n            var listArray = selectedHtml.split('\\n').filter(function(v){return v!=='';});\n            var wrappedListHtml = $.map(listArray, function(item) {\n                return '<li>' + $.trim(item) + '</li>';\n            });\n\n            var node = document.createElement(tagname);\n            $(node).html(wrappedListHtml);\n\n            var range = selection.getRangeAt(0);\n            range.deleteContents();\n            range.insertNode(node);\n\n            selection.removeAllRanges();\n        }\n\n    };\n\n    // if selection contains html tag, surround content fails if selection contains html\n    EasyEditor.prototype.selectionContainsHtml = function(range){\n        var _this = this;\n        if(range.startContainer.parentNode.className === _this.className + '-wrapper') return false;\n        else return true;\n    };\n\n    // if already wrapped with same tag\n    EasyEditor.prototype.isAlreadyWrapped = function(selection, node){\n        var _this = this;\n        var range = selection.getRangeAt(0);\n        var el = $(range.commonAncestorContainer);\n        var result = false;\n\n        if( el.parent().prop('tagName').toLowerCase() === node.name && el.parent().hasClass(_this.className) === false ) {\n            result = true;\n        }\n        else if(node.blockElement === true) {\n            $.each(el.parentsUntil(_this.elem), function(index, el) {\n                var tag = el.tagName.toLowerCase();\n                if( $.inArray(tag, ['h1', 'h2', 'h3', 'h4', 'h5', 'h6']) !== -1 ) {\n                    result = true;\n                }\n            });\n        }\n        else {\n            $.each(el.parentsUntil(_this.elem), function(index, el) {\n                var tag = el.tagName.toLowerCase();\n                if( tag === node.name ) {\n                    result = true;\n                }\n            });\n        }\n\n        return result;\n    };\n\n    // remove wrap if already wrapped with same tag\n    EasyEditor.prototype.removeWrappedDuplicateTag = function(tag){\n        var _this = this;\n        var tagName = tag.tagName;\n\n        $(tag).unwrap();\n\n        if($(tag).prop('tagName') === tagName && $(tag).parent().hasClass(_this.className) === false && $(tag).parent().hasClass(_this.className + '-wrapper')) {\n            $(tag).unwrap();\n        }\n    };\n\n    // adding attribute in tag\n    EasyEditor.prototype.addAttribute = function(tag, node){\n        if(node.style !== null) {\n            $(tag).attr('style', node.style);\n        }\n\n        if(node.class !== null) {\n            $(tag).addClass(node.class);\n        }\n\n        if(node.attribute !== null) {\n            if($.isArray(node.attribute) === true) {\n                $(tag).attr(node.attribute[0], node.attribute[1]);\n            }\n            else {\n                $(tag).attr(node.attribute);\n            }\n        }\n\n        return tag;\n    };\n\n    // insert a node into cursor point in editor\n    EasyEditor.prototype.insertAtCaret = function(node){\n        var _this = this;\n        if(_this.isSelectionOutsideOfEditor() === true) {\n            return false;\n        }\n\n        if(_this.getSelection()) {\n            var range = _this.getSelection().getRangeAt(0);\n            range.insertNode(node);\n        }\n        else {\n            $(node).appendTo(_this.elem);\n        }\n    };\n\n    // checking if selection outside of editor or not\n    EasyEditor.prototype.isSelectionOutsideOfEditor = function(){\n        return !this.elementContainsSelection(this.elem);\n    };\n\n    // node contains in containers or not\n    EasyEditor.prototype.isOrContains = function(node, container) {\n        while (node) {\n            if (node === container) {\n                return true;\n            }\n            node = node.parentNode;\n        }\n        return false;\n    };\n\n    // selected text is inside container\n    EasyEditor.prototype.elementContainsSelection = function(el) {\n        var _this = this;\n        var sel;\n        if (window.getSelection) {\n            sel = window.getSelection();\n            if (sel.rangeCount > 0) {\n                for (var i = 0; i < sel.rangeCount; ++i) {\n                    if (!_this.isOrContains(sel.getRangeAt(i).commonAncestorContainer, el)) {\n                        return false;\n                    }\n                }\n                return true;\n            }\n        } else if ( (sel = document.selection) && sel.type !== \"Control\") {\n            return _this.isOrContains(sel.createRange().parentElement(), el);\n        }\n        return false;\n    };\n\n    // insert html chunk into editor's temp tag\n    EasyEditor.prototype.insertHtml = function(html){\n        var _this = this;\n        $(_this.elem).find('temp').html(html);\n    };\n\n    // utility of editor\n    EasyEditor.prototype.utils = function(){\n        var _this = this;\n\n        $('html').delegate('.'+ _this.className +'-modal-close', 'click', function(event) {\n            event.preventDefault();\n            _this.closeModal('#' + $(this).closest('.'+ _this.className + '-modal').attr('id'));\n        });\n\n        if( $('.' + _this.randomString + '-bind').length > 0 ) {\n            var bindData;\n            $('html').delegate(_this.elem, 'click keyup', function() {\n                var el = _this.elem;\n                clearTimeout(bindData);\n                bindData = setTimeout(function(){ $('.' + _this.randomString + '-bind').html( $(el).html() ); }, 250);\n            });\n        }\n\n        $(document).click(function(event) {\n            $('.' + _this.className).closest('.' + _this.className + '-wrapper').find('.' + _this.className + '-toolbar > ul > li > ul').hide();\n        });\n    };\n\n    // youtube video id from url\n    EasyEditor.prototype.getYoutubeVideoIdFromUrl = function(url){\n        if(url.length === 0) return false;\n        var videoId = '';\n        url = url.replace(/(>|<)/gi,'').split(/(vi\\/|v=|\\/v\\/|youtu\\.be\\/|\\/embed\\/)/);\n        if(url[2] !== undefined) {\n            videoId = url[2].split(/[^0-9a-z_\\-]/i);\n            videoId = videoId[0];\n        }\n        else {\n            videoId = url;\n        }\n        return videoId;\n    };\n\n    // opening modal window\n    EasyEditor.prototype.openModal = function(selector){\n        var temp = document.createElement('temp');\n        temp.textContent = '.';\n        this.insertAtCaret(temp);\n\n        $(selector).removeClass('is-hidden');\n    };\n\n    // closing modal window\n    EasyEditor.prototype.closeModal = function(selector){\n        var _this = this;\n\n        $(selector).addClass('is-hidden').find('input').val('');\n        $(selector).find('.' + _this.className + '-modal-content-body-loader').css('width', '0');\n        var $temp = $(this.elem).find('temp');\n\n        if($temp.html() === '.') {\n            $temp.remove();\n        }\n        else {\n            $temp.contents().unwrap();\n        }\n\n        $(this.elem).focus();\n    };\n\n    EasyEditor.prototype.bold = function(){\n        var _this = this;\n        var settings = {\n            buttonIdentifier: 'bold',\n            buttonHtml: 'B',\n            clickHandler: function(){\n                _this.wrapSelectionWithNodeName({ nodeName: 'strong', keepHtml: true });\n            }\n        };\n\n        _this.injectButton(settings);\n    };\n\n    EasyEditor.prototype.italic = function(){\n        var _this = this;\n        var settings = {\n            buttonIdentifier: 'italic',\n            buttonHtml: 'I',\n            clickHandler: function(){\n                _this.wrapSelectionWithNodeName({ nodeName: 'em', keepHtml: true });\n            }\n        };\n\n        _this.injectButton(settings);\n    };\n\n    EasyEditor.prototype.h2 = function(){\n        var _this = this;\n        var settings = {\n            buttonIdentifier: 'header-2',\n            buttonHtml: 'H2',\n            clickHandler: function(){\n                _this.wrapSelectionWithNodeName({ nodeName: 'h2', blockElement: true });\n            }\n        };\n\n        _this.injectButton(settings);\n    };\n\n    EasyEditor.prototype.h3 = function(){\n        var _this = this;\n        var settings = {\n            buttonIdentifier: 'header-3',\n            buttonHtml: 'H3',\n            clickHandler: function(){\n                _this.wrapSelectionWithNodeName({ nodeName: 'h3', blockElement: true });\n            }\n        };\n\n        _this.injectButton(settings);\n    };\n\n    EasyEditor.prototype.h4 = function(){\n        var _this = this;\n        var settings = {\n            buttonIdentifier: 'header-4',\n            buttonHtml: 'H4',\n            clickHandler: function(){\n                _this.wrapSelectionWithNodeName({ nodeName: 'h4', blockElement: true });\n            }\n        };\n\n        _this.injectButton(settings);\n    };\n\n    EasyEditor.prototype.x = function(){\n        var _this = this;\n        var settings = {\n            buttonIdentifier: 'remove-formatting',\n            buttonHtml: 'x',\n            clickHandler: function(){\n                _this.removeFormatting({ inFullArea: false });\n            }\n        };\n\n        _this.injectButton(settings);\n    };\n\n    EasyEditor.prototype.alignleft = function(){\n        var _this = this;\n        var settings = {\n            buttonIdentifier: 'align-left',\n            buttonHtml: 'Align left',\n            clickHandler: function(){\n                _this.wrapSelectionWithNodeName({ nodeName: 'p', style: 'text-align: left', class: 'text-left', keepHtml: true });\n            }\n        };\n\n        _this.injectButton(settings);\n    };\n\n    EasyEditor.prototype.aligncenter = function(){\n        var _this = this;\n        var settings = {\n            buttonIdentifier: 'align-center',\n            buttonHtml: 'Align center',\n            clickHandler: function(){\n                _this.wrapSelectionWithNodeName({ nodeName: 'p', style: 'text-align: center', class: 'text-center', keepHtml: true });\n            }\n        };\n\n        _this.injectButton(settings);\n    };\n\n    EasyEditor.prototype.alignright = function(){\n        var _this = this;\n        var settings = {\n            buttonIdentifier: 'align-right',\n            buttonHtml: 'Align right',\n            clickHandler: function(){\n                _this.wrapSelectionWithNodeName({ nodeName: 'p', style: 'text-align: right', class: 'text-right', keepHtml: true });\n            }\n        };\n\n        _this.injectButton(settings);\n    };\n\n    EasyEditor.prototype.quote = function(){\n        var _this = this;\n        var settings = {\n            buttonIdentifier: 'quote',\n            buttonHtml: 'Quote',\n            clickHandler: function(){\n                _this.wrapSelectionWithNodeName({ nodeName: 'blockquote' });\n            }\n        };\n\n        _this.injectButton(settings);\n    };\n\n    EasyEditor.prototype.code = function(){\n        var _this = this;\n        var settings = {\n            buttonIdentifier: 'code',\n            buttonHtml: 'Code',\n            clickHandler: function(){\n                _this.wrapSelectionWithNodeName({ nodeName: 'pre' });\n            }\n        };\n\n        _this.injectButton(settings);\n    };\n\n    EasyEditor.prototype.link = function(){\n        var _this = this;\n        var settings = {\n            buttonIdentifier: 'link',\n            buttonHtml: 'Link',\n            clickHandler: function(){\n                _this.wrapSelectionWithNodeName({ nodeName: 'a', attribute: ['href', prompt('Insert link', '')] });\n            }\n        };\n\n        _this.injectButton(settings);\n    };\n\n    EasyEditor.prototype.list = function(){\n        var _this = this;\n        var settings = {\n            buttonIdentifier: 'list',\n            buttonHtml: 'List',\n            clickHandler: function(){\n                _this.wrapSelectionWithList();\n            }\n        };\n\n        _this.injectButton(settings);\n    };\n\n    EasyEditor.prototype.source = function(){\n        var _this = this;\n        var settings = {\n            buttonIdentifier: 'source',\n            buttonHtml: 'Source',\n            clickHandler: function(thisButton){\n                var $elemContainer = $(thisButton).closest('.' + _this.className + '-wrapper');\n                var $elem = $elemContainer.find('.' + _this.className);\n                var $tempTextarea;\n\n                if($(thisButton).hasClass('is-view-source-mode')) {\n                    $tempTextarea = $('body > textarea.' + _this.className + '-temp');\n                    $elem.css('visibility', 'visible');\n                    $tempTextarea.remove();\n                    $(thisButton).removeClass('is-view-source-mode');\n                }\n                else {\n                    $('body').append('<textarea class=\"' + _this.className + '-temp\" style=\"position: absolute; margin: 0;\"></textarea>');\n                    $tempTextarea = $('body > textarea.' + _this.className + '-temp');\n\n                    $tempTextarea.css({\n                        'top' : $elem.offset().top,\n                        'left' : $elem.offset().left,\n                        'width' : $elem.outerWidth(),\n                        'height' : $elem.outerHeight()\n                    }).html( $elem.html() );\n\n                    if( $elem.css('border') !== undefined ) {\n                        $tempTextarea.css('border', $elem.css('border'));\n                    }\n\n                    $elem.css('visibility', 'hidden');\n                    $(thisButton).addClass('is-view-source-mode');\n\n                    $tempTextarea.on('keyup click change keypress', function() {\n                        $elem.html( $(this).val() );\n                    });\n                }\n            }\n        };\n\n        _this.injectButton(settings);\n    };\n\n    window.EasyEditor = EasyEditor;\n\n    $.fn.easyEditor = function ( options ) {\n        return this.each(function () {\n            if (!$.data(this, 'plugin_easyEditor')) {\n                $.data(this, 'plugin_easyEditor',\n                new EasyEditor( this, options ));\n            }\n        });\n    };\n\n})(jQuery, document, window);\n\n(function($) {\n    $.fn.extend( {\n        limiter: function(limit, elem) {\n            $(this).on(\"keyup focus\", function() {\n                setCount(this, elem);\n            });\n            function setCount(src, elem) {\n                var chars = src.value.length;\n                if (chars > limit) {\n                    src.value = src.value.substr(0, limit);\n                    chars = limit;\n                }\n                elem.html( limit - chars +' characters remaining');\n            }\n            setCount($(this)[0], elem);\n        }\n    });\n})(jQuery);\n\n\n"],"sourceRoot":"/source/"}