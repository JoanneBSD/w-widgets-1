{"version":3,"sources":["main.js"],"names":["$","s","signupInfo","wrapperHTML","signupFields","Widgets","settings","formURL","fieldsURL","init","bindUIActions","validate","el","flagValidation","msgValidation","remove","data","indexOf","val","isNumeric","after","personaliseForm","hide","on","show","easyEditor","buttons","elem","length","limiter","thankyouCode","shareCode","formpostCode","shareText","encodeURIComponent","trim","is","jQuery","each","i","txt","parent","find","text","addDB","embedJS","embedHTML","thankyouURL","ajax","url","type","JS","HTML","signupID","signup_form_id","success","token","attr","buildEmbedCode","signup_form_name","signup_form_slug","currForm","html","split","optinTxt","email_opt_in_label","replace","tyCode","editForm","event","preventDefault","fadeIn","fetchForm","formValidates","resetBtn","method","formID","branch","JSON","parse","arr","makeArray","signup_form","populateFields","fetchFields","error","form_public_title","form_html_top","submit_button_label","thank_you_html","fieldType","k","fieldName","validationTxt","format","label","is_required","optionFields","extra_def","options","key","value","radioArr","checkLabel","desc","file_size","buildFields","extraClasses","is_custom_field","description","toLowerCase","id","is_shown","hasClass","removeClass","css","cursor","addClass","signup_form_field","customArr","filter","ar","fieldSort","sortable","revert","start","disableSelection","droppable","greedy","tolerance","copyClipboard","textbox","aux","document","createElement","setAttribute","body","appendChild","select","execCommand","removeChild","toggleBtn","btn","formListener","before","tabs","disabled","animate","scrollTop","blur","keydown","e","copyTextarea","setTimeout","customiseFormSetup","CKEDITOR","next"],"mappings":"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","file":"main.js","sourcesContent":["/*global jQuery:false */\n\n/* TO DO\n custom fields not coming through\n address should be addr1 (?)\n */\n(function ($) {\n    'use strict';\n\n    var s,\n        signupInfo,\n        wrapperHTML = '',\n        signupFields,\n        Widgets = {\n        settings: {\n            formURL: './server/form.php',\n            fieldsURL: './server/fields.php'\n        },\n\n        init: function () {\n            s = this.settings;\n            Widgets.bindUIActions();\n        },\n        validate: function (el) {\n\n            var flagValidation = 0;\n            var msgValidation = '';\n            //check for presence\n            $('.form-error').remove();\n            if (el.data('validate').indexOf('presence') >= 0) {\n                if (!el.val()) {\n                    flagValidation = 1;\n                    //put in template\n                    msgValidation = '<p class=\"error\">' + el.data('validatemsg') + '</p>';\n                }\n            }\n\n            if (el.data('validate').indexOf('numeric') >= 0) {\n                if (!$.isNumeric(el.val())) {\n                    flagValidation = 1;\n                    //put in template\n                    msgValidation = '<p class=\"error form-error\">' + el.data('validatemsg') + '</p>';\n                }\n            }\n\n            if (flagValidation > 0) {\n                el.after(msgValidation);\n                return false;\n            } else {\n                return true;\n            }\n        },\n        personaliseForm: function () {\n\n            $('#personaliseForm .hide-row').hide();\n\n            //if thankyou option selected then show extra options\n            $('#destination').on('change', function () {\n                if ($(this).val() === 'content') {\n                    $('.hide-row').show();\n                    $('.thankyouurl-row').hide();\n                    //rte init\n\n                    $('#thankyouContent').easyEditor({\n                        buttons: ['bold', 'italic', 'link', 'h3', 'h4', 'h5', 'alignleft', 'aligncenter', 'alignright', 'list', 'x', 'source']\n                    });\n\n                    var elem = $('.countdown');\n                    if ($('.message').length > 0) {\n                        $('.message').limiter(140, elem);\n                    }\n                } else {\n                    $('.thankyouurl-row').show();\n                    $('.hide-row').hide();\n                }\n            });\n        },\n        thankyouCode: function () {\n\n            var shareCode = '';\n            var formpostCode = '';\n\n            var shareText = encodeURIComponent($('#shareTweet').val().trim());\n\n            var thankyouCode = '<div class=\"thankyou-content\">' + $('#thankyouContent').val() + '</div>';\n\n            if ($('#formEntry').is(':checked')) {\n                formpostCode = '<div class=\"form-post\"><p>Thank you for submitting the following information:</p>';\n                jQuery('#speakout_form input').each(function (i, data) {\n                    var txt = jQuery(data).parent().parent().find('label').text();\n                    formpostCode += '<p>' + txt + ' : ' + jQuery(data).val() + '</p>';\n                });\n                formpostCode += '</div>';\n            }\n\n            if ($('#shareImg').val().length > 0) {\n                shareCode = '<div class=\"share-content\"><img src=\"' + $('#shareImg').val() + '\" alt=\"share this page\" /><div class=\"social-share\"><a href=\"https://www.facebook.com/sharer/sharer.php?u=' + $('#sharePage').val() + '\" class=\"fb-btn\" target=\"_blank\">Share on Facebook</a><a href=\"https://twitter.com/home?status=' + shareText + '\" class=\"tw-btn\"  target=\"_blank\">Share on Twitter</a></div></div>';\n            }\n\n            return thankyouCode + formpostCode + shareCode;\n        },\n        addDB: function (embedJS, embedHTML, thankyouURL) {\n            $.ajax({\n                url: './server/connect.php',\n                type: 'post',\n                data: { type: 'insert', JS: embedJS, HTML: embedHTML, thankyouURL: thankyouURL, signupID: signupInfo.signup_form_id, signupInfo: signupInfo },\n                success: function (data) {\n                    var token = data;\n\n                    jQuery('.wb--btn__submit__widget').attr('href', 'preview.html?tkn=' + token);\n                    jQuery('#generateForm #embedScript').val('<script type=\"text/javascript\" id=\"widget-generator\">   var link = document.createElement( \"link\" );     link.href = \"//widget.www.test.which-testing.co.uk/styles/bsd-widget.css\";      link.type = \"text/css\";      link.rel = \"stylesheet\";      link.media = \"screen,print\";      document.getElementsByTagName( \"head\" )[0].appendChild( link );   (function() {        function async_load(){          var s = document.createElement(\"script\");          s.type = \"text/javascript\";          s.async = true;          var theUrl = \"https://widget.www.test.which-testing.co.uk/scripts/bsd-widget.js\";          s.src = theUrl;          var embedder = document.getElementById(\"w-embed\");   var token = \"' + token + '\"; embedder.setAttribute(\"data-token\", token);   embedder.parentNode.insertBefore(s, embedder);        }        if (window.attachEvent)          window.attachEvent(\"onload\", async_load);        else          window.addEventListener(\"load\", async_load, false);      })();    </script><div id=\"w-embed\"></div>');\n                }\n            });\n        },\n        buildEmbedCode: function () {\n\n            //build the js\n            //will include signup API call\n            var embedJS = '';\n\n            embedJS += 'jQuery(document).ready(function() { jQuery(\".thankyou-wrapper\").hide();';\n\n            embedJS += 'jQuery(\".apiform\").bsdSignup({no_redirect:true}).on(\"bsd-success\",function(e, response){ e.preventDefault();';\n\n            //if redirect to URL build script to redirect window to set URL\n            if ($('#formEntry').is(':checked')) {\n                embedJS += ' var postedHTML = \"\"; jQuery(\".apiform .form-row\").not(\".row-hidden\").each(function(index) { if($(this).find(\".form-radio--label\").length > 0) {      var postedLabel = $(this).find(\".form-radio--label\").text();  }    else if ($(this).find(\"label\").length > 0) {      var postedLabel = $(this).find(\"label\").text(); } else { var postedLabel = \"\"; }  var postedInput = $(this).find(\":input\").val(); if(postedInput.length > 0 && postedLabel.length > 0) {  postedHTML += postedLabel + \" : \" + postedInput + \"<br />\";    }  });';\n                embedJS += ' jQuery(\".thankyou-content\").append(\\'<p class=\"wg-form-posted\">\\' + postedHTML + \\'</p>\\');';\n            }\n            if ($('#destination').val() === 'url') {\n                embedJS += ' window.location.replace(\"' + jQuery('#thankyouURL').val() + '\"); ';\n            } else {\n                //if show thankyou content, hide the form on success and show thank you content\n                embedJS += ' jQuery(\".apiform\").hide(); jQuery(\".thankyou-wrapper\").show(); ';\n            }\n            embedJS += '});});';\n\n            //build the html\n\n\n            var embedHTML = '<div class=\"campaign-header\"><div class=\"wWrapper\"><h2>' + jQuery('#form_title').val() + '</h2>';\n\n            if (jQuery('#form_intro').val().length > 0 || jQuery('#form_signatures').is(':checked')) {\n\n                embedHTML += '<div class=\"bsd-embed-intro \">';\n\n                if (jQuery('#form_intro').val().length > 0) {\n                    embedHTML += '' + jQuery('#form_intro').val() + '<br />';\n                }\n\n                if (jQuery('#form_signatures').is(':checked')) {\n                    if (jQuery('#target_signatures').val().length > 0) {\n                        embedHTML += '<div class=\"supporter_count\"><span class=\"figure group\" style=\"display: block;\" id=\"signup_counter\">0</span><div class=\"progress-bar\" data-target=\"' + jQuery('#target_signatures').val() + '\" style=\"display: block;\"><div class=\"progress\" style=\"width: 0%;\"></div></div> Petition Signatures</div>';\n                    } else {\n                        embedHTML += '<div class=\"supporter_count\"><span class=\"figure group\" id=\"signup_counter\">0</span> Petition Signatures</div>';\n                    }\n                }\n\n                if (jQuery('#form_cta').val().length > 0) {\n                    embedHTML += '<div class=\"btn btn-primary expand-petition\"><span>' + jQuery('#form_cta').val() + '</span></div>';\n                } else {\n\n                    embedHTML += '<div class=\"btn btn-primary expand-petition\"><span>Sign the petition</span></div>';\n                }\n                embedHTML += '</div></div>';\n\n                embedHTML += '<div class=\"bsd-embed-form widgetainer widget-styled\">';\n            } else {\n\n                embedHTML += '<div class=\"bsd-embed-form widgetainer widget-styled expanded-form\">';\n            }\n\n            embedHTML += '<form name=\"' + signupInfo.signup_form_name + '\" class=\"apiform\" action=\"' + $('#branch').val() + '/page/s/' + signupInfo.signup_form_slug + '\" method=\"post\" id=\"' + signupInfo.signup_form_id + '\">';\n            embedHTML += '<input type=\"hidden\" name=\"signup_form_id\" value=\"' + signupInfo.signup_form_id + '\" />';\n            embedHTML += '<input type=\"hidden\" name=\"source\" value=\"\" id=\"bsd_widget_source\" />';\n\n            var currForm = $('#customiseForm form').html().split('<div class=\"form-row--submit\">');\n            var optinTxt = '<div class=\"form-row\"><input id=\"email_opt_in\" name=\"email_opt_in\" type=\"checkbox\" value=\"1\" ><label for=\"email_opt_in\">' + signupInfo.email_opt_in_label + '</label></div><div class=\"form-row--submit\">';\n\n            embedHTML += currForm[0];\n            embedHTML += optinTxt;\n            embedHTML += currForm[1];\n\n            embedHTML = embedHTML.replace('name=\"address\"', 'name=\"addr1');\n            embedHTML = embedHTML.replace('Personalise form', jQuery('#form_btn').val());\n            embedHTML = embedHTML.replace('requiredplaceholder', 'required aria-required=\"true\"');\n            embedHTML += '</form>';\n            embedHTML += '</div>';\n\n            wrapperHTML += '<div class=\"signup-wrapper\">';\n            //only show logo if it exists\n            //if($('#logo').val().length > 0) {\n            //wrapperHTML += '<div class=\"signup-logo\" style=\"text-align: ' + $('#logoAlignment').val() + ';\"><img src=\"' + $('#logo').val() + '\" alt=\"logo\" /></div>';\n            //}\n\n            wrapperHTML += embedHTML;\n\n            if ($('#destination').val() !== 'url') {\n                var tyCode = Widgets.thankyouCode();\n                wrapperHTML += '<div class=\"thankyou-wrapper\">' + tyCode + '</div>';\n            }\n\n            wrapperHTML += '</div>';\n\n            if ($('#destination').val() === 'url') {\n                var thankyouURL = jQuery('#thankyouURL').val();\n            }\n\n            Widgets.addDB(embedJS, wrapperHTML, thankyouURL);\n\n            embedJS = '';\n            wrapperHTML = '';\n        },\n        editForm: function () {\n\n            //on site load should be hidden\n            $('.e--edit-form').hide();\n\n            $('.e--edit-form').on('click', 'a', function (event) {\n\n                event.preventDefault();\n\n                $('.e--edit-form').hide();\n                $('#tabbedBox').hide();\n                $('#fetchForm').fadeIn();\n            });\n        },\n        fetchForm: function () {\n\n            $('#fetchForm').on('submit', 'form', function (event) {\n                event.preventDefault();\n\n                //remove form missing message\n                $('p.form-missing').remove();\n                //validate input\n                var formValidates = Widgets.validate($('#formID'));\n\n                if (formValidates === false) {\n                    return false;\n                }\n\n                Widgets.resetBtn();\n                $.ajax({\n                    url: s.formURL,\n                    method: 'GET',\n                    data: { formID: $('#formID').val(), branch: $('#branch').val() },\n                    success: function (data) {\n                        data = JSON.parse(data);\n                        var arr = $.makeArray(data);\n                        signupInfo = arr[0].signup_form;\n                        Widgets.populateFields();\n                        Widgets.fetchFields();\n                    },\n                    error: function () {\n                        //Something went so wrong\n                        $('#formID').after('<p class=\"error form-missing\">I am sorry this signup form does not exist within this branch in the Blue State Digital Tools.</p>');\n                        //reset button\n                        Widgets.resetBtn();\n                        return false;\n                    }\n                });\n            });\n        },\n        populateFields: function () {\n            jQuery('#form_title').val(signupInfo.form_public_title);\n            if (typeof signupInfo.form_html_top === 'string') {\n                jQuery('#form_intro').val(signupInfo.form_html_top);\n            }\n            if (typeof signupInfo.submit_button_label === 'string') {\n                jQuery('#form_btn').val(signupInfo.submit_button_label);\n            }\n            jQuery('#thankyouContent').val(signupInfo.thank_you_html);\n        },\n        fieldType: function (k, fieldName, fieldType, validationTxt) {\n\n            switch (k.format) {\n                case '1':\n                    //if input type text\n                    signupFields += '<label for=\"' + fieldName + '\">' + k.label;\n                    if (k.is_required === 1 || k.is_required === '1') {\n                        signupFields += '*';\n                    }\n                    signupFields += '</label>';\n                    signupFields += '<input class=\"w--input-field\" type=\"' + fieldType + '\" name=\"' + fieldName + '\" ' + validationTxt + ' placeholder=\"' + k.label + '\" id=\"' + fieldName + '\" />';\n                    break;\n                case '2':\n                    //if textarea\n                    signupFields += '<label for=\"' + fieldName + '\">' + k.label;\n                    if (k.is_required === 1 || k.is_required === '1') {\n                        signupFields += '*';\n                    }\n                    signupFields += '</label>';\n                    signupFields += '<textarea class=\"w--input-field\" ' + validationTxt + ' name=\"' + fieldName + '\"></textarea>';\n                    break;\n                case '3':\n                    //selectbox\n                    if (k.label === 'Country') {\n                        signupFields += '<label class=\"visible-label visible-label--select\" for=\"country\">Country';\n                        if (k.is_required === 1 || k.is_required === '1') {\n                            signupFields += '*';\n                        }\n                        signupFields += '</label>';\n\n                        signupFields += '<select  class=\"w--input-field\" id=\"country\" name=\"country\"><option value=\"\"></option><option value=\"AF\">Afghanistan</option><option value=\"AL\">Albania</option><option value=\"DZ\">Algeria</option><option value=\"AS\">American Samoa</option><option value=\"AD\">Andorra</option><option value=\"AO\">Angola</option><option value=\"AI\">Anguilla</option><option value=\"AG\">Antigua and Barbuda</option><option value=\"AR\">Argentina</option><option value=\"AM\">Armenia</option><option value=\"AW\">Aruba</option><option value=\"AU\">Australia</option><option value=\"AT\">Austria</option><option value=\"AZ\">Azerbaijan</option><option value=\"BS\">Bahamas</option><option value=\"BH\">Bahrain</option><option value=\"BD\">Bangladesh</option><option value=\"BB\">Barbados</option><option value=\"BY\">Belarus</option><option value=\"BE\">Belgium</option><option value=\"BZ\">Belize</option><option value=\"BJ\">Benin</option><option value=\"BM\">Bermuda</option><option value=\"BT\">Bhutan</option><option value=\"BO\">Bolivia</option><option value=\"BA\">Bosnia and Herzegovina</option><option value=\"BW\">Botswana</option><option value=\"BR\">Brazil</option><option value=\"VG\">British Virgin Islands</option><option value=\"IO\">British Indian Ocean Territory</option><option value=\"BN\">Brunei</option><option value=\"BG\">Bulgaria</option><option value=\"BF\">Burkina Faso</option><option value=\"BI\">Burundi</option><option value=\"KH\">Cambodia</option><option value=\"CM\">Cameroon</option><option value=\"CA\">Canada</option><option value=\"CV\">Cape Verde</option><option value=\"KY\">Cayman Islands</option><option value=\"CF\">Central African Republic</option><option value=\"TD\">Chad</option><option value=\"CL\">Chile</option><option value=\"CN\">China</option><option value=\"CX\">Christmas Island</option><option value=\"CO\">Colombia</option><option value=\"KM\">Comoros Islands</option><option value=\"CD\">Congo, Democratic Republic of the</option><option value=\"CG\">Congo, Republic of the</option><option value=\"CK\">Cook Islands</option><option value=\"CR\">Costa Rica</option><option value=\"CI\">Cote D\\'ivoire</option><option value=\"HR\">Croatia</option><option value=\"CU\">Cuba</option><option value=\"CY\">Cyprus</option><option value=\"CZ\">Czech Republic</option><option value=\"DK\">Denmark</option><option value=\"DJ\">Djibouti</option><option value=\"DM\">Dominica</option><option value=\"DO\">Dominican Republic</option><option value=\"TP\">East Timor</option><option value=\"EC\">Ecuador</option><option value=\"EG\">Egypt</option><option value=\"SV\">El Salvador</option><option value=\"GQ\">Equatorial Guinea</option><option value=\"ER\">Eritrea</option><option value=\"EE\">Estonia</option><option value=\"ET\">Ethiopia</option><option value=\"FK\">Falkland Islands (Malvinas)</option><option value=\"FO\">Faroe Islands</option><option value=\"FJ\">Fiji</option><option value=\"FI\">Finland</option><option value=\"FR\">France</option><option value=\"GF\">French Guiana</option><option value=\"PF\">French Polynesia</option><option value=\"TF\">French Southern Territories</option><option value=\"GA\">Gabon</option><option value=\"GM\">Gambia</option><option value=\"GE\">Georgia</option><option value=\"DE\">Germany</option><option value=\"GH\">Ghana</option><option value=\"GI\">Gibraltar</option><option value=\"GR\">Greece</option><option value=\"GL\">Greenland</option><option value=\"GD\">Grenada</option><option value=\"GP\">Guadeloupe</option><option value=\"GU\">Guam</option><option value=\"GT\">Guatemala</option><option value=\"GN\">Guinea</option><option value=\"GW\">Guinea-Bissau</option><option value=\"GY\">Guyana</option><option value=\"HT\">Haiti</option><option value=\"VA\">Holy See (Vatican City State)</option><option value=\"HN\">Honduras</option><option value=\"HK\">Hong Kong</option><option value=\"HU\">Hungary</option><option value=\"IS\">Iceland</option><option value=\"IN\">India</option><option value=\"ID\">Indonesia</option><option value=\"IR\">Iran</option><option value=\"IQ\">Iraq</option><option value=\"IE\">Republic of Ireland</option><option value=\"IL\">Israel</option><option value=\"IT\">Italy</option><option value=\"JM\">Jamaica</option><option value=\"JP\">Japan</option><option value=\"JO\">Jordan</option><option value=\"KZ\">Kazakhstan</option><option value=\"KE\">Kenya</option><option value=\"KI\">Kiribati</option><option value=\"KR\">South Korea</option><option value=\"XK\">Kosovo</option><option value=\"KW\">Kuwait</option><option value=\"KG\">Kyrgyzstan</option><option value=\"LA\">Laos</option><option value=\"LV\">Latvia</option><option value=\"LB\">Lebanon</option><option value=\"LS\">Lesotho</option><option value=\"LR\">Liberia</option><option value=\"LY\">Libya</option><option value=\"LI\">Liechtenstein</option><option value=\"LT\">Lithuania</option><option value=\"LU\">Luxembourg</option><option value=\"MO\">Macau</option><option value=\"MK\">Macedonia</option><option value=\"MG\">Madagascar</option><option value=\"MW\">Malawi</option><option value=\"MY\">Malaysia</option><option value=\"MV\">Maldives</option><option value=\"ML\">Mali</option><option value=\"MT\">Malta</option><option value=\"MH\">Marshall Islands</option><option value=\"MQ\">Martinique</option><option value=\"MR\">Mauritania</option><option value=\"MU\">Mauritius</option><option value=\"YT\">Mayotte</option><option value=\"MX\">Mexico</option><option value=\"FM\">Micronesia</option><option value=\"MD\">Moldova, Republic of</option><option value=\"MC\">Monaco</option><option value=\"MN\">Mongolia</option><option value=\"ME\">Montenegro</option><option value=\"MS\">Montserrat</option><option value=\"MA\">Morocco</option><option value=\"MZ\">Mozambique</option><option value=\"MM\">Myanmar</option><option value=\"NA\">Namibia</option><option value=\"NR\">Nauru</option><option value=\"NP\">Nepal</option><option value=\"NL\">Netherlands</option><option value=\"AN\">Netherlands Antilles</option><option value=\"NC\">New Caledonia</option><option value=\"NZ\">New Zealand</option><option value=\"NI\">Nicaragua</option><option value=\"NE\">Niger</option><option value=\"NG\">Nigeria</option><option value=\"NU\">Niue</option><option value=\"NF\">Norfolk Island</option><option value=\"MP\">Northern Mariana Islands</option><option value=\"NO\">Norway</option><option value=\"OM\">Oman</option><option value=\"PK\">Pakistan</option><option value=\"PW\">Palau</option><option value=\"PA\">Panama</option><option value=\"PG\">Papua New Guinea</option><option value=\"PY\">Paraguay</option><option value=\"PE\">Peru</option><option value=\"PH\">Philippines</option><option value=\"PN\">Pitcairn Island</option><option value=\"PL\">Poland</option><option value=\"PT\">Portugal</option><option value=\"PR\">Puerto Rico</option><option value=\"QA\">Qatar</option><option value=\"RE\">Reunion</option><option value=\"RO\">Romania</option><option value=\"RU\">Russian Federation</option><option value=\"RW\">Rwanda</option><option value=\"KN\">Saint Kitts and Nevis</option><option value=\"LC\">Saint Lucia</option><option value=\"VC\">Saint Vincent and the Grenadines</option><option value=\"WS\">Samoa</option><option value=\"SM\">San Marino</option><option value=\"ST\">Sao Tome and Principe</option><option value=\"SA\">Saudi Arabia</option><option value=\"SN\">Senegal</option><option value=\"RS\">Serbia</option><option value=\"SC\">Seychelles</option><option value=\"SL\">Sierra Leone</option><option value=\"SG\">Singapore</option><option value=\"SK\">Slovakia</option><option value=\"SI\">Slovenia</option><option value=\"SB\">Solomon Islands</option><option value=\"SO\">Somalia</option><option value=\"ZA\">South Africa</option><option value=\"SS\">South Sudan</option><option value=\"ES\">Spain</option><option value=\"LK\">Sri Lanka</option><option value=\"SH\">St. Helena</option><option value=\"PM\">St. Pierre and Miquelon</option><option value=\"SD\">Sudan</option><option value=\"SR\">Suriname</option><option value=\"SY\">Syria</option><option value=\"SZ\">Swaziland</option><option value=\"SE\">Sweden</option><option value=\"CH\">Switzerland</option><option value=\"TW\">Taiwan</option><option value=\"TJ\">Tajikistan</option><option value=\"TZ\">Tanzania</option><option value=\"TH\">Thailand</option><option value=\"TG\">Togo</option><option value=\"TK\">Tokelau</option><option value=\"TO\">Tonga</option><option value=\"TT\">Trinidad and Tobago</option><option value=\"TN\">Tunisia</option><option value=\"TR\">Turkey</option><option value=\"TM\">Turkmenistan</option><option value=\"TC\">Turks and Caicos Islands</option><option value=\"TV\">Tuvalu</option><option value=\"UG\">Uganda</option><option value=\"UA\">Ukraine</option><option value=\"AE\">United Arab Emirates</option><option value=\"GB\" selected=\"selected\">United Kingdom</option><option value=\"US\">United States</option><option value=\"UY\">Uruguay</option><option value=\"UZ\">Uzbekistan</option><option value=\"VU\">Vanuatu</option><option value=\"VE\">Venezuela</option><option value=\"VN\">Viet Nam</option><option value=\"VI\">Virgin Islands (U.S.)</option><option value=\"WF\">Wallis and Futuna Islands</option><option value=\"EH\">Western Sahara</option><option value=\"YE\">Yemen</option><option value=\"ZM\">Zambia</option><option value=\"ZW\">Zimbabwe</option></select>';\n                    } else {\n\n                        //selectbox\n                        signupFields += '<label class=\"visible-label  visible-label--select\" for=\"' + fieldName + '\">' + k.label;\n                        if (k.is_required === 1 || k.is_required === '1') {\n                            signupFields += '*';\n                        }\n                        signupFields += '</label>';\n                        signupFields += '<select ' + validationTxt + ' class=\"w--input-field\" name=\"' + fieldName + '\" id=\"' + fieldName + '\">';\n                        var optionFields = k.extra_def.options;\n                        //split options by breaking chars\n                        optionFields = optionFields.split('\\r\\n');\n\n                        //iterate through options\n                        $.each(optionFields, function (key, value) {\n                            var radioArr = value.split('|');\n                            //if value == key\n                            if (radioArr.length > 1) {\n                                signupFields += '<option value=\"' + radioArr[0] + '\">' + radioArr[1] + '</option>';\n                            } else {\n                                signupFields += '<option value=\"' + radioArr[0] + '\">' + radioArr[0] + '</option>';\n                            }\n                        });\n                        signupFields += '</select>';\n                    }\n                    break;\n                case '4':\n                    //multiple checkboxes\n                    signupFields += '<p class=\"form-radio--label\">' + k.label;\n                    if (k.is_required === 1 || k.is_required === '1') {\n                        signupFields += '*';\n                    }\n                    signupFields += '</p>';\n                    optionFields = k.extra_def.options;\n                    //split options by breaking chars\n                    optionFields = optionFields.split('\\r\\n');\n                    //iterate through options\n                    $.each(optionFields, function (key, value) {\n                        var radioArr = value.split('|'),\n                            checkLabel = '';\n\n                        if (radioArr.length > 1) {\n                            checkLabel = radioArr[1];\n                        } else {\n                            checkLabel = radioArr[0];\n                        }\n                        signupFields += '<div class=\"form-row--checkbox\"><label class=\"visible-label\" for=\"' + fieldName + '_' + key + '\">' + checkLabel + '</label>';\n                        signupFields += '<input class=\"w--input-field\" type=\"checkbox\" name=\"' + fieldName + '[]\" ' + validationTxt + ' value=\"' + radioArr[0] + '\" id=\"' + fieldName + '_' + key + '\" onclick=\"if(this.checked) { this.form[\\'' + fieldName + '[' + key + ']' + '\\'].value=\\'' + checkLabel + '\\'; } else { this.form[\\'' + fieldName + '[' + key + ']' + '\\'].value=\\'\\'; }\" />';\n                        signupFields += '<input type=\"hidden\" name=\"' + fieldName + '[' + key + ']\" /></div>';\n                    });\n                    break;\n                case '5':\n                    //if radio buttons\n                    signupFields += '<p class=\"form-radio--label\">' + k.label;\n                    if (k.is_required === 1 || k.is_required === '1') {\n                        signupFields += '*';\n                    }\n                    signupFields += '</p>';\n                    optionFields = k.extra_def.options;\n                    //split options by breaking chars\n                    optionFields = optionFields.split('\\r\\n');\n\n                    //iterate through options\n                    $.each(optionFields, function (key, value) {\n                        var radioArr = value.split('|'),\n                            checkLabel = '';\n\n                        if (radioArr.length > 1) {\n                            checkLabel = radioArr[1];\n                        } else {\n                            checkLabel = radioArr[0];\n                        }\n\n                        signupFields += '<div class=\"form-row--radio\"><label class=\"visible-label\" for=\"' + fieldName + '_' + key + '\">' + checkLabel + '</label>';\n                        signupFields += '<input class=\"w--input-field\" type=\"radio\" name=\"' + fieldName + '[]\" ' + validationTxt + ' value=\"' + radioArr[0] + '\" id=\"' + fieldName + '_' + key + '\" onclick=\"if(this.checked) { this.form[\\'' + fieldName + '[' + key + ']' + '\\'].value=\\'' + checkLabel + '\\'; } else { this.form[\\'' + fieldName + '[' + key + ']' + '\\'].value=\\'\\'; }\" />';\n                        signupFields += '<input type=\"hidden\" name=\"' + fieldName + '[' + key + ']\" /></div>';\n                    });\n                    break;\n                case '6':\n                    //static text\n                    signupFields += '<p class=\"form-field-static\">' + k.extra_def.text + '</p>';\n                    break;\n                case '7':\n                    //if single checkbox\n                    if (k.extra_def.desc.length > 0 && k.label !== k.extra_def.desc) {\n                        signupFields += '<div class=\"form-row--checkbox\"><p class=\"checkbox-text\">' + k.label;\n                        if (k.is_required === 1 || k.is_required === '1') {\n                            signupFields += '*';\n                        }\n                        signupFields += '</p>';\n                        signupFields += '<label  class=\"visible-label\" for=\"' + fieldName + '\">' + k.extra_def.desc + '</label>';\n                    } else {\n                        signupFields += '<label  class=\"visible-label\" for=\"' + fieldName + '\">' + k.label + '</label>';\n                    }\n                    signupFields += '<input class=\"w--input-field\" type=\"checkbox\" name=\"' + fieldName + '\" ' + validationTxt + ' value=\"1\" id=\"' + fieldName + '\" /></div>';\n                    break;\n                case '8':\n                    //if sample upload file\n                    signupFields += '<label for=\"' + fieldName + '\">' + k.label;\n                    if (k.is_required === 1 || k.is_required === '1') {\n                        signupFields += '*';\n                    }\n                    signupFields += '</label>';\n                    signupFields += '<input  class=\"w--input-field\" type=\"file\" name=\"' + fieldName + '\" ' + validationTxt + ' placeholder=\"' + k.label + '\" id=\"' + fieldName + '\" />';\n                    signupFields += '<p class=\"desc\">Max upload size: ' + k.extra_def.file_size + 'mb ';\n                    break;\n                case '9':\n                    //autocomplete text box\n                    signupFields += '<label for=\"' + fieldName + '\">' + k.label;\n                    if (k.is_required === 1 || k.is_required === '1') {\n                        signupFields += '*';\n                    }\n                    signupFields += '</label>';\n                    signupFields += '<input  class=\"w--input-field\" type=\"text\" name=\"' + fieldName + '\" ' + validationTxt + ' placeholder=\"' + k.label + '\" id=\"' + fieldName + '\" />';\n                    break;\n                case '10':\n                    //if hidden type text\n                    signupFields += '<label for=\"' + fieldName + '\">' + k.label + '</label>';\n                    signupFields += '<input  class=\"w--input-field\" type=\"hidden\" name=\"' + fieldName + '\" ' + validationTxt + ' placeholder=\"' + k.label + '\" id=\"' + fieldName + '\" />';\n                    break;\n                default:\n                    signupFields += '<label for=\"' + fieldName + '\">' + k.label;\n                    if (k.is_required === 1 || k.is_required === '1') {\n                        signupFields += '*';\n                    }\n                    signupFields += '</label>';\n                    signupFields += '<input  class=\"w--input-field\" type=\"' + fieldType + '\" name=\"' + fieldName + '\" ' + validationTxt + ' placeholder=\"' + k.label + '\" id=\"' + fieldName + '\" />';\n            }\n        },\n        buildFields: function (k) {\n            //reset fields\n            var fieldType = 'text',\n                extraClasses = '',\n                fieldName = '',\n                validationTxt = '';\n\n            if (k.is_custom_field === '0') {\n                if (k.description === 'Postal Code') {\n                    fieldName = 'zip';\n                } else {\n                    fieldName = k.description.replace(/\\s+/g, '').toLowerCase();\n                }\n            } else {\n                fieldName = 'custom-' + k['@attributes'].id;\n            }\n            //check if it's a hidden field\n            if (k.is_shown === '0') {\n                fieldType = 'hidden';\n                extraClasses = ' row-hidden';\n            }\n\n            //check if email type\n            if (k.description === 'Email') {\n                fieldType = 'email';\n            }\n\n            //check if required\n            if (k.is_required === '1') {\n                extraClasses += ' row-required';\n                validationTxt = ' data-validate=\"presence\" requiredplaceholder data-validateMsg=\"Please enter a valid ' + k.label + '\" ';\n            }\n\n            signupFields += '<div class=\"form-row form-row--left ' + extraClasses + '\">';\n            Widgets.fieldType(k, fieldName, fieldType, validationTxt);\n            signupFields += '</div>';\n        },\n        resetBtn: function () {\n            if ($('#fetchForm .b--btn').hasClass('loading')) {\n                //remove loading animation from submit button and remove disable\n                $('#fetchForm .b--btn').removeClass('loading').val('Fetch form').attr('disabled', false).css({ cursor: 'pointer' });\n            } else {\n                $('#fetchForm .b--btn').addClass('loading').val('Loading...').attr('disabled', true).css({ 'cursor': 'default' });\n            }\n        },\n        fetchFields: function () {\n\n            $.ajax({\n                url: s.fieldsURL,\n                method: 'GET',\n                data: { formID: $('#formID').val(), branch: $('#branch').val() },\n                success: function (data) {\n                    data = JSON.parse(data);\n                    var arr = $.makeArray(data);\n                    signupFields = '';\n                    arr = arr[0].signup_form_field;\n                    //build input fields up\n\n                    //The tools returns the field order a bit messed up - custom fields mixed amongst standard lets ensure that the std fields are always shown first\n                    var customArr = arr.filter(function (ar) {\n                        return ar.is_custom_field === '1';\n                    });\n\n                    arr = arr.filter(function (ar) {\n                        return ar.is_custom_field === '0';\n                    });\n\n                    $.each(arr, function (i, k) {\n                        Widgets.buildFields(k);\n                    });\n\n                    $.each(customArr, function (i, k) {\n                        Widgets.buildFields(k);\n                    });\n\n                    $('#customiseForm .sortable-rows').html(signupFields);\n                    $('.row-hidden').remove();\n                    $('#fetchForm').hide();\n                    $('#tabbedBox').fadeIn();\n                    //populate and show edit form box\n                    $('.form-id--display').html($('#formID').val());\n                    $('.e--edit-form').show();\n\n                    //toggle field width functionality - simply add/remove a class to form rows when the toggle button is selected\n                    $('#customiseForm .form-row').on('click', function () {\n                        if ($('.l-customise--step2').hasClass('current-step')) {\n                            if ($(this).hasClass('form-row--half')) {\n                                $(this).removeClass('form-row--half');\n                            } else {\n                                $(this).addClass('form-row--half');\n                            }\n                        }\n                    });\n                    Widgets.resetBtn();\n                },\n                error: function () {\n                    //Something went so wrong\n                }\n            });\n        },\n        fieldSort: function () {\n            //identify draggable fields\n            $('#customiseForm .sortable-rows').sortable({\n                revert: true,\n                start: function () {}\n            });\n\n            $('#customiseForm .sortable-rows').disableSelection();\n\n            $('#customiseForm .form-row').on('mouseup', function () {\n                $(this).removeClass('.is-dragging');\n                return false;\n            });\n            $('#customiseForm .form-row').on('mousedown', function () {\n                $(this).addClass('is-dragging');\n                return false;\n            });\n\n            $('#customiseForm .form-row').droppable({\n                greedy: true,\n                tolerance: 'pointer'\n            });\n        },\n\n        copyClipboard: function (textbox) {\n\n            // Create a \"hidden\" input\n            var aux = document.createElement('input');\n            // Assign it the value of the specified element\n            aux.setAttribute('value', textbox);\n            // Append it to the body\n            document.body.appendChild(aux);\n            // Highlight its content\n            aux.select();\n            // Copy the highlighted text\n            document.execCommand('copy');\n            // Remove it from the body\n            document.body.removeChild(aux);\n        },\n\n        toggleBtn: function (el, btn) {\n            if (el.val().length > 0) {\n                btn.removeClass('btn-disabled');\n            } else {\n                btn.addClass('btn-disabled');\n            }\n        },\n        formListener: function () {\n\n            $('#personaliseForm form').on('submit', function (event) {\n                event.preventDefault();\n\n                //check that if thank you content is selected these fields have been completed\n                if ($('#destination').val() === 'content' && $('#thankyouContent').val().length === 0) {\n\n                    $('.fieldset--submit').before('<p class=\"error form-missing\">Please complete the highlighted fields.</p>');\n                    $('.required').addClass('invalid-fields');\n                    return false;\n                } else if ($('#destination').val() === 'url' && $('#thankyouURL').val().length === 0) {\n                    $('#thankyouURL').after('<p class=\"error form-missing\">Please complete the highlighted fields.</p>');\n                    $('.required').addClass('invalid-fields');\n                    return false;\n                } else {\n                    $('.required').removeClass('invalid-fields');\n                    $('.form-missing').remove();\n                }\n                //generate HTML\n                Widgets.buildEmbedCode();\n                $('#tabbedBox').tabs({ disabled: '' });\n                //move to the next tab\n                $('#tabbedBox').tabs('option', 'active', 2);\n                $('html, body').animate({\n                    scrollTop: 0\n                }, 100);\n                return false;\n            });\n\n            $('#formID').blur(function () {\n                Widgets.toggleBtn($('#formID'), $('#fetchForm').find('input[type=\"submit\"]'));\n            });\n\n            $('#formID').keydown(function () {\n                Widgets.toggleBtn($('#formID'), $('#fetchForm').find('input[type=\"submit\"]'));\n            });\n\n            $('#customiseForm').on('submit', 'form', function (event) {\n                event.preventDefault();\n                //move to the next tab\n                $('#tabbedBox').tabs('option', 'active', 1);\n\n                $('html, body').animate({\n                    scrollTop: 0\n                }, 100);\n                return false;\n            });\n\n            //copy to clipboard functionality\n            $('#generateForm').on('click', '.b--btn__submit', function (e) {\n                e.preventDefault();\n                var copyTextarea = $(this).data('copy');\n\n                Widgets.copyClipboard($('#' + copyTextarea).val());\n                $(this).val('Copied to clipboard');\n\n                setTimeout(function () {\n                    $(this).val('Copy to clipboard');\n                }, 5000);\n                return false;\n            });\n\n            $('body').on('blur', '.invalid-fields', function () {\n                if ($(this).length > 0) {\n                    $(this).removeClass('invalid-fields');\n                } else {\n                    $(this).addClass('invalid-fields');\n                }\n            });\n        },\n        customiseFormSetup: function () {\n            $('.l-customise--step2').hide();\n            $('#customiseSubmit').val('Happy? Continue to the next step').addClass('btn-step-2');\n\n            $('.l-customise--step1 h4').on('click', function () {\n\n                $('.l-customise--step2').hide().removeClass('current-step');\n                $('.l-customise--step1').show().addClass('current-step');\n                $('html, body').animate({\n                    scrollTop: 0\n                }, 100);\n\n                $(this).parent().parent().removeClass('row-toggled');\n                $('#customiseForm .sortable-rows').sortable({\n                    revert: true,\n                    start: function () {}\n                });\n                $('#customiseSubmit').val('Happy? Continue to the next step').addClass('btn-step-2');\n\n                return false;\n            });\n\n            $('#customiseForm').on('click', '.btn-step-2', function () {\n\n                $(this).val('Personalise form').removeClass('btn-step-2');\n                $('.l-customise--step1').removeClass('current-step');\n                $('.l-customise--step2').show().addClass('current-step');\n\n                $('#customiseForm .sortable-rows').sortable('destroy');\n                $('html, body').animate({\n                    scrollTop: 0\n                }, 100);\n\n                $(this).parent().parent().addClass('row-toggled');\n\n                return false;\n            });\n        },\n        bindUIActions: function () {\n            CKEDITOR.replace('form_intro');\n            CKEDITOR.replace('thankyouContent');\n\n            //disable the form button until necessary fields are populate\n            $('#fetchForm').find('input[type=\"submit\"]').addClass('btn-disabled');\n\n            $('#personaliseForm').on('click', 'h3', function () {\n\n                if ($(this).find('span').hasClass('icon-chevron-up')) {\n                    $(this).find('span').removeClass('icon-chevron-up').addClass('icon-chevron-down');\n                    $(this).next().removeClass('active-content');\n                } else {\n                    $(this).find('span').removeClass('icon-chevron-down').addClass('icon-chevron-up');\n                    $(this).next().addClass('active-content');\n                }\n\n                return false;\n            });\n\n            $('#tabbedBox').tabs({ disabled: [2] });\n        }\n    };\n    Widgets.init();\n    Widgets.formListener();\n    Widgets.fetchForm();\n    Widgets.editForm();\n    Widgets.customiseFormSetup();\n    Widgets.personaliseForm();\n    Widgets.fieldSort();\n})(jQuery);\n//# sourceMappingURL=main.js.map\n"],"sourceRoot":"/source/"}