{"version":3,"sources":["main.js"],"names":["$","s","signupInfo","wrapperHTML","signupFields","Widgets","settings","formURL","fieldsURL","env","location","hostname","init","bindUIActions","validate","el","flagValidation","msgValidation","remove","data","indexOf","val","isNumeric","after","personaliseForm","hide","on","show","easyEditor","buttons","elem","length","limiter","thankyouCode","shareCode","formpostCode","shareText","encodeURIComponent","trim","is","jQuery","each","i","txt","parent","find","text","addDB","embedJS","embedHTML","thankyouURL","ajax","url","type","JS","HTML","signupID","signup_form_id","success","token","attr","buildEmbedCode","signup_form_name","signup_form_slug","currForm","html","split","optinTxt","email_opt_in_label","replace","tyCode","editForm","event","preventDefault","fadeIn","fetchForm","formValidates","resetBtn","method","formID","branch","JSON","parse","arr","makeArray","signup_form","populateFields","fetchFields","error","form_public_title","form_html_top","submit_button_label","thank_you_html","CKEDITOR","fieldType","k","fieldName","validationTxt","format","label","is_required","optionFields","extra_def","options","key","value","radioArr","checkLabel","desc","file_size","buildFields","extraClasses","is_custom_field","description","toLowerCase","id","is_shown","hasClass","removeClass","css","cursor","addClass","signup_form_field","customArr","filter","ar","fieldSort","sortable","revert","start","disableSelection","droppable","greedy","tolerance","copyClipboard","textbox","aux","document","createElement","setAttribute","body","appendChild","select","execCommand","removeChild","toggleBtn","btn","formListener","before","tabs","disabled","animate","scrollTop","blur","keydown","e","copyTextarea","setTimeout","customiseFormSetup","next"],"mappings":"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","file":"main.js","sourcesContent":["/*global jQuery:false */\n\n/* TO DO\n seperate out into modules\n */\n(function ($) {\n    'use strict';\n\n    var s,\n        signupInfo,\n        wrapperHTML = '',\n        signupFields,\n        Widgets = {\n        settings: {\n            formURL: './server/form.php',\n            fieldsURL: './server/fields.php',\n            env: location.hostname\n        },\n\n        init: function () {\n            s = this.settings;\n            Widgets.bindUIActions();\n\n        },\n        validate: function (el) {\n\n            var flagValidation = 0;\n            var msgValidation = '';\n            //check for presence\n            $('.form-error').remove();\n            if (el.data('validate').indexOf('presence') >= 0) {\n                if (!el.val()) {\n                    flagValidation = 1;\n                    //put in template\n                    msgValidation = '<p class=\"error\">' + el.data('validatemsg') + '</p>';\n                }\n            }\n\n            if (el.data('validate').indexOf('numeric') >= 0) {\n                if (!$.isNumeric(el.val())) {\n                    flagValidation = 1;\n                    //put in template\n                    msgValidation = '<p class=\"error form-error\">' + el.data('validatemsg') + '</p>';\n                }\n            }\n\n            if (flagValidation > 0) {\n                el.after(msgValidation);\n                return false;\n            } else {\n                return true;\n            }\n        },\n        personaliseForm: function () {\n\n            $('#personaliseForm .hide-row').hide();\n\n            //if thankyou option selected then show extra options\n            $('#destination').on('change', function () {\n                if ($(this).val() === 'content') {\n                    $('.hide-row').show();\n                    $('.thankyouurl-row').hide();\n                    //rte init\n\n                    $('#thankyouContent').easyEditor({\n                        buttons: ['bold', 'italic', 'link', 'h3', 'h4', 'h5', 'alignleft', 'aligncenter', 'alignright', 'list', 'x', 'source']\n                    });\n\n                    var elem = $('.countdown');\n                    if ($('.message').length > 0) {\n                        $('.message').limiter(140, elem);\n                    }\n                } else {\n                    $('.thankyouurl-row').show();\n                    $('.hide-row').hide();\n                }\n            });\n        },\n        thankyouCode: function () {\n\n            var shareCode = '';\n            var formpostCode = '';\n\n            var shareText = encodeURIComponent($('#shareTweet').val().trim());\n\n            var thankyouCode = '<div class=\"thankyou-content\">' + $('#thankyouContent').val() + '</div>';\n\n            if ($('#formEntry').is(':checked')) {\n                formpostCode = '<div class=\"form-post\"><p>Thank you for submitting the following information:</p>';\n                jQuery('#speakout_form input').each(function (i, data) {\n                    var txt = jQuery(data).parent().parent().find('label').text();\n                    formpostCode += '<p>' + txt + ' : ' + jQuery(data).val() + '</p>';\n                });\n                formpostCode += '</div>';\n            }\n\n            if ($('#shareImg').val().length > 0) {\n                shareCode = '<div class=\"share-content\"><img src=\"' + $('#shareImg').val() + '\" alt=\"share this page\" /><div class=\"social-share\"><a href=\"https://www.facebook.com/sharer/sharer.php?u=' + $('#sharePage').val() + '\" class=\"fb-btn\" target=\"_blank\">Share on Facebook</a><a href=\"https://twitter.com/home?status=' + shareText + '\" class=\"tw-btn\"  target=\"_blank\">Share on Twitter</a></div></div>';\n            }\n\n            return thankyouCode + formpostCode + shareCode;\n        },\n        addDB: function (embedJS, embedHTML, thankyouURL) {\n            $.ajax({\n                url: './server/connect.php',\n                type: 'post',\n                data: { type: 'insert', JS: embedJS, HTML: embedHTML, thankyouURL: thankyouURL, signupID: signupInfo.signup_form_id, signupInfo: signupInfo },\n                success: function (data) {\n                    var token = data;\n\n                    jQuery('.wb--btn__submit__widget').attr('href', 'preview.html?tkn=' + token);\n                    jQuery('#generateForm #embedScript').val('<script type=\"text/javascript\" id=\"widget-generator\">   var link = document.createElement( \"link\" );     link.href = \"//'+s.env+'/styles/bsd-widget.css\";      link.type = \"text/css\";      link.rel = \"stylesheet\";      link.media = \"screen,print\";      document.getElementsByTagName( \"head\" )[0].appendChild( link );   (function() {        function async_load(){          var s = document.createElement(\"script\");          s.type = \"text/javascript\";          s.async = true;          var theUrl = \"https://'+s.env+'/scripts/bsd-widget.js\";          s.src = theUrl;          var embedder = document.getElementById(\"w-embed\");   var token = \"' + token + '\"; embedder.setAttribute(\"data-token\", token);   embedder.parentNode.insertBefore(s, embedder);        }        if (window.attachEvent)          window.attachEvent(\"onload\", async_load);        else          window.addEventListener(\"load\", async_load, false);      })();    </script><div id=\"w-embed\" class=\"'+s.env+'\"></div>');\n                }\n            });\n        },\n        buildEmbedCode: function () {\n\n            //build the js\n            //will include signup API call\n            var embedJS = '';\n\n            embedJS += 'jQuery(document).ready(function() { jQuery(\".thankyou-wrapper\").hide();';\n\n            embedJS += 'jQuery(\".apiform\").bsdSignup({no_redirect:true}).on(\"bsd-success\",function(e, response){ e.preventDefault();';\n\n            //if redirect to URL build script to redirect window to set URL\n            if ($('#formEntry').is(':checked')) {\n                embedJS += ' var postedHTML = \"\"; jQuery(\".apiform .form-row\").not(\".row-hidden\").each(function(index) { if($(this).find(\".form-radio--label\").length > 0) {      var postedLabel = $(this).find(\".form-radio--label\").text();  }    else if ($(this).find(\"label\").length > 0) {      var postedLabel = $(this).find(\"label\").text(); } else { var postedLabel = \"\"; }  var postedInput = $(this).find(\":input\").val(); if(postedInput.length > 0 && postedLabel.length > 0) {  postedHTML += postedLabel + \" : \" + postedInput + \"<br />\";    }  });';\n                embedJS += ' jQuery(\".thankyou-content\").append(\\'<p class=\"wg-form-posted\">\\' + postedHTML + \\'</p>\\');';\n            }\n            if ($('#destination').val() === 'url') {\n                embedJS += ' window.location.replace(\"' + jQuery('#thankyouURL').val() + '\"); ';\n            } else {\n                //if show thankyou content, hide the form on success and show thank you content\n                embedJS += ' jQuery(\".apiform\").hide(); jQuery(\".thankyou-wrapper\").show(); ';\n            }\n            embedJS += '});});';\n\n            //build the html\n\n\n            var embedHTML = '<div class=\"campaign-header\"><div class=\"wWrapper\"><h2>' + jQuery('#form_title').val() + '</h2>';\n\n            if (jQuery('#form_intro').val().length > 0 || jQuery('#form_signatures').is(':checked')) {\n\n                embedHTML += '<div class=\"bsd-embed-intro \">';\n\n                if (jQuery('#form_intro').val().length > 0) {\n                    embedHTML += '' + jQuery('#form_intro').val() + '<br />';\n                }\n\n                if (jQuery('#form_signatures').is(':checked')) {\n                    if (jQuery('#target_signatures').val().length > 0) {\n                        embedHTML += '<div class=\"supporter_count\"><span class=\"figure group\" style=\"display: block;\" id=\"signup_counter\">0</span><div class=\"progress-bar\" data-target=\"' + jQuery('#target_signatures').val() + '\" style=\"display: block;\"><div class=\"progress\" style=\"width: 0%;\"></div></div> Petition Signatures</div>';\n                    } else {\n                        embedHTML += '<div class=\"supporter_count\"><span class=\"figure group\" id=\"signup_counter\">0</span> Petition Signatures</div>';\n                    }\n                }\n\n                if (jQuery('#form_cta').val().length > 0) {\n                    embedHTML += '<div class=\"btn btn-primary expand-petition\"><span>' + jQuery('#form_cta').val() + '</span></div>';\n                } else {\n\n                    embedHTML += '<div class=\"btn btn-primary expand-petition\"><span>Sign the petition</span></div>';\n                }\n                embedHTML += '</div></div>';\n\n                embedHTML += '<div class=\"bsd-embed-form bsd-widgetainer bsd-widget-styled\">';\n            } else {\n\n                embedHTML += '<div class=\"bsd-embed-form bsd-widgetainer bsd-widget-styled bsd-expanded-form\">';\n            }\n\n            embedHTML += '<form name=\"' + signupInfo.signup_form_name + '\" class=\"apiform\" action=\"' + $('#branch').val() + '/page/s/' + signupInfo.signup_form_slug + '\" method=\"post\" id=\"' + signupInfo.signup_form_id + '\">';\n            embedHTML += '<input type=\"hidden\" name=\"signup_form_id\" value=\"' + signupInfo.signup_form_id + '\" />';\n            embedHTML += '<input type=\"hidden\" name=\"source\" value=\"\" id=\"bsd_widget_source\" />';\n\n            var currForm = $('#customiseForm form').html().split('<div class=\"form-row--submit\">');\n            var optinTxt = '<div class=\"form-row\"><input id=\"email_opt_in\" name=\"email_opt_in\" type=\"checkbox\" value=\"1\" ><label for=\"email_opt_in\">' + signupInfo.email_opt_in_label + '</label></div><div class=\"form-row--submit\">';\n\n            embedHTML += currForm[0];\n            embedHTML += optinTxt;\n            embedHTML += currForm[1];\n\n            embedHTML = embedHTML.replace('name=\"address\"', 'name=\"addr1');\n            embedHTML = embedHTML.replace('Personalise form', jQuery('#form_btn').val());\n            embedHTML = embedHTML.replace('requiredplaceholder', 'required aria-required=\"true\"');\n            embedHTML += '</form>';\n            embedHTML += '</div>';\n\n            wrapperHTML += '<div class=\"signup-wrapper\">';\n            //only show logo if it exists\n            //if($('#logo').val().length > 0) {\n            //wrapperHTML += '<div class=\"signup-logo\" style=\"text-align: ' + $('#logoAlignment').val() + ';\"><img src=\"' + $('#logo').val() + '\" alt=\"logo\" /></div>';\n            //}\n\n            wrapperHTML += embedHTML;\n\n            if ($('#destination').val() !== 'url') {\n                var tyCode = Widgets.thankyouCode();\n                wrapperHTML += '<div class=\"thankyou-wrapper\">' + tyCode + '</div>';\n            }\n\n            wrapperHTML += '</div>';\n\n            if ($('#destination').val() === 'url') {\n                var thankyouURL = jQuery('#thankyouURL').val();\n            }\n\n            Widgets.addDB(embedJS, wrapperHTML, thankyouURL);\n\n            embedJS = '';\n            wrapperHTML = '';\n        },\n        editForm: function () {\n\n            //on site load should be hidden\n            $('.e--edit-form').hide();\n\n            $('.e--edit-form').on('click', 'a', function (event) {\n\n                event.preventDefault();\n\n                $('.e--edit-form').hide();\n                $('#tabbedBox').hide();\n                $('#fetchForm').fadeIn();\n            });\n        },\n        fetchForm: function () {\n\n            $('#fetchForm').on('submit', 'form', function (event) {\n                event.preventDefault();\n\n                //remove form missing message\n                $('p.form-missing').remove();\n                //validate input\n                var formValidates = Widgets.validate($('#formID'));\n\n                if (formValidates === false) {\n                    return false;\n                }\n\n                Widgets.resetBtn();\n                $.ajax({\n                    url: s.formURL,\n                    method: 'GET',\n                    data: { formID: $('#formID').val(), branch: $('#branch').val() },\n                    success: function (data) {\n                        data = JSON.parse(data);\n                        var arr = $.makeArray(data);\n                        signupInfo = arr[0].signup_form;\n                        Widgets.populateFields();\n                        Widgets.fetchFields();\n                    },\n                    error: function () {\n                        //Something went so wrong\n                        $('#formID').after('<p class=\"error form-missing\">I am sorry this signup form does not exist within this branch in the Blue State Digital Tools.</p>');\n                        //reset button\n                        Widgets.resetBtn();\n                        return false;\n                    }\n                });\n            });\n        },\n        populateFields: function () {\n            jQuery('#form_title').val(signupInfo.form_public_title);\n            if (typeof signupInfo.form_html_top === 'string') {\n                jQuery('#form_intro').val(signupInfo.form_html_top);\n            }\n            if (typeof signupInfo.submit_button_label === 'string') {\n                jQuery('#form_btn').val(signupInfo.submit_button_label);\n            }\n            jQuery('#thankyouContent').val(signupInfo.thank_you_html);\n\n            CKEDITOR.replace('form_intro');\n            CKEDITOR.replace('thankyouContent');\n        },\n        fieldType: function (k, fieldName, fieldType, validationTxt) {\n            //there are a variety of different field types the tools can return this runs through them and builds out the HTML to be sympathetic to the Tools setup\n            switch (k.format) {\n                case '1':\n                    //if input type text\n                    signupFields += '<label for=\"' + fieldName + '\">' + k.label;\n                    if (k.is_required === 1 || k.is_required === '1') {\n                        signupFields += '*';\n                    }\n                    signupFields += '</label>';\n                    signupFields += '<input class=\"w--input-field\" type=\"' + fieldType + '\" name=\"' + fieldName + '\" ' + validationTxt + ' id=\"' + fieldName + '\" />';\n                    break;\n                case '2':\n                    //if textarea\n                    signupFields += '<label for=\"' + fieldName + '\">' + k.label;\n                    if (k.is_required === 1 || k.is_required === '1') {\n                        signupFields += '*';\n                    }\n                    signupFields += '</label>';\n                    signupFields += '<textarea class=\"w--input-field\" ' + validationTxt + ' name=\"' + fieldName + '\"></textarea>';\n                    break;\n                case '3':\n                    //selectbox\n                    if (k.label === 'Country') {\n                        signupFields += '<label class=\"visible-label visible-label--select\" for=\"country\">Country';\n                        if (k.is_required === 1 || k.is_required === '1') {\n                            signupFields += '*';\n                        }\n                        signupFields += '</label>';\n\n                        signupFields += '<select  class=\"w--input-field\" id=\"country\" name=\"country\"><option value=\"\"></option><option value=\"AF\">Afghanistan</option><option value=\"AL\">Albania</option><option value=\"DZ\">Algeria</option><option value=\"AS\">American Samoa</option><option value=\"AD\">Andorra</option><option value=\"AO\">Angola</option><option value=\"AI\">Anguilla</option><option value=\"AG\">Antigua and Barbuda</option><option value=\"AR\">Argentina</option><option value=\"AM\">Armenia</option><option value=\"AW\">Aruba</option><option value=\"AU\">Australia</option><option value=\"AT\">Austria</option><option value=\"AZ\">Azerbaijan</option><option value=\"BS\">Bahamas</option><option value=\"BH\">Bahrain</option><option value=\"BD\">Bangladesh</option><option value=\"BB\">Barbados</option><option value=\"BY\">Belarus</option><option value=\"BE\">Belgium</option><option value=\"BZ\">Belize</option><option value=\"BJ\">Benin</option><option value=\"BM\">Bermuda</option><option value=\"BT\">Bhutan</option><option value=\"BO\">Bolivia</option><option value=\"BA\">Bosnia and Herzegovina</option><option value=\"BW\">Botswana</option><option value=\"BR\">Brazil</option><option value=\"VG\">British Virgin Islands</option><option value=\"IO\">British Indian Ocean Territory</option><option value=\"BN\">Brunei</option><option value=\"BG\">Bulgaria</option><option value=\"BF\">Burkina Faso</option><option value=\"BI\">Burundi</option><option value=\"KH\">Cambodia</option><option value=\"CM\">Cameroon</option><option value=\"CA\">Canada</option><option value=\"CV\">Cape Verde</option><option value=\"KY\">Cayman Islands</option><option value=\"CF\">Central African Republic</option><option value=\"TD\">Chad</option><option value=\"CL\">Chile</option><option value=\"CN\">China</option><option value=\"CX\">Christmas Island</option><option value=\"CO\">Colombia</option><option value=\"KM\">Comoros Islands</option><option value=\"CD\">Congo, Democratic Republic of the</option><option value=\"CG\">Congo, Republic of the</option><option value=\"CK\">Cook Islands</option><option value=\"CR\">Costa Rica</option><option value=\"CI\">Cote D\\'ivoire</option><option value=\"HR\">Croatia</option><option value=\"CU\">Cuba</option><option value=\"CY\">Cyprus</option><option value=\"CZ\">Czech Republic</option><option value=\"DK\">Denmark</option><option value=\"DJ\">Djibouti</option><option value=\"DM\">Dominica</option><option value=\"DO\">Dominican Republic</option><option value=\"TP\">East Timor</option><option value=\"EC\">Ecuador</option><option value=\"EG\">Egypt</option><option value=\"SV\">El Salvador</option><option value=\"GQ\">Equatorial Guinea</option><option value=\"ER\">Eritrea</option><option value=\"EE\">Estonia</option><option value=\"ET\">Ethiopia</option><option value=\"FK\">Falkland Islands (Malvinas)</option><option value=\"FO\">Faroe Islands</option><option value=\"FJ\">Fiji</option><option value=\"FI\">Finland</option><option value=\"FR\">France</option><option value=\"GF\">French Guiana</option><option value=\"PF\">French Polynesia</option><option value=\"TF\">French Southern Territories</option><option value=\"GA\">Gabon</option><option value=\"GM\">Gambia</option><option value=\"GE\">Georgia</option><option value=\"DE\">Germany</option><option value=\"GH\">Ghana</option><option value=\"GI\">Gibraltar</option><option value=\"GR\">Greece</option><option value=\"GL\">Greenland</option><option value=\"GD\">Grenada</option><option value=\"GP\">Guadeloupe</option><option value=\"GU\">Guam</option><option value=\"GT\">Guatemala</option><option value=\"GN\">Guinea</option><option value=\"GW\">Guinea-Bissau</option><option value=\"GY\">Guyana</option><option value=\"HT\">Haiti</option><option value=\"VA\">Holy See (Vatican City State)</option><option value=\"HN\">Honduras</option><option value=\"HK\">Hong Kong</option><option value=\"HU\">Hungary</option><option value=\"IS\">Iceland</option><option value=\"IN\">India</option><option value=\"ID\">Indonesia</option><option value=\"IR\">Iran</option><option value=\"IQ\">Iraq</option><option value=\"IE\">Republic of Ireland</option><option value=\"IL\">Israel</option><option value=\"IT\">Italy</option><option value=\"JM\">Jamaica</option><option value=\"JP\">Japan</option><option value=\"JO\">Jordan</option><option value=\"KZ\">Kazakhstan</option><option value=\"KE\">Kenya</option><option value=\"KI\">Kiribati</option><option value=\"KR\">South Korea</option><option value=\"XK\">Kosovo</option><option value=\"KW\">Kuwait</option><option value=\"KG\">Kyrgyzstan</option><option value=\"LA\">Laos</option><option value=\"LV\">Latvia</option><option value=\"LB\">Lebanon</option><option value=\"LS\">Lesotho</option><option value=\"LR\">Liberia</option><option value=\"LY\">Libya</option><option value=\"LI\">Liechtenstein</option><option value=\"LT\">Lithuania</option><option value=\"LU\">Luxembourg</option><option value=\"MO\">Macau</option><option value=\"MK\">Macedonia</option><option value=\"MG\">Madagascar</option><option value=\"MW\">Malawi</option><option value=\"MY\">Malaysia</option><option value=\"MV\">Maldives</option><option value=\"ML\">Mali</option><option value=\"MT\">Malta</option><option value=\"MH\">Marshall Islands</option><option value=\"MQ\">Martinique</option><option value=\"MR\">Mauritania</option><option value=\"MU\">Mauritius</option><option value=\"YT\">Mayotte</option><option value=\"MX\">Mexico</option><option value=\"FM\">Micronesia</option><option value=\"MD\">Moldova, Republic of</option><option value=\"MC\">Monaco</option><option value=\"MN\">Mongolia</option><option value=\"ME\">Montenegro</option><option value=\"MS\">Montserrat</option><option value=\"MA\">Morocco</option><option value=\"MZ\">Mozambique</option><option value=\"MM\">Myanmar</option><option value=\"NA\">Namibia</option><option value=\"NR\">Nauru</option><option value=\"NP\">Nepal</option><option value=\"NL\">Netherlands</option><option value=\"AN\">Netherlands Antilles</option><option value=\"NC\">New Caledonia</option><option value=\"NZ\">New Zealand</option><option value=\"NI\">Nicaragua</option><option value=\"NE\">Niger</option><option value=\"NG\">Nigeria</option><option value=\"NU\">Niue</option><option value=\"NF\">Norfolk Island</option><option value=\"MP\">Northern Mariana Islands</option><option value=\"NO\">Norway</option><option value=\"OM\">Oman</option><option value=\"PK\">Pakistan</option><option value=\"PW\">Palau</option><option value=\"PA\">Panama</option><option value=\"PG\">Papua New Guinea</option><option value=\"PY\">Paraguay</option><option value=\"PE\">Peru</option><option value=\"PH\">Philippines</option><option value=\"PN\">Pitcairn Island</option><option value=\"PL\">Poland</option><option value=\"PT\">Portugal</option><option value=\"PR\">Puerto Rico</option><option value=\"QA\">Qatar</option><option value=\"RE\">Reunion</option><option value=\"RO\">Romania</option><option value=\"RU\">Russian Federation</option><option value=\"RW\">Rwanda</option><option value=\"KN\">Saint Kitts and Nevis</option><option value=\"LC\">Saint Lucia</option><option value=\"VC\">Saint Vincent and the Grenadines</option><option value=\"WS\">Samoa</option><option value=\"SM\">San Marino</option><option value=\"ST\">Sao Tome and Principe</option><option value=\"SA\">Saudi Arabia</option><option value=\"SN\">Senegal</option><option value=\"RS\">Serbia</option><option value=\"SC\">Seychelles</option><option value=\"SL\">Sierra Leone</option><option value=\"SG\">Singapore</option><option value=\"SK\">Slovakia</option><option value=\"SI\">Slovenia</option><option value=\"SB\">Solomon Islands</option><option value=\"SO\">Somalia</option><option value=\"ZA\">South Africa</option><option value=\"SS\">South Sudan</option><option value=\"ES\">Spain</option><option value=\"LK\">Sri Lanka</option><option value=\"SH\">St. Helena</option><option value=\"PM\">St. Pierre and Miquelon</option><option value=\"SD\">Sudan</option><option value=\"SR\">Suriname</option><option value=\"SY\">Syria</option><option value=\"SZ\">Swaziland</option><option value=\"SE\">Sweden</option><option value=\"CH\">Switzerland</option><option value=\"TW\">Taiwan</option><option value=\"TJ\">Tajikistan</option><option value=\"TZ\">Tanzania</option><option value=\"TH\">Thailand</option><option value=\"TG\">Togo</option><option value=\"TK\">Tokelau</option><option value=\"TO\">Tonga</option><option value=\"TT\">Trinidad and Tobago</option><option value=\"TN\">Tunisia</option><option value=\"TR\">Turkey</option><option value=\"TM\">Turkmenistan</option><option value=\"TC\">Turks and Caicos Islands</option><option value=\"TV\">Tuvalu</option><option value=\"UG\">Uganda</option><option value=\"UA\">Ukraine</option><option value=\"AE\">United Arab Emirates</option><option value=\"GB\" selected=\"selected\">United Kingdom</option><option value=\"US\">United States</option><option value=\"UY\">Uruguay</option><option value=\"UZ\">Uzbekistan</option><option value=\"VU\">Vanuatu</option><option value=\"VE\">Venezuela</option><option value=\"VN\">Viet Nam</option><option value=\"VI\">Virgin Islands (U.S.)</option><option value=\"WF\">Wallis and Futuna Islands</option><option value=\"EH\">Western Sahara</option><option value=\"YE\">Yemen</option><option value=\"ZM\">Zambia</option><option value=\"ZW\">Zimbabwe</option></select>';\n                    } else {\n\n                        //selectbox\n                        signupFields += '<label class=\"visible-label  visible-label--select\" for=\"' + fieldName + '\">' + k.label;\n                        if (k.is_required === 1 || k.is_required === '1') {\n                            signupFields += '*';\n                        }\n                        signupFields += '</label>';\n                        signupFields += '<select ' + validationTxt + ' class=\"w--input-field\" name=\"' + fieldName + '\" id=\"' + fieldName + '\">';\n                        var optionFields = k.extra_def.options;\n                        //split options by breaking chars\n                        optionFields = optionFields.split('\\r\\n');\n\n                        //iterate through options\n                        $.each(optionFields, function (key, value) {\n                            var radioArr = value.split('|');\n                            //if value == key\n                            if (radioArr.length > 1) {\n                                signupFields += '<option value=\"' + radioArr[0] + '\">' + radioArr[1] + '</option>';\n                            } else {\n                                signupFields += '<option value=\"' + radioArr[0] + '\">' + radioArr[0] + '</option>';\n                            }\n                        });\n                        signupFields += '</select>';\n                    }\n                    break;\n                case '4':\n                    //multiple checkboxes\n                    signupFields += '<p class=\"form-radio--label\">' + k.label;\n                    if (k.is_required === 1 || k.is_required === '1') {\n                        signupFields += '*';\n                    }\n                    signupFields += '</p>';\n                    optionFields = k.extra_def.options;\n                    //split options by breaking chars\n                    optionFields = optionFields.split('\\r\\n');\n                    //iterate through options\n                    $.each(optionFields, function (key, value) {\n                        var radioArr = value.split('|'),\n                            checkLabel = '';\n\n                        if (radioArr.length > 1) {\n                            checkLabel = radioArr[1];\n                        } else {\n                            checkLabel = radioArr[0];\n                        }\n                        signupFields += '<div class=\"form-row--checkbox\"><label class=\"visible-label\" for=\"' + fieldName + '_' + key + '\">' + checkLabel + '</label>';\n                        signupFields += '<input class=\"w--input-field\" type=\"checkbox\" name=\"' + fieldName + '[]\" ' + validationTxt + ' value=\"' + radioArr[0] + '\" id=\"' + fieldName + '_' + key + '\" onclick=\"if(this.checked) { this.form[\\'' + fieldName + '[' + key + ']' + '\\'].value=\\'' + checkLabel + '\\'; } else { this.form[\\'' + fieldName + '[' + key + ']' + '\\'].value=\\'\\'; }\" />';\n                        signupFields += '<input type=\"hidden\" name=\"' + fieldName + '[' + key + ']\" /></div>';\n                    });\n                    break;\n                case '5':\n                    //if radio buttons\n                    signupFields += '<p class=\"form-radio--label\">' + k.label;\n                    if (k.is_required === 1 || k.is_required === '1') {\n                        signupFields += '*';\n                    }\n                    signupFields += '</p>';\n                    optionFields = k.extra_def.options;\n                    //split options by breaking chars\n                    optionFields = optionFields.split('\\r\\n');\n\n                    //iterate through options\n                    $.each(optionFields, function (key, value) {\n                        var radioArr = value.split('|'),\n                            checkLabel = '';\n\n                        if (radioArr.length > 1) {\n                            checkLabel = radioArr[1];\n                        } else {\n                            checkLabel = radioArr[0];\n                        }\n                        signupFields += '<div class=\"form-row--radio\"><label class=\"visible-label\" for=\"' + fieldName + '_' + key + '\">' + radioArr[0] + '</label>';\n                        signupFields += '<input class=\"w--input-field\" type=\"radio\" name=\"' + fieldName + '[]\" ' + validationTxt + ' value=\"' + radioArr[0] + '\" id=\"' + fieldName + '_' + key + '\" onclick=\"if(this.checked) { this.form[\\'' + fieldName + '[' + key + ']' + '\\'].value=\\'' + checkLabel + '\\'; } else { this.form[\\'' + fieldName + '[' + key + ']' + '\\'].value=\\'\\'; }\" />';\n                        signupFields += '<input type=\"hidden\" name=\"' + fieldName + '[' + key + ']\" /></div>';\n                    });\n                    break;\n                case '6':\n                    //static text\n                    signupFields += '<p class=\"form-field-static\">' + k.extra_def.text + '</p>';\n                    break;\n                case '7':\n                    //if single checkbox\n                    if (k.extra_def.desc.length > 0 && k.label !== k.extra_def.desc) {\n                        signupFields += '<div class=\"form-row--checkbox\"><p class=\"checkbox-text\">' + k.label;\n                        if (k.is_required === 1 || k.is_required === '1') {\n                            signupFields += '*';\n                        }\n                        signupFields += '</p>';\n                        signupFields += '<label  class=\"visible-label\" for=\"' + fieldName + '\">' + k.extra_def.desc + '</label>';\n                    } else {\n                        signupFields += '<label  class=\"visible-label\" for=\"' + fieldName + '\">' + k.label + '</label>';\n                    }\n                    signupFields += '<input class=\"w--input-field\" type=\"checkbox\" name=\"' + fieldName + '\" ' + validationTxt + ' value=\"1\" id=\"' + fieldName + '\" /></div>';\n                    break;\n                case '8':\n                    //if sample upload file\n                    signupFields += '<label for=\"' + fieldName + '\">' + k.label;\n                    if (k.is_required === 1 || k.is_required === '1') {\n                        signupFields += '*';\n                    }\n                    signupFields += '</label>';\n                    signupFields += '<input  class=\"w--input-field\" type=\"file\" name=\"' + fieldName + '\" ' + validationTxt + ' id=\"' + fieldName + '\" />';\n                    signupFields += '<p class=\"desc\">Max upload size: ' + k.extra_def.file_size + 'mb ';\n                    break;\n                case '9':\n                    //autocomplete text box\n                    signupFields += '<label for=\"' + fieldName + '\">' + k.label;\n                    if (k.is_required === 1 || k.is_required === '1') {\n                        signupFields += '*';\n                    }\n                    signupFields += '</label>';\n                    signupFields += '<input  class=\"w--input-field\" type=\"text\" name=\"' + fieldName + '\" ' + validationTxt + ' id=\"' + fieldName + '\" />';\n                    break;\n                case '10':\n                    //if hidden type text\n                    signupFields += '<label for=\"' + fieldName + '\">' + k.label + '</label>';\n                    signupFields += '<input  class=\"w--input-field\" type=\"hidden\" name=\"' + fieldName + '\" ' + validationTxt + ' id=\"' + fieldName + '\" />';\n                    break;\n                default:\n                    signupFields += '<label for=\"' + fieldName + '\">' + k.label;\n                    if (k.is_required === 1 || k.is_required === '1') {\n                        signupFields += '*';\n                    }\n                    signupFields += '</label>';\n                    signupFields += '<input  class=\"w--input-field\" type=\"' + fieldType + '\" name=\"' + fieldName + '\" ' + validationTxt + ' id=\"' + fieldName + '\" />';\n            }\n        },\n        buildFields: function (k) {\n            //reset fields\n            var fieldType = 'text',\n                extraClasses = '',\n                fieldName = '',\n                validationTxt = '';\n\n            if (k.is_custom_field === '0') {\n                if (k.description === 'Postal Code') {\n                    fieldName = 'zip';\n                } else {\n                    fieldName = k.description.replace(/\\s+/g, '').toLowerCase();\n                }\n            } else {\n                fieldName = 'custom-' + k['@attributes'].id;\n            }\n            //check if it's a hidden field\n            if (k.is_shown === '0') {\n                fieldType = 'hidden';\n                extraClasses = ' row-hidden';\n            }\n\n            //check if email type\n            if (k.description === 'Email') {\n                fieldType = 'email';\n            }\n\n            //check if required\n            if (k.is_required === '1') {\n                extraClasses += ' row-required';\n                validationTxt = ' data-validate=\"presence\" requiredplaceholder data-validateMsg=\"Please enter a valid ' + k.label + '\" ';\n            }\n\n            signupFields += '<div class=\"form-row form-row--left ' + extraClasses + '\">';\n            Widgets.fieldType(k, fieldName, fieldType, validationTxt);\n            signupFields += '</div>';\n        },\n        resetBtn: function () {\n            if ($('#fetchForm .b--btn').hasClass('loading')) {\n                //remove loading animation from submit button and remove disable\n                $('#fetchForm .b--btn').removeClass('loading').val('Fetch form').attr('disabled', false).css({ cursor: 'pointer' });\n            } else {\n                $('#fetchForm .b--btn').addClass('loading').val('Loading...').attr('disabled', true).css({ 'cursor': 'default' });\n            }\n        },\n        fetchFields: function () {\n\n            $.ajax({\n                url: s.fieldsURL,\n                method: 'GET',\n                data: { formID: $('#formID').val(), branch: $('#branch').val() },\n                success: function (data) {\n                    data = JSON.parse(data);\n                    var arr = $.makeArray(data);\n                    signupFields = '';\n                    arr = arr[0].signup_form_field;\n                    //build input fields up\n\n                    //The tools returns the field order a bit messed up - custom fields mixed amongst standard lets ensure that the std fields are always shown first\n                    var customArr = arr.filter(function (ar) {\n                        return ar.is_custom_field === '1';\n                    });\n\n                    arr = arr.filter(function (ar) {\n                        return ar.is_custom_field === '0';\n                    });\n\n                    $.each(arr, function (i, k) {\n                        Widgets.buildFields(k);\n                    });\n\n                    $.each(customArr, function (i, k) {\n                        Widgets.buildFields(k);\n                    });\n\n                    $('#customiseForm .sortable-rows').html(signupFields);\n                    $('.row-hidden').remove();\n                    $('#fetchForm').hide();\n                    $('#tabbedBox').fadeIn();\n                    //populate and show edit form box\n                    $('.form-id--display').html($('#formID').val());\n                    $('.e--edit-form').show();\n\n                    //toggle field width functionality - simply add/remove a class to form rows when the toggle button is selected\n                    $('#customiseForm .form-row').on('click', function () {\n                        if ($('.l-customise--step2').hasClass('current-step')) {\n                            if ($(this).hasClass('form-row--half')) {\n                                $(this).removeClass('form-row--half');\n                            } else {\n                                $(this).addClass('form-row--half');\n                            }\n                        }\n                    });\n                    Widgets.resetBtn();\n                },\n                error: function () {\n                    //Something went so wrong\n                }\n            });\n        },\n        fieldSort: function () {\n            //identify draggable fields\n            $('#customiseForm .sortable-rows').sortable({\n                revert: true,\n                start: function () {}\n            });\n\n            $('#customiseForm .sortable-rows').disableSelection();\n\n            $('#customiseForm .form-row').on('mouseup', function () {\n                $(this).removeClass('.is-dragging');\n                return false;\n            });\n            $('#customiseForm .form-row').on('mousedown', function () {\n                $(this).addClass('is-dragging');\n                return false;\n            });\n\n            $('#customiseForm .form-row').droppable({\n                greedy: true,\n                tolerance: 'pointer'\n            });\n        },\n\n        copyClipboard: function (textbox) {\n\n            // Create a \"hidden\" input\n            var aux = document.createElement('input');\n            // Assign it the value of the specified element\n            aux.setAttribute('value', textbox);\n            // Append it to the body\n            document.body.appendChild(aux);\n            // Highlight its content\n            aux.select();\n            // Copy the highlighted text\n            document.execCommand('copy');\n            // Remove it from the body\n            document.body.removeChild(aux);\n        },\n\n        toggleBtn: function (el, btn) {\n            if (el.val().length > 0) {\n                btn.removeClass('btn-disabled');\n            } else {\n                btn.addClass('btn-disabled');\n            }\n        },\n        formListener: function () {\n\n            $('#personaliseForm form').on('submit', function (event) {\n                event.preventDefault();\n\n                //check that if thank you content is selected these fields have been completed\n                if ($('#destination').val() === 'content' && $('#thankyouContent').val().length === 0) {\n\n                    $('.fieldset--submit').before('<p class=\"error form-missing\">Please complete the highlighted fields.</p>');\n                    $('.required').addClass('invalid-fields');\n                    return false;\n                } else if ($('#destination').val() === 'url' && $('#thankyouURL').val().length === 0) {\n                    $('#thankyouURL').after('<p class=\"error form-missing\">Please complete the highlighted fields.</p>');\n                    $('.required').addClass('invalid-fields');\n                    return false;\n                } else {\n                    $('.required').removeClass('invalid-fields');\n                    $('.form-missing').remove();\n                }\n                //generate HTML\n                Widgets.buildEmbedCode();\n                $('#tabbedBox').tabs({ disabled: '' });\n                //move to the next tab\n                $('#tabbedBox').tabs('option', 'active', 2);\n                $('html, body').animate({\n                    scrollTop: 0\n                }, 100);\n                return false;\n            });\n\n            $('#formID').blur(function () {\n                Widgets.toggleBtn($('#formID'), $('#fetchForm').find('input[type=\"submit\"]'));\n            });\n\n            $('#formID').keydown(function () {\n                Widgets.toggleBtn($('#formID'), $('#fetchForm').find('input[type=\"submit\"]'));\n            });\n\n            $('#customiseForm').on('submit', 'form', function (event) {\n                event.preventDefault();\n                //move to the next tab\n                $('#tabbedBox').tabs('option', 'active', 1);\n\n                $('html, body').animate({\n                    scrollTop: 0\n                }, 100);\n                return false;\n            });\n\n            //copy to clipboard functionality\n            $('#generateForm').on('click', '.b--btn__submit', function (e) {\n                e.preventDefault();\n                var copyTextarea = $(this).data('copy');\n\n                Widgets.copyClipboard($('#' + copyTextarea).val());\n                $(this).val('Copied to clipboard');\n\n                setTimeout(function () {\n                    $(this).val('Copy to clipboard');\n                }, 5000);\n                return false;\n            });\n\n            $('body').on('blur', '.invalid-fields', function () {\n                if ($(this).length > 0) {\n                    $(this).removeClass('invalid-fields');\n                } else {\n                    $(this).addClass('invalid-fields');\n                }\n            });\n        },\n        customiseFormSetup: function () {\n            $('.l-customise--step2').hide();\n            $('#customiseSubmit').val('Happy? Continue to the next step').addClass('btn-step-2');\n\n            $('.l-customise--step1 h4').on('click', function () {\n\n                $('.l-customise--step2').hide().removeClass('current-step');\n                $('.l-customise--step1').show().addClass('current-step');\n                $('html, body').animate({\n                    scrollTop: 0\n                }, 100);\n\n                $(this).parent().parent().removeClass('row-toggled');\n                $('#customiseForm .sortable-rows').sortable({\n                    revert: true,\n                    start: function () {}\n                });\n                $('#customiseSubmit').val('Happy? Continue to the next step').addClass('btn-step-2');\n\n                return false;\n            });\n\n            $('#customiseForm').on('click', '.btn-step-2', function () {\n\n                $(this).val('Personalise form').removeClass('btn-step-2');\n                $('.l-customise--step1').removeClass('current-step');\n                $('.l-customise--step2').show().addClass('current-step');\n\n                $('#customiseForm .sortable-rows').sortable('destroy');\n                $('html, body').animate({\n                    scrollTop: 0\n                }, 100);\n\n                $(this).parent().parent().addClass('row-toggled');\n\n                return false;\n            });\n        },\n        bindUIActions: function () {\n\n            //disable the form button until necessary fields are populate\n            $('#fetchForm').find('input[type=\"submit\"]').addClass('btn-disabled');\n\n            $('#personaliseForm').on('click', 'h3', function () {\n\n                if ($(this).find('span').hasClass('icon-chevron-up')) {\n                    $(this).find('span').removeClass('icon-chevron-up').addClass('icon-chevron-down');\n                    $(this).next().removeClass('active-content');\n                } else {\n                    $(this).find('span').removeClass('icon-chevron-down').addClass('icon-chevron-up');\n                    $(this).next().addClass('active-content');\n                }\n\n                return false;\n            });\n\n            $('#tabbedBox').tabs({ disabled: [2] });\n        }\n    };\n    Widgets.init();\n    Widgets.formListener();\n    Widgets.fetchForm();\n    Widgets.editForm();\n    Widgets.customiseFormSetup();\n    Widgets.personaliseForm();\n    Widgets.fieldSort();\n})(jQuery);"],"sourceRoot":"/source/"}