!function(t){"use strict";"function"==typeof define&&define.amd?define(["jquery"],t):"object"==typeof exports&&"object"==typeof module?module.exports=t:t(jQuery)}(function(t,o){"use strict";function e(o,e,a,i){for(var n=[],r=0;r<o.length;r++){var l=o[r];if(l){var s=tinycolor(l),p=s.toHsl().l<.5?"sp-thumb-el sp-thumb-dark":"sp-thumb-el sp-thumb-light";p+=tinycolor.equals(e,l)?" sp-thumb-active":"";var u=s.toString(i.preferredFormat||"rgb"),c=g?"background-color:"+s.toRgbString():"filter:"+s.toFilter();n.push('<span title="'+u+'" data-color="'+s.toRgbString()+'" class="'+p+'"><span class="sp-thumb-inner" style="'+c+';" /></span>')}else{var d="sp-clear-display";n.push(t("<div />").append(t('<span data-color="" style="background-color:transparent;" class="'+d+'"></span>').attr("title",i.noColorSelectedText)).html())}}return'<div class="sp-cf '+a+'">'+n.join("")+"</div>"}function a(){for(var t=0;t<h.length;t++)h[t]&&h[t].hide()}function i(o,e){var a=t.extend({},f,o);return a.callbacks={move:p(a.move,e),change:p(a.change,e),show:p(a.show,e),hide:p(a.hide,e),beforeShow:p(a.beforeShow,e)},a}function n(n,l){function p(){if(V.showPaletteOnly&&(V.showPalette=!0),Dt.text(V.showPaletteOnly?V.togglePaletteMoreText:V.togglePaletteLessText),V.palette){ft=V.palette.slice(0),ht=t.isArray(ft[0])?ft:[ft],vt={};for(var o=0;o<ht.length;o++)for(var e=0;e<ht[o].length;e++){var a=tinycolor(ht[o][e]).toRgbString();vt[a]=!0}}_t.toggleClass("sp-flat",Q),_t.toggleClass("sp-input-disabled",!V.showInput),_t.toggleClass("sp-alpha-enabled",V.showAlpha),_t.toggleClass("sp-clear-enabled",Jt),_t.toggleClass("sp-buttons-disabled",!V.showButtons),_t.toggleClass("sp-palette-buttons-disabled",!V.togglePaletteOnly),_t.toggleClass("sp-palette-disabled",!V.showPalette),_t.toggleClass("sp-palette-only",V.showPaletteOnly),_t.toggleClass("sp-initial-disabled",!V.showInitial),_t.addClass(V.className).addClass(V.containerClassName),O()}function f(){function o(o){return o.data&&o.data.ignore?(H(t(o.target).closest(".sp-thumb-el").data("color")),L()):(H(t(o.target).closest(".sp-thumb-el").data("color")),L(),G(!0),V.hideAfterPaletteSelect&&I()),!1}if(v&&_t.find("*:not(input)").attr("unselectable","on"),p(),jt&&kt.after(qt).hide(),Jt||Lt.hide(),Q)kt.after(_t).hide();else{var e="parent"===V.appendTo?kt.parent():t(V.appendTo);1!==e.length&&(e=t("body")),e.append(_t)}y(),zt.bind("click.spectrum touchstart.spectrum",function(o){xt||P(),o.stopPropagation(),t(o.target).is("input")||o.preventDefault()}),(kt.is(":disabled")||V.disabled===!0)&&K(),_t.click(s),Rt.change(M),Rt.bind("paste",function(){setTimeout(M,1)}),Rt.keydown(function(t){13===t.keyCode&&M()}),Nt.text(V.cancelText),Nt.bind("click.spectrum",function(t){t.stopPropagation(),t.preventDefault(),R(),I()}),Lt.attr("title",V.clearText),Lt.bind("click.spectrum",function(t){t.stopPropagation(),t.preventDefault(),Yt=!0,L(),Q&&G(!0)}),Et.text(V.chooseText),Et.bind("click.spectrum",function(t){t.stopPropagation(),t.preventDefault(),v&&Rt.is(":focus")&&Rt.trigger("change"),N()&&(G(!0),I())}),Dt.text(V.showPaletteOnly?V.togglePaletteMoreText:V.togglePaletteLessText),Dt.bind("click.spectrum",function(t){t.stopPropagation(),t.preventDefault(),V.showPaletteOnly=!V.showPaletteOnly,V.showPaletteOnly||Q||_t.css("left","-="+(Ct.outerWidth(!0)+5)),p()}),u(Tt,function(t,o,e){dt=t/rt,Yt=!1,e.shiftKey&&(dt=Math.round(10*dt)/10),L()},C,S),u(Pt,function(t,o){pt=parseFloat(o/it),Yt=!1,V.showAlpha||(dt=1),L()},C,S),u(St,function(t,o,e){if(e.shiftKey){if(!yt){var a=ut*ot,i=et-ct*et,n=Math.abs(t-a)>Math.abs(o-i);yt=n?"x":"y"}}else yt=null;var r=!yt||"x"===yt,l=!yt||"y"===yt;r&&(ut=parseFloat(t/ot)),l&&(ct=parseFloat((et-o)/et)),Yt=!1,V.showAlpha||(dt=1),L()},C,S),Ut?(H(Ut),E(),Wt=Qt||tinycolor(Ut).format,w(Ut)):E(),Q&&A();var a=v?"mousedown.spectrum":"click.spectrum touchstart.spectrum";Ht.delegate(".sp-thumb-el",a,o),Bt.delegate(".sp-thumb-el:nth-child(1)",a,{ignore:!0},o)}function y(){if(Z&&window.localStorage){try{var o=window.localStorage[Z].split(",#");o.length>1&&(delete window.localStorage[Z],t.each(o,function(t,o){w(o)}))}catch(e){}try{gt=window.localStorage[Z].split(";")}catch(e){}}}function w(o){if(W){var e=tinycolor(o).toRgbString();if(!vt[e]&&-1===t.inArray(e,gt))for(gt.push(e);gt.length>bt;)gt.shift();if(Z&&window.localStorage)try{window.localStorage[Z]=gt.join(";")}catch(a){}}}function k(){var t=[];if(V.showPalette)for(var o=0;o<gt.length;o++){var e=tinycolor(gt[o]).toRgbString();vt[e]||t.push(gt[o])}return t.reverse().slice(0,V.maxSelectionSize)}function x(){var o=B(),a=t.map(ht,function(t,a){return e(t,o,"sp-palette-row sp-palette-row-"+a,V)});y(),gt&&a.push(e(k(),o,"sp-palette-row sp-palette-row-selection",V)),Ht.html(a.join(""))}function _(){if(V.showInitial){var t=Vt,o=B();Bt.html(e([t,o],o,"sp-palette-row-initial",V))}}function C(){(0>=et||0>=ot||0>=it)&&O(),tt=!0,_t.addClass(mt),yt=null,kt.trigger("dragstart.spectrum",[B()])}function S(){tt=!1,_t.removeClass(mt),kt.trigger("dragstop.spectrum",[B()])}function M(){var t=Rt.val();if(null!==t&&""!==t||!Jt){var o=tinycolor(t);o.isValid()?(H(o),G(!0)):Rt.addClass("sp-validation-error")}else H(null),G(!0)}function P(){X?I():A()}function A(){var o=t.Event("beforeShow.spectrum");return X?void O():(kt.trigger(o,[B()]),void(J.beforeShow(B())===!1||o.isDefaultPrevented()||(a(),X=!0,t(wt).bind("keydown.spectrum",F),t(wt).bind("click.spectrum",T),t(window).bind("resize.spectrum",$),qt.addClass("sp-active"),_t.removeClass("sp-hidden"),O(),E(),Vt=B(),_(),J.show(Vt),kt.trigger("show.spectrum",[Vt]))))}function F(t){27===t.keyCode&&I()}function T(t){2!==t.button&&(tt||(Zt?G(!0):R(),I()))}function I(){X&&!Q&&(X=!1,t(wt).unbind("keydown.spectrum",F),t(wt).unbind("click.spectrum",T),t(window).unbind("resize.spectrum",$),qt.removeClass("sp-active"),_t.addClass("sp-hidden"),J.hide(B()),kt.trigger("hide.spectrum",[B()]))}function R(){H(Vt,!0)}function H(t,o){if(tinycolor.equals(t,B()))return void E();var e,a;!t&&Jt?Yt=!0:(Yt=!1,e=tinycolor(t),a=e.toHsv(),pt=a.h%360/360,ut=a.s,ct=a.v,dt=a.a),E(),e&&e.isValid()&&!o&&(Wt=Qt||e.getFormat())}function B(t){return t=t||{},Jt&&Yt?null:tinycolor.fromRatio({h:pt,s:ut,v:ct,a:Math.round(100*dt)/100},{format:t.format||Wt})}function N(){return!Rt.hasClass("sp-validation-error")}function L(){E(),J.move(B()),kt.trigger("move.spectrum",[B()])}function E(){Rt.removeClass("sp-validation-error"),D();var t=tinycolor.fromRatio({h:pt,s:1,v:1});St.css("background-color",t.toHexString());var o=Wt;1>dt&&(0!==dt||"name"!==o)&&("hex"===o||"hex3"===o||"hex6"===o||"name"===o)&&(o="rgb");var e=B({format:o}),a="";if(Kt.removeClass("sp-clear-display"),Kt.css("background-color","transparent"),!e&&Jt)Kt.addClass("sp-clear-display");else{var i=e.toHexString(),n=e.toRgbString();if(g||1===e.alpha?Kt.css("background-color",n):(Kt.css("background-color","transparent"),Kt.css("filter",e.toFilter())),V.showAlpha){var r=e.toRgb();r.a=0;var l=tinycolor(r).toRgbString(),s="linear-gradient(left, "+l+", "+i+")";v?Ft.css("filter",tinycolor(l).toFilter({gradientType:1},i)):(Ft.css("background","-webkit-"+s),Ft.css("background","-moz-"+s),Ft.css("background","-ms-"+s),Ft.css("background","linear-gradient(to right, "+l+", "+i+")"))}a=e.toString(o)}V.showInput&&Rt.val(a),V.showPalette&&x(),_()}function D(){var t=ut,o=ct;if(Jt&&Yt)It.hide(),At.hide(),Mt.hide();else{It.show(),At.show(),Mt.show();var e=t*ot,a=et-o*et;e=Math.max(-at,Math.min(ot-at,e-at)),a=Math.max(-at,Math.min(et-at,a-at)),Mt.css({top:a+"px",left:e+"px"});var i=dt*rt;It.css({left:i-lt/2+"px"});var n=pt*it;At.css({top:n-st+"px"})}}function G(t){var o=B(),e="",a=!tinycolor.equals(o,Vt);o&&(e=o.toString(Wt),w(o)),Gt&&kt.val(e),t&&a&&(J.change(o),kt.trigger("change",[o]))}function O(){ot=St.width(),et=St.height(),at=Mt.height(),nt=Pt.width(),it=Pt.height(),st=At.height(),rt=Tt.width(),lt=It.width(),Q||(_t.css("position","absolute"),V.offset?_t.offset(V.offset):_t.offset(r(_t,zt))),D(),V.showPalette&&x(),kt.trigger("reflow.spectrum")}function j(){kt.show(),zt.unbind("click.spectrum touchstart.spectrum"),_t.remove(),qt.remove(),h[$t.id]=null}function q(e,a){return e===o?t.extend({},V):a===o?V[e]:(V[e]=a,void p())}function z(){xt=!1,kt.attr("disabled",!1),zt.removeClass("sp-disabled")}function K(){I(),xt=!0,kt.attr("disabled",!0),zt.addClass("sp-disabled")}function U(t){V.offset=t,O()}var V=i(l,n),Q=V.flat,W=V.showSelectionPalette,Z=V.localStorageKey,Y=V.theme,J=V.callbacks,$=c(O,10),X=!1,tt=!1,ot=0,et=0,at=0,it=0,nt=0,rt=0,lt=0,st=0,pt=0,ut=0,ct=0,dt=1,ft=[],ht=[],vt={},gt=V.selectionPalette.slice(0),bt=V.maxSelectionSize,mt="sp-dragging",yt=null,wt=n.ownerDocument,kt=(wt.body,t(n)),xt=!1,_t=t(m,wt).addClass(Y),Ct=_t.find(".sp-picker-container"),St=_t.find(".sp-color"),Mt=_t.find(".sp-dragger"),Pt=_t.find(".sp-hue"),At=_t.find(".sp-slider"),Ft=_t.find(".sp-alpha-inner"),Tt=_t.find(".sp-alpha"),It=_t.find(".sp-alpha-handle"),Rt=_t.find(".sp-input"),Ht=_t.find(".sp-palette"),Bt=_t.find(".sp-initial"),Nt=_t.find(".sp-cancel"),Lt=_t.find(".sp-clear"),Et=_t.find(".sp-choose"),Dt=_t.find(".sp-palette-toggle"),Gt=kt.is("input"),Ot=Gt&&"color"===kt.attr("type")&&d(),jt=Gt&&!Q,qt=jt?t(b).addClass(Y).addClass(V.className).addClass(V.replacerClassName):t([]),zt=jt?qt:kt,Kt=qt.find(".sp-preview-inner"),Ut=V.color||Gt&&kt.val(),Vt=!1,Qt=V.preferredFormat,Wt=Qt,Zt=!V.showButtons||V.clickoutFiresChange,Yt=!Ut,Jt=V.allowEmpty&&!Ot;f();var $t={show:A,hide:I,toggle:P,reflow:O,option:q,enable:z,disable:K,offset:U,set:function(t){H(t),G()},get:B,destroy:j,container:_t};return $t.id=h.push($t)-1,$t}function r(o,e){var a=0,i=o.outerWidth(),n=o.outerHeight(),r=e.outerHeight(),l=o[0].ownerDocument,s=l.documentElement,p=s.clientWidth+t(l).scrollLeft(),u=s.clientHeight+t(l).scrollTop(),c=e.offset();return c.top+=r,c.left-=Math.min(c.left,c.left+i>p&&p>i?Math.abs(c.left+i-p):0),c.top-=Math.min(c.top,c.top+n>u&&u>n?Math.abs(n+r-a):a),c}function l(){}function s(t){t.stopPropagation()}function p(t,o){var e=Array.prototype.slice,a=e.call(arguments,2);return function(){return t.apply(o,a.concat(e.call(arguments)))}}function u(o,e,a,i){function n(t){t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault(),t.returnValue=!1}function r(t){if(u){if(v&&p.documentMode<9&&!t.button)return s();var a=t.originalEvent&&t.originalEvent.touches&&t.originalEvent.touches[0],i=a&&a.pageX||t.pageX,r=a&&a.pageY||t.pageY,l=Math.max(0,Math.min(i-c.left,f)),g=Math.max(0,Math.min(r-c.top,d));h&&n(t),e.apply(o,[l,g,t])}}function l(e){var i=e.which?3===e.which:2===e.button;i||u||a.apply(o,arguments)!==!1&&(u=!0,d=t(o).height(),f=t(o).width(),c=t(o).offset(),t(p).bind(g),t(p.body).addClass("sp-dragging"),r(e),n(e))}function s(){u&&(t(p).unbind(g),t(p.body).removeClass("sp-dragging"),setTimeout(function(){i.apply(o,arguments)},0)),u=!1}e=e||function(){},a=a||function(){},i=i||function(){};var p=document,u=!1,c={},d=0,f=0,h="ontouchstart"in window,g={};g.selectstart=n,g.dragstart=n,g["touchmove mousemove"]=r,g["touchend mouseup"]=s,t(o).bind("touchstart mousedown",l)}function c(t,o,e){var a;return function(){var i=this,n=arguments,r=function(){a=null,t.apply(i,n)};e&&clearTimeout(a),(e||!a)&&(a=setTimeout(r,o))}}function d(){return t.fn.spectrum.inputTypeColorSupport()}var f={beforeShow:l,move:l,change:l,show:l,hide:l,color:!1,flat:!1,showInput:!0,allowEmpty:!0,showButtons:!0,clickoutFiresChange:!0,showInitial:!0,showPalette:!1,showPaletteOnly:!1,hideAfterPaletteSelect:!1,togglePaletteOnly:!1,showSelectionPalette:!0,localStorageKey:!1,appendTo:"body",maxSelectionSize:7,cancelText:"cancel",chooseText:"choose",togglePaletteMoreText:"more",togglePaletteLessText:"less",clearText:"Clear Color Selection",noColorSelectedText:"No Color Selected",preferredFormat:!1,className:"",containerClassName:"",replacerClassName:"",showAlpha:!1,theme:"sp-light",palette:[["#ffffff","#000000","#ff0000","#ff8000","#ffff00","#008000","#0000ff","#4b0082","#9400d3","#fff"]],selectionPalette:[],disabled:!1,offset:null},h=[],v=!!/msie/i.exec(window.navigator.userAgent),g=function(){function t(t,o){return!!~(""+t).indexOf(o)}var o=document.createElement("div"),e=o.style;return e.cssText="background-color:rgba(0,0,0,.5)",t(e.backgroundColor,"rgba")||t(e.backgroundColor,"hsla")}(),b=['<div class="sp-replacer">','<div class="sp-preview"><div class="sp-preview-inner"></div></div>','<div class="sp-dd">&#9660;</div>',"</div>"].join(""),m=function(){var t="";if(v)for(var o=1;6>=o;o++)t+='<div class="sp-'+o+'""></div>';return['<div class="sp-container sp-hidden">','<div class="sp-palette-container">','<div class="sp-palette sp-thumb sp-cf"></div>','<div class="sp-palette-button-container sp-cf">','<button type="button" class="sp-palette-toggle"></button>',"</div>","</div>",'<div class="sp-picker-container">','<div class="sp-top sp-cf">','<div class="sp-fill"></div>','<div class="sp-top-inner">','<div class="sp-color">','<div class="sp-sat">','<div class="sp-val">','<div class="sp-dragger"></div>',"</div>","</div>","</div>",'<div class="sp-clear sp-clear-display">',"</div>",'<div class="sp-hue">','<div class="sp-slider"></div>',t,"</div>","</div>",'<div class="sp-alpha"><div class="sp-alpha-inner"><div class="sp-alpha-handle"></div></div></div>',"</div>",'<div class="sp-input-container sp-cf">','<input class="sp-input" type="text" spellcheck="false"  />',"</div>",'<div class="sp-initial sp-thumb sp-cf"></div>','<div class="sp-button-container sp-cf">','<a class="sp-cancel" href="#"></a>','<button type="button" class="sp-choose"></button>',"</div>","</div>","</div>"].join("")}(),y="spectrum.id";t.fn.spectrum=function(o,e){if("string"==typeof o){var a=this,i=Array.prototype.slice.call(arguments,1);return this.each(function(){var e=h[t(this).data(y)];if(e){var n=e[o];if(!n)throw new Error('Spectrum: no such method: "'+o+'"');"get"===o?a=e.get():"container"===o?a=e.container:"option"===o?a=e.option.apply(e,i):"destroy"===o?(e.destroy(),t(this).removeData(y)):n.apply(e,i)}}),a}return this.spectrum("destroy").each(function(){var e=t.extend({},o,t(this).data()),a=n(this,e);t(this).data(y,a.id)})},t.fn.spectrum.load=!0,t.fn.spectrum.loadOpts={},t.fn.spectrum.draggable=u,t.fn.spectrum.defaults=f,t.fn.spectrum.inputTypeColorSupport=function w(){if("undefined"==typeof w._cachedResult){var o=t('<input type="color"/>')[0];w._cachedResult="color"===o.type&&""!==o.value}return w._cachedResult},t.spectrum={},t.spectrum.localization={},t.spectrum.palettes={},t.fn.spectrum.processNativeColorInputs=function(){var o=t("input[type=color]");o.length&&!d()&&o.spectrum({preferredFormat:"hex6"})},function(){function t(t){var e={r:0,g:0,b:0},i=1,r=!1,l=!1;return"string"==typeof t&&(t=R(t)),"object"==typeof t&&(t.hasOwnProperty("r")&&t.hasOwnProperty("g")&&t.hasOwnProperty("b")?(e=o(t.r,t.g,t.b),r=!0,l="%"===String(t.r).substr(-1)?"prgb":"rgb"):t.hasOwnProperty("h")&&t.hasOwnProperty("s")&&t.hasOwnProperty("v")?(t.s=F(t.s),t.v=F(t.v),e=n(t.h,t.s,t.v),r=!0,l="hsv"):t.hasOwnProperty("h")&&t.hasOwnProperty("s")&&t.hasOwnProperty("l")&&(t.s=F(t.s),t.l=F(t.l),e=a(t.h,t.s,t.l),r=!0,l="hsl"),t.hasOwnProperty("a")&&(i=t.a)),i=x(i),{ok:r,format:t.format||l,r:D(255,G(e.r,0)),g:D(255,G(e.g,0)),b:D(255,G(e.b,0)),a:i}}function o(t,o,e){return{r:255*_(t,255),g:255*_(o,255),b:255*_(e,255)}}function e(t,o,e){t=_(t,255),o=_(o,255),e=_(e,255);var a,i,n=G(t,o,e),r=D(t,o,e),l=(n+r)/2;if(n===r)a=i=0;else{var s=n-r;switch(i=l>.5?s/(2-n-r):s/(n+r),n){case t:a=(o-e)/s+(e>o?6:0);break;case o:a=(e-t)/s+2;break;case e:a=(t-o)/s+4}a/=6}return{h:a,s:i,l:l}}function a(t,o,e){function a(t,o,e){return 0>e&&(e+=1),e>1&&(e-=1),1/6>e?t+6*(o-t)*e:.5>e?o:2/3>e?t+(o-t)*(2/3-e)*6:t}var i,n,r;if(t=_(t,360),o=_(o,100),e=_(e,100),0===o)i=n=r=e;else{var l=.5>e?e*(1+o):e+o-e*o,s=2*e-l;i=a(s,l,t+1/3),n=a(s,l,t),r=a(s,l,t-1/3)}return{r:255*i,g:255*n,b:255*r}}function i(t,o,e){t=_(t,255),o=_(o,255),e=_(e,255);var a,i,n=G(t,o,e),r=D(t,o,e),l=n,s=n-r;if(i=0===n?0:s/n,n===r)a=0;else{switch(n){case t:a=(o-e)/s+(e>o?6:0);break;case o:a=(e-t)/s+2;break;case e:a=(t-o)/s+4}a/=6}return{h:a,s:i,v:l}}function n(t,o,e){t=6*_(t,360),o=_(o,100),e=_(e,100);var a=L.floor(t),i=t-a,n=e*(1-o),r=e*(1-i*o),l=e*(1-(1-i)*o),s=a%6,p=[e,r,n,n,l,e][s],u=[l,e,e,r,n,n][s],c=[n,n,l,e,e,r][s];return{r:255*p,g:255*u,b:255*c}}function r(t,o,e,a){var i=[A(E(t).toString(16)),A(E(o).toString(16)),A(E(e).toString(16))];return a&&i[0].charAt(0)===i[0].charAt(1)&&i[1].charAt(0)===i[1].charAt(1)&&i[2].charAt(0)===i[2].charAt(1)?i[0].charAt(0)+i[1].charAt(0)+i[2].charAt(0):i.join("")}function l(t,o,e,a){var i=[A(T(a)),A(E(t).toString(16)),A(E(o).toString(16)),A(E(e).toString(16))];return i.join("")}function s(t,o){o=0===o?0:o||10;var e=j(t).toHsl();return e.s-=o/100,e.s=C(e.s),j(e)}function p(t,o){o=0===o?0:o||10;var e=j(t).toHsl();return e.s+=o/100,e.s=C(e.s),j(e)}function u(t){return j(t).desaturate(100)}function c(t,o){o=0===o?0:o||10;var e=j(t).toHsl();return e.l+=o/100,e.l=C(e.l),j(e)}function d(t,o){o=0===o?0:o||10;var e=j(t).toRgb();return e.r=G(0,D(255,e.r-E(255*-(o/100)))),e.g=G(0,D(255,e.g-E(255*-(o/100)))),e.b=G(0,D(255,e.b-E(255*-(o/100)))),j(e)}function f(t,o){o=0===o?0:o||10;var e=j(t).toHsl();return e.l-=o/100,e.l=C(e.l),j(e)}function h(t,o){var e=j(t).toHsl(),a=(E(e.h)+o)%360;return e.h=0>a?360+a:a,j(e)}function v(t){var o=j(t).toHsl();return o.h=(o.h+180)%360,j(o)}function g(t){var o=j(t).toHsl(),e=o.h;return[j(t),j({h:(e+120)%360,s:o.s,l:o.l}),j({h:(e+240)%360,s:o.s,l:o.l})]}function b(t){var o=j(t).toHsl(),e=o.h;return[j(t),j({h:(e+90)%360,s:o.s,l:o.l}),j({h:(e+180)%360,s:o.s,l:o.l}),j({h:(e+270)%360,s:o.s,l:o.l})]}function m(t){var o=j(t).toHsl(),e=o.h;return[j(t),j({h:(e+72)%360,s:o.s,l:o.l}),j({h:(e+216)%360,s:o.s,l:o.l})]}function y(t,o,e){o=o||6,e=e||30;var a=j(t).toHsl(),i=360/e,n=[j(t)];for(a.h=(a.h-(i*o>>1)+720)%360;--o;)a.h=(a.h+i)%360,n.push(j(a));return n}function w(t,o){o=o||6;for(var e=j(t).toHsv(),a=e.h,i=e.s,n=e.v,r=[],l=1/o;o--;)r.push(j({h:a,s:i,v:n})),n=(n+l)%1;return r}function k(t){var o={};for(var e in t)t.hasOwnProperty(e)&&(o[t[e]]=e);return o}function x(t){return t=parseFloat(t),(isNaN(t)||0>t||t>1)&&(t=1),t}function _(t,o){M(t)&&(t="100%");var e=P(t);return t=D(o,G(0,parseFloat(t))),e&&(t=parseInt(t*o,10)/100),L.abs(t-o)<1e-6?1:t%o/parseFloat(o)}function C(t){return D(1,G(0,t))}function S(t){return parseInt(t,16)}function M(t){return"string"==typeof t&&-1!=t.indexOf(".")&&1===parseFloat(t)}function P(t){return"string"==typeof t&&-1!=t.indexOf("%")}function A(t){return 1===t.length?"0"+t:""+t}function F(t){return 1>=t&&(t=100*t+"%"),t}function T(t){return Math.round(255*parseFloat(t)).toString(16)}function I(t){return S(t)/255}function R(t){t=t.replace(H,"").replace(B,"").toLowerCase();var o=!1;if(q[t])t=q[t],o=!0;else if("transparent"===t)return{r:0,g:0,b:0,a:0,format:"name"};var e;return(e=K.rgb.exec(t))?{r:e[1],g:e[2],b:e[3]}:(e=K.rgba.exec(t))?{r:e[1],g:e[2],b:e[3],a:e[4]}:(e=K.hsl.exec(t))?{h:e[1],s:e[2],l:e[3]}:(e=K.hsla.exec(t))?{h:e[1],s:e[2],l:e[3],a:e[4]}:(e=K.hsv.exec(t))?{h:e[1],s:e[2],v:e[3]}:(e=K.hsva.exec(t))?{h:e[1],s:e[2],v:e[3],a:e[4]}:(e=K.hex8.exec(t))?{a:I(e[1]),r:S(e[2]),g:S(e[3]),b:S(e[4]),format:o?"name":"hex8"}:(e=K.hex6.exec(t))?{r:S(e[1]),g:S(e[2]),b:S(e[3]),format:o?"name":"hex"}:(e=K.hex3.exec(t))?{r:S(e[1]+""+e[1]),g:S(e[2]+""+e[2]),b:S(e[3]+""+e[3]),format:o?"name":"hex"}:!1}var H=/^[\s,#]+/,B=/\s+$/,N=0,L=Math,E=L.round,D=L.min,G=L.max,O=L.random,j=function(o,e){if(o=o?o:"",e=e||{},o instanceof j)return o;if(!(this instanceof j))return new j(o,e);var a=t(o);this._originalInput=o,this._r=a.r,this._g=a.g,this._b=a.b,this._a=a.a,this._roundA=E(100*this._a)/100,this._format=e.format||a.format,this._gradientType=e.gradientType,this._r<1&&(this._r=E(this._r)),this._g<1&&(this._g=E(this._g)),this._b<1&&(this._b=E(this._b)),this._ok=a.ok,this._tc_id=N++};j.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var t=this.toRgb();return(299*t.r+587*t.g+114*t.b)/1e3},setAlpha:function(t){return this._a=x(t),this._roundA=E(100*this._a)/100,this},toHsv:function(){var t=i(this._r,this._g,this._b);return{h:360*t.h,s:t.s,v:t.v,a:this._a}},toHsvString:function(){var t=i(this._r,this._g,this._b),o=E(360*t.h),e=E(100*t.s),a=E(100*t.v);return 1===this._a?"hsv("+o+", "+e+"%, "+a+"%)":"hsva("+o+", "+e+"%, "+a+"%, "+this._roundA+")"},toHsl:function(){var t=e(this._r,this._g,this._b);return{h:360*t.h,s:t.s,l:t.l,a:this._a}},toHslString:function(){var t=e(this._r,this._g,this._b),o=E(360*t.h),a=E(100*t.s),i=E(100*t.l);return 1===this._a?"hsl("+o+", "+a+"%, "+i+"%)":"hsla("+o+", "+a+"%, "+i+"%, "+this._roundA+")"},toHex:function(t){return r(this._r,this._g,this._b,t)},toHexString:function(t){return"#"+this.toHex(t)},toHex8:function(){return l(this._r,this._g,this._b,this._a)},toHex8String:function(){return"#"+this.toHex8()},toRgb:function(){return{r:E(this._r),g:E(this._g),b:E(this._b),a:this._a}},toRgbString:function(){return 1===this._a?"rgb("+E(this._r)+", "+E(this._g)+", "+E(this._b)+")":"rgba("+E(this._r)+", "+E(this._g)+", "+E(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:E(100*_(this._r,255))+"%",g:E(100*_(this._g,255))+"%",b:E(100*_(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1===this._a?"rgb("+E(100*_(this._r,255))+"%, "+E(100*_(this._g,255))+"%, "+E(100*_(this._b,255))+"%)":"rgba("+E(100*_(this._r,255))+"%, "+E(100*_(this._g,255))+"%, "+E(100*_(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":this._a<1?!1:z[r(this._r,this._g,this._b,!0)]||!1},toFilter:function(t){var o="#"+l(this._r,this._g,this._b,this._a),e=o,a=this._gradientType?"GradientType = 1, ":"";if(t){var i=j(t);e=i.toHex8String()}return"progid:DXImageTransform.Microsoft.gradient("+a+"startColorstr="+o+",endColorstr="+e+")"},toString:function(t){var o=!!t;t=t||this._format;var e=!1,a=this._a<1&&this._a>=0,i=!o&&a&&("hex"===t||"hex6"===t||"hex3"===t||"name"===t);return i?"name"===t&&0===this._a?this.toName():this.toRgbString():("rgb"===t&&(e=this.toRgbString()),"prgb"===t&&(e=this.toPercentageRgbString()),("hex"===t||"hex6"===t)&&(e=this.toHexString()),"hex3"===t&&(e=this.toHexString(!0)),"hex8"===t&&(e=this.toHex8String()),"name"===t&&(e=this.toName()),"hsl"===t&&(e=this.toHslString()),"hsv"===t&&(e=this.toHsvString()),e||this.toHexString())},_applyModification:function(t,o){var e=t.apply(null,[this].concat([].slice.call(o)));return this._r=e._r,this._g=e._g,this._b=e._b,this.setAlpha(e._a),this},lighten:function(){return this._applyModification(c,arguments)},brighten:function(){return this._applyModification(d,arguments)},darken:function(){return this._applyModification(f,arguments)},desaturate:function(){return this._applyModification(s,arguments)},saturate:function(){return this._applyModification(p,arguments)},greyscale:function(){return this._applyModification(u,arguments)},spin:function(){return this._applyModification(h,arguments)},_applyCombination:function(t,o){return t.apply(null,[this].concat([].slice.call(o)))},analogous:function(){return this._applyCombination(y,arguments)},complement:function(){return this._applyCombination(v,arguments)},monochromatic:function(){return this._applyCombination(w,arguments)},splitcomplement:function(){return this._applyCombination(m,arguments)},triad:function(){return this._applyCombination(g,arguments)},tetrad:function(){return this._applyCombination(b,arguments)}},j.fromRatio=function(t,o){if("object"==typeof t){var e={};for(var a in t)t.hasOwnProperty(a)&&("a"===a?e[a]=t[a]:e[a]=F(t[a]));t=e}return j(t,o)},j.equals=function(t,o){return t&&o?j(t).toRgbString()===j(o).toRgbString():!1},j.random=function(){return j.fromRatio({r:O(),g:O(),b:O()})},j.mix=function(t,o,e){e=0===e?0:e||50;var a,i=j(t).toRgb(),n=j(o).toRgb(),r=e/100,l=2*r-1,s=n.a-i.a;a=l*s===-1?l:(l+s)/(1+l*s),a=(a+1)/2;var p=1-a,u={r:n.r*a+i.r*p,g:n.g*a+i.g*p,b:n.b*a+i.b*p,a:n.a*r+i.a*(1-r)};return j(u)},j.readability=function(t,o){var e=j(t),a=j(o),i=e.toRgb(),n=a.toRgb(),r=e.getBrightness(),l=a.getBrightness(),s=Math.max(i.r,n.r)-Math.min(i.r,n.r)+Math.max(i.g,n.g)-Math.min(i.g,n.g)+Math.max(i.b,n.b)-Math.min(i.b,n.b);return{brightness:Math.abs(r-l),color:s}},j.isReadable=function(t,o){var e=j.readability(t,o);return e.brightness>125&&e.color>500},j.mostReadable=function(t,o){for(var e=null,a=0,i=!1,n=0;n<o.length;n++){var r=j.readability(t,o[n]),l=r.brightness>125&&r.color>500,s=3*(r.brightness/125)+r.color/500;(l&&!i||l&&i&&s>a||!l&&!i&&s>a)&&(i=l,a=s,e=j(o[n]))}return e};var q=j.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},z=j.hexNames=k(q),K=function(){var t="[-\\+]?\\d+%?",o="[-\\+]?\\d*\\.\\d+%?",e="(?:"+o+")|(?:"+t+")",a="[\\s|\\(]+("+e+")[,|\\s]+("+e+")[,|\\s]+("+e+")\\s*\\)?",i="[\\s|\\(]+("+e+")[,|\\s]+("+e+")[,|\\s]+("+e+")[,|\\s]+("+e+")\\s*\\)?";return{rgb:new RegExp("rgb"+a),rgba:new RegExp("rgba"+i),hsl:new RegExp("hsl"+a),hsla:new RegExp("hsla"+i),hsv:new RegExp("hsv"+a),hsva:new RegExp("hsva"+i),hex3:/^([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex8:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();window.tinycolor=j}(),t(function(){t.fn.spectrum.load&&t.fn.spectrum.processNativeColorInputs()})}),function(t){"use strict";var o,e,a,i="",n={settings:{formURL:"/form.php",fieldsURL:"/fields.php"},init:function(){o=this.settings,n.bindUIActions()},validate:function(o){var e=0,a="";return t(".form-error").remove(),o.data("validate").indexOf("presence")>=0&&(o.val()||(e=1,a='<p class="error">'+o.data("validatemsg")+"</p>")),o.data("validate").indexOf("numeric")>=0&&(t.isNumeric(o.val())||(e=1,a='<p class="error form-error">'+o.data("validatemsg")+"</p>")),e>0?(o.after(a),!1):!0},personaliseForm:function(){t("#personaliseForm .hide-row").hide(),t("#destination").on("change",function(){"content"===t(this).val()?(t(".hide-row").show(),t(".thankyouurl-row").hide()):(t(".thankyouurl-row").show(),t(".hide-row").hide())})},thankyouCode:function(){var o="",e="",a=encodeURIComponent(t("#shareTweet").val().trim()),i='<h2 class="thankyou-header">'+t("#thankyouHeader").val()+'</h2><div class="thankyou-content">'+t("#thankyouContent").val()+"</div>";return t("#formEntry").is(":checked")&&(e='<div class="form-post"><p>Thank you for submitting the following information:</p></div>'),t("#shareImg").val().length>0&&(o='<div class="share-content"><img src="'+t("#shareImg").val()+'" alt="share this page" /><div class="social-share"><a href="https://www.facebook.com/sharer/sharer.php?u='+t("#sharePage").val()+'" class="fb-btn">Share on Facebook</a><a href="https://twitter.com/home?status='+a+'" class="tw-btn">Share on Twitter</a></div></div>'),i+e+o},buildEmbedCode:function(){var o=0,a=0,r=0;t("#paddingVertical").val().length>0&&(a=t("#paddingVertical").val()),t("#paddingHoriz").val().length>0&&(o=t("#paddingHoriz").val()),t("#marginVertical").val().length>0&&(r=t("#marginVertical").val());var l=a+" "+o,s=r,p='<style type="text/css">';t("#linkColour").val().length>0&&(p+=".signup-wrapper a { color: "+t("#linkColour").val()+"  }"),t("#textColour").val().length>0&&(p+=".signup-wrapper { color: "+t("#textColour").val()+"  }"),t("#bgImg").val().length>0&&(p+=".signup-wrapper { background: url("+t("#bgImg").val()+") no-repeat "+t("#bgColour").val()+"; background-size:cover;  }"),p+=" .fb-btn {  background-color: #2b4170; /* fallback color */  background: -moz-linear-gradient(top, #3b5998, #2b4170);  background: -ms-linear-gradient(top, #3b5998, #2b4170);  background: -webkit-linear-gradient(top, #3b5998, #2b4170);  border: 1px solid #2b4170;  text-shadow: 0 -1px -1px #1f2f52;} .fb-btn:hover {  background-color: #3b5998; /* fallback color */   background: -moz-linear-gradient(top, #2b4170, #3b5998);  background: -ms-linear-gradient(top, #2b4170, #3b5998);   background: -webkit-linear-gradient(top, #2b4170, #3b5998);}",p+=" .tw-btn {  background-color: #0081ce; /* fallback color */  background: -moz-linear-gradient(top, #00aced, #0081ce);  background: -ms-linear-gradient(top, #00aced, #0081ce);  background: -webkit-linear-gradient(top, #00aced, #0081ce); border: 1px solid #0081ce;  text-shadow: 0 -1px -1px #005ea3;} .tw-btn:hover { background-color: #00aced; /* fallback color */  background: -moz-linear-gradient(top, #0081ce, #00aced);  background: -ms-linear-gradient(top, #0081ce, #00aced);  background: -webkit-linear-gradient(top, #0081ce, #00aced); } .tw-btn, .fb-btn {  border-radius: 3px;  box-shadow: 0 1px 1px #999;  color: #fff;  display: inline-block;  font-size: 16px;  margin: 0 20px 20px 0;  margin: 0 1rem 2rem 0;  padding: 10px 15px;  padding: 1rem 1.5rem;  text-align: center;  width: 140px;}",p+=' body .signup-wrapper label.visible-label {display:inline-block; padding-right: 10px;} .form-row--half input:not([type="submit"]):not([type="radio"]):not([type="checkbox"]), .form-row--half select { width:100%; box-sizing:border-box; } .row-hidden { display:none!important; }   .form-row { display: inline;  float: left;  width: 97.5609756098%;  margin: 0 1.2195121951%; }  .form-row--half { display: inline;  float: left;  width: 47.5609756098%;  margin: 0 1.2195121951%; } .signup-wrapper input:not([type=submit]), .signup-wrapper textarea, .signup-wrapper select, .signup-wrapper label, .signup-wrapper .form-radio--label, .signup-wrapper .form-field-static, .signup-wrapper .form-radio--label { padding: '+l+"; width:100%; box-sizing:border-box; margin-top: "+s+"; margin-bottom: "+s+"; } .b--btn.b--btn__submit { box-shadow:0px 2px #a6132c; background-color: #e83755;  border-right-color: #bd1632; width:auto; padding: 12px 60px 12px 25px; color: #ffffff; font-size: 14px; }",
p+=".signup-wrapper input([type=checkbox]), .signup-wrapper input([type=radio]) { width:auto; } #email_opt_in { width:10%;  } body .apiform .form-row #email_opt_in + label { display:block; padding:0; width:85%; float:right; } body .visible-label { float:right; width:85%; padding:0; } body .apiform .form-row .visible-label + input { width:10%; }</style>";var u="";t("#formValidation").is(":checked")&&(u+='<script type="text/javascript" src="http://cdn.jsdelivr.net/jquery.validation/1.14.0/jquery.validate.min.js" />'),u+='<script type="text/javascript">jQuery(document).ready(function() { jQuery(".thankyou-wrapper").hide();',t("#formValidation").is(":checked")&&(u+='jQuery(".apiform").on("submit", function() {',u+='jQuery(".apiform").validate();',u+="});"),u+='jQuery(".apiform").bsdSignup({no_redirect:true}).on("bsd-success",function(e, response){ e.preventDefault();',t("#formEntry").is(":checked")&&(u+=' var postedHTML = ""; jQuery(".apiform .form-row").not(".row-hidden").each(function(index) { if($(this).find(".form-radio--label").length > 0) {      var postedLabel = $(this).find(".form-radio--label").text();  }    else if ($(this).find("label").length > 0) {      var postedLabel = $(this).find("label").text(); } else { var postedLabel = ""; }  var postedInput = $(this).find(":input").val(); if(postedInput.length > 0 && postedLabel.length > 0) {  postedHTML += postedLabel + " : " + postedInput + "<br />";    }  });',u+=" jQuery(\".thankyou-content\").append('<p class=\"wg-form-posted\">' + postedHTML + '</p>');"),u+="url"===t("#destination").val()?' window.location.replace("'+jQuery("#thankyouURL").val()+'"); ':' jQuery(".apiform").hide(); jQuery(".thankyou-wrapper").show(); ',u+="});});</script>";var c='<div class="bsd-embed-form widgetainer widget-styled">';if(c+='<form name="'+e.signup_form_name+'" class="apiform" action="'+t("#branch").val()+"/page/s/"+e.signup_form_slug+'" method="post" id="'+e.signup_form_id+'">',t("#optIn").is(":checked")){var d=t("#customiseForm form").html().split('<div class="form-row--submit">'),f='<div class="form-row"><input id="email_opt_in" name="email_opt_in" type="checkbox" value="1" checked="checked"><label for="email_opt_in">Keep me up-to-date on this and other Which? campaigns by email</label></div><div class="form-row--submit">';c+=d[0],c+=f,c+=d[1]}else c+=t("#customiseForm form").html();if(c=c.replace('name="address"','name="addr1'),c=c.replace("Personalise Form","Submit Form"),c=c.replace("requiredplaceholder",'required aria-required="true"'),c+="</form>",c+="</div>",i+='<div class="signup-wrapper">',t("#logo").val().length>0&&(i+='<div class="signup-logo" style="text-align: '+t("#logoAlignment").val()+';"><img src="'+t("#logo").val()+'" alt="logo" /></div>'),i+=c,"url"!==t("#destination").val()){var h=n.thankyouCode();i+='<div class="thankyou-wrapper">'+h+"</div>"}i+="</div>",t("#generateForm #embedScript").val(u),t("#generateForm #embedStyle").val(p),t("#generateForm #embedTextbox").val(i),u="",p="",i=""},editForm:function(){t(".e--edit-form").hide(),t(".e--edit-form").on("click","a",function(o){o.preventDefault(),t(".e--edit-form").hide(),t("#tabbedBox").hide(),t("#fetchForm").fadeIn()})},fetchForm:function(){t("#fetchForm").on("submit","form",function(a){a.preventDefault(),t("p.form-missing").remove();var i=n.validate(t("#formID"));return i===!1?!1:(t("#fetchForm .b--btn").addClass("loading-animation").attr("disabled",!0).css({cursor:"default"}),void t.ajax({url:o.formURL,method:"GET",data:{formID:t("#formID").val(),branch:t("#branch").val()},success:function(o){o=JSON.parse(o);var a=t.makeArray(o);e=a[0].signup_form,n.fetchFields()},error:function(){return t("#formID").after('<p class="error form-missing">I am sorry this signup form does not exist within this branch in the Blue State Digital Tools.</p>'),t("#fetchForm .b--btn").removeClass("loading-animation").attr("disabled",!1).css({cursor:"pointer"}),!1}}))})},fieldType:function(o,e,i,n){switch(o.format){case"1":a+='<label for="'+e+'">'+o.label,(1===o.is_required||"1"===o.is_required)&&(a+="*"),a+="</label>",a+='<input class="w--input-field" type="'+i+'" name="'+e+'" '+n+' placeholder="'+o.label+'" id="'+e+'" />';break;case"2":a+='<label for="'+e+'">'+o.label,(1===o.is_required||"1"===o.is_required)&&(a+="*"),a+="</label>",a+='<textarea class="w--input-field" '+n+' name="'+e+'">'+o.label+"</textarea>";break;case"3":if("Country"===o.label)a+='<label class="visible-label" for="country">Country',(1===o.is_required||"1"===o.is_required)&&(a+="*"),a+="</label>",a+='<select  class="w--input-field" id="country" name="country"><option value=""></option><option value="AF">Afghanistan</option><option value="AL">Albania</option><option value="DZ">Algeria</option><option value="AS">American Samoa</option><option value="AD">Andorra</option><option value="AO">Angola</option><option value="AI">Anguilla</option><option value="AG">Antigua and Barbuda</option><option value="AR">Argentina</option><option value="AM">Armenia</option><option value="AW">Aruba</option><option value="AU">Australia</option><option value="AT">Austria</option><option value="AZ">Azerbaijan</option><option value="BS">Bahamas</option><option value="BH">Bahrain</option><option value="BD">Bangladesh</option><option value="BB">Barbados</option><option value="BY">Belarus</option><option value="BE">Belgium</option><option value="BZ">Belize</option><option value="BJ">Benin</option><option value="BM">Bermuda</option><option value="BT">Bhutan</option><option value="BO">Bolivia</option><option value="BA">Bosnia and Herzegovina</option><option value="BW">Botswana</option><option value="BR">Brazil</option><option value="VG">British Virgin Islands</option><option value="IO">British Indian Ocean Territory</option><option value="BN">Brunei</option><option value="BG">Bulgaria</option><option value="BF">Burkina Faso</option><option value="BI">Burundi</option><option value="KH">Cambodia</option><option value="CM">Cameroon</option><option value="CA">Canada</option><option value="CV">Cape Verde</option><option value="KY">Cayman Islands</option><option value="CF">Central African Republic</option><option value="TD">Chad</option><option value="CL">Chile</option><option value="CN">China</option><option value="CX">Christmas Island</option><option value="CO">Colombia</option><option value="KM">Comoros Islands</option><option value="CD">Congo, Democratic Republic of the</option><option value="CG">Congo, Republic of the</option><option value="CK">Cook Islands</option><option value="CR">Costa Rica</option><option value="CI">Cote D\'ivoire</option><option value="HR">Croatia</option><option value="CU">Cuba</option><option value="CY">Cyprus</option><option value="CZ">Czech Republic</option><option value="DK">Denmark</option><option value="DJ">Djibouti</option><option value="DM">Dominica</option><option value="DO">Dominican Republic</option><option value="TP">East Timor</option><option value="EC">Ecuador</option><option value="EG">Egypt</option><option value="SV">El Salvador</option><option value="GQ">Equatorial Guinea</option><option value="ER">Eritrea</option><option value="EE">Estonia</option><option value="ET">Ethiopia</option><option value="FK">Falkland Islands (Malvinas)</option><option value="FO">Faroe Islands</option><option value="FJ">Fiji</option><option value="FI">Finland</option><option value="FR">France</option><option value="GF">French Guiana</option><option value="PF">French Polynesia</option><option value="TF">French Southern Territories</option><option value="GA">Gabon</option><option value="GM">Gambia</option><option value="GE">Georgia</option><option value="DE">Germany</option><option value="GH">Ghana</option><option value="GI">Gibraltar</option><option value="GR">Greece</option><option value="GL">Greenland</option><option value="GD">Grenada</option><option value="GP">Guadeloupe</option><option value="GU">Guam</option><option value="GT">Guatemala</option><option value="GN">Guinea</option><option value="GW">Guinea-Bissau</option><option value="GY">Guyana</option><option value="HT">Haiti</option><option value="VA">Holy See (Vatican City State)</option><option value="HN">Honduras</option><option value="HK">Hong Kong</option><option value="HU">Hungary</option><option value="IS">Iceland</option><option value="IN">India</option><option value="ID">Indonesia</option><option value="IR">Iran</option><option value="IQ">Iraq</option><option value="IE">Republic of Ireland</option><option value="IL">Israel</option><option value="IT">Italy</option><option value="JM">Jamaica</option><option value="JP">Japan</option><option value="JO">Jordan</option><option value="KZ">Kazakhstan</option><option value="KE">Kenya</option><option value="KI">Kiribati</option><option value="KR">South Korea</option><option value="XK">Kosovo</option><option value="KW">Kuwait</option><option value="KG">Kyrgyzstan</option><option value="LA">Laos</option><option value="LV">Latvia</option><option value="LB">Lebanon</option><option value="LS">Lesotho</option><option value="LR">Liberia</option><option value="LY">Libya</option><option value="LI">Liechtenstein</option><option value="LT">Lithuania</option><option value="LU">Luxembourg</option><option value="MO">Macau</option><option value="MK">Macedonia</option><option value="MG">Madagascar</option><option value="MW">Malawi</option><option value="MY">Malaysia</option><option value="MV">Maldives</option><option value="ML">Mali</option><option value="MT">Malta</option><option value="MH">Marshall Islands</option><option value="MQ">Martinique</option><option value="MR">Mauritania</option><option value="MU">Mauritius</option><option value="YT">Mayotte</option><option value="MX">Mexico</option><option value="FM">Micronesia</option><option value="MD">Moldova, Republic of</option><option value="MC">Monaco</option><option value="MN">Mongolia</option><option value="ME">Montenegro</option><option value="MS">Montserrat</option><option value="MA">Morocco</option><option value="MZ">Mozambique</option><option value="MM">Myanmar</option><option value="NA">Namibia</option><option value="NR">Nauru</option><option value="NP">Nepal</option><option value="NL">Netherlands</option><option value="AN">Netherlands Antilles</option><option value="NC">New Caledonia</option><option value="NZ">New Zealand</option><option value="NI">Nicaragua</option><option value="NE">Niger</option><option value="NG">Nigeria</option><option value="NU">Niue</option><option value="NF">Norfolk Island</option><option value="MP">Northern Mariana Islands</option><option value="NO">Norway</option><option value="OM">Oman</option><option value="PK">Pakistan</option><option value="PW">Palau</option><option value="PA">Panama</option><option value="PG">Papua New Guinea</option><option value="PY">Paraguay</option><option value="PE">Peru</option><option value="PH">Philippines</option><option value="PN">Pitcairn Island</option><option value="PL">Poland</option><option value="PT">Portugal</option><option value="PR">Puerto Rico</option><option value="QA">Qatar</option><option value="RE">Reunion</option><option value="RO">Romania</option><option value="RU">Russian Federation</option><option value="RW">Rwanda</option><option value="KN">Saint Kitts and Nevis</option><option value="LC">Saint Lucia</option><option value="VC">Saint Vincent and the Grenadines</option><option value="WS">Samoa</option><option value="SM">San Marino</option><option value="ST">Sao Tome and Principe</option><option value="SA">Saudi Arabia</option><option value="SN">Senegal</option><option value="RS">Serbia</option><option value="SC">Seychelles</option><option value="SL">Sierra Leone</option><option value="SG">Singapore</option><option value="SK">Slovakia</option><option value="SI">Slovenia</option><option value="SB">Solomon Islands</option><option value="SO">Somalia</option><option value="ZA">South Africa</option><option value="SS">South Sudan</option><option value="ES">Spain</option><option value="LK">Sri Lanka</option><option value="SH">St. Helena</option><option value="PM">St. Pierre and Miquelon</option><option value="SD">Sudan</option><option value="SR">Suriname</option><option value="SY">Syria</option><option value="SZ">Swaziland</option><option value="SE">Sweden</option><option value="CH">Switzerland</option><option value="TW">Taiwan</option><option value="TJ">Tajikistan</option><option value="TZ">Tanzania</option><option value="TH">Thailand</option><option value="TG">Togo</option><option value="TK">Tokelau</option><option value="TO">Tonga</option><option value="TT">Trinidad and Tobago</option><option value="TN">Tunisia</option><option value="TR">Turkey</option><option value="TM">Turkmenistan</option><option value="TC">Turks and Caicos Islands</option><option value="TV">Tuvalu</option><option value="UG">Uganda</option><option value="UA">Ukraine</option><option value="AE">United Arab Emirates</option><option value="GB" selected="selected">United Kingdom</option><option value="US">United States</option><option value="UY">Uruguay</option><option value="UZ">Uzbekistan</option><option value="VU">Vanuatu</option><option value="VE">Venezuela</option><option value="VN">Viet Nam</option><option value="VI">Virgin Islands (U.S.)</option><option value="WF">Wallis and Futuna Islands</option><option value="EH">Western Sahara</option><option value="YE">Yemen</option><option value="ZM">Zambia</option><option value="ZW">Zimbabwe</option></select>';else{a+='<label class="visible-label" for="'+e+'">'+o.label,(1===o.is_required||"1"===o.is_required)&&(a+="*"),a+="</label>",a+="<select "+n+' class="w--input-field" name="'+e+'" id="'+e+'">';var r=o.extra_def.options;r=r.split("\r\n"),t.each(r,function(t,o){var e=o.split("|");a+=e.length>1?'<option value="'+e[0]+'">'+e[1]+"</option>":'<option value="'+e[0]+'">'+e[0]+"</option>"}),a+="</select>"}break;case"4":a+='<p class="form-radio--label">'+o.label,(1===o.is_required||"1"===o.is_required)&&(a+="*"),a+="</p>",r=o.extra_def.options,r=r.split("\r\n"),t.each(r,function(t,o){var i=o.split("|"),r="";r=i.length>1?i[1]:i[0],a+='<label class="visible-label" for="'+e+"_"+t+'">'+r+"</label>",a+='<input class="w--input-field" type="checkbox" name="'+e+'[]" '+n+' value="'+i[0]+'" id="'+e+"_"+t+'" onclick="if(this.checked) { this.form[\''+e+"["+t+"]'].value='"+r+"'; } else { this.form['"+e+"["+t+"]'].value=''; }\" />",a+='<input type="hidden" name="'+e+"["+t+']" />'});break;case"5":a+='<p class="form-radio--label">'+o.label,(1===o.is_required||"1"===o.is_required)&&(a+="*"),a+="</p>",r=o.extra_def.options,r=r.split("\r\n"),t.each(r,function(t,o){var i=o.split("|"),r="";r=i.length>1?i[1]:i[0],a+='<label class="visible-label" for="'+e+"_"+t+'">'+r+"</label>",a+='<input class="w--input-field" type="checkbox" name="'+e+'[]" '+n+' value="'+i[0]+'" id="'+e+"_"+t+'" onclick="if(this.checked) { this.form[\''+e+"["+t+"]'].value='"+r+"'; } else { this.form['"+e+"["+t+"]'].value=''; }\" />",a+='<input type="hidden" name="'+e+"["+t+']" />'});break;case"6":a+='<p class="form-field-static">'+o.extra_def.text+"</p>";break;case"7":o.extra_def.desc.length>0&&o.label!==o.extra_def.desc?(a+='<p class="checkbox-text">'+o.label,(1===o.is_required||"1"===o.is_required)&&(a+="*"),a+="</p>",a+='<label  class="visible-label" for="'+e+'">'+o.extra_def.desc+"</label>"):a+='<label  class="visible-label" for="'+e+'">'+o.label+"</label>",a+='<input class="w--input-field" type="checkbox" name="'+e+'" '+n+' value="1" id="'+e+'" />';break;case"8":a+='<label for="'+e+'">'+o.label,(1===o.is_required||"1"===o.is_required)&&(a+="*"),a+="</label>",a+='<input  class="w--input-field" type="file" name="'+e+'" '+n+' placeholder="'+o.label+'" id="'+e+'" />',a+='<p class="desc">Max upload size: '+o.extra_def.file_size+"mb ";break;case"9":a+='<label for="'+e+'">'+o.label,(1===o.is_required||"1"===o.is_required)&&(a+="*"),a+="</label>",a+='<input  class="w--input-field" type="text" name="'+e+'" '+n+' placeholder="'+o.label+'" id="'+e+'" />';break;case"10":a+='<label for="'+e+'">'+o.label+"</label>",a+='<input  class="w--input-field" type="hidden" name="'+e+'" '+n+' placeholder="'+o.label+'" id="'+e+'" />';break;default:a+='<label for="'+e+'">'+o.label,(1===o.is_required||"1"===o.is_required)&&(a+="*"),a+="</label>",a+='<input  class="w--input-field" type="'+i+'" name="'+e+'" '+n+' placeholder="'+o.label+'" id="'+e+'" />'}},buildFields:function(t){var o="text",e="",i="",r="";i="0"===t.is_custom_field?"Postal Code"===t.description?"zip":t.description.replace(/\s+/g,"").toLowerCase():"custom-"+t["@attributes"].id,"0"===t.is_shown&&(o="hidden",e=" row-hidden"),"Email"===t.description&&(o="email"),"1"===t.is_required&&(e+=" row-required",r=' data-validate="presence" requiredplaceholder data-validateMsg="Please enter a valid '+t.label+'" '),a+='<div class="form-row form-row--left '+e+'">',n.fieldType(t,i,o,r),a+="</div>"},fetchFields:function(){t.ajax({url:o.fieldsURL,method:"GET",data:{formID:t("#formID").val(),branch:t("#branch").val()},success:function(o){o=JSON.parse(o);var e=t.makeArray(o);a="",e=e[0].signup_form_field,t.each(e,function(t,o){n.buildFields(o)}),t("#customiseForm .sortable-rows").html(a),t("#fetchForm").hide(),t("#tabbedBox").fadeIn(),t(".form-id--display").html(t("#formID").val()),t(".e--edit-form").show(),t("#customiseForm .form-row").on("click",function(){t(".toggle-btn").hasClass("is-active")&&(t(this).hasClass("form-row--half")?t(this).removeClass("form-row--half"):t(this).addClass("form-row--half"))}),t("#fetchForm .b--btn").removeClass("loading-animation").attr("disabled",!1).css({cursor:"pointer"})},error:function(){}})},fieldSort:function(){t("#customiseForm .sortable-rows").sortable({revert:!0,start:function(){t(".toggle-btn").hasClass("is-active")&&(t(".toggle-btn").removeClass("is-active").text("Toggle field width"),t(".toggle-btn").parent().removeClass("row-toggled"))}}),t("#customiseForm .sortable-rows").disableSelection(),t("#customiseForm .form-row").on("mouseup",function(){return t(this).removeClass(".is-dragging"),!1}),t("#customiseForm .form-row").on("mousedown",function(){return t(this).addClass("is-dragging"),!1}),t(".toggle-btn").on("click",function(){return t(this).hasClass("is-active")?(t(this).removeClass("is-active").text("Toggle field width"),t(this).parent().removeClass("row-toggled")):(t(this).addClass("is-active").text("Confirm field width"),t(this).parent().addClass("row-toggled")),!1}),t("#customiseForm .form-row").droppable({greedy:!0,tolerance:"pointer"})},copyClipboard:function(t){var o=document.createElement("input");o.setAttribute("value",t),document.body.appendChild(o),o.select(),document.execCommand("copy"),document.body.removeChild(o)},toggleBtn:function(t,o){t.val().length>0?o.removeClass("btn-disabled"):o.addClass("btn-disabled")},formListener:function(){t("#personaliseForm form").on("submit",function(o){return o.preventDefault(),"content"!==t("#destination").val()||0!==t("#thankyouHeader").val().length&&0!==t("#thankyouContent").val().length?"url"===t("#destination").val()&&0===t("#thankyouURL").val().length?(t("#thankyouURL").after('<p class="error form-missing">Please complete the highlighted fields.</p>'),t(".required").addClass("invalid-fields"),!1):(t(".required").removeClass("invalid-fields"),t(".form-missing").remove(),n.buildEmbedCode(),t("#tabbedBox").tabs({disabled:""}),t("#tabbedBox").tabs("option","active",2),t("html, body").animate({scrollTop:0},100),!1):(t(".fieldset--submit").before('<p class="error form-missing">Please complete the highlighted fields.</p>'),t(".required").addClass("invalid-fields"),!1)}),t("#formID").blur(function(){n.toggleBtn(t("#formID"),t("#fetchForm").find('input[type="submit"]'))}),t("#formID").keydown(function(){n.toggleBtn(t("#formID"),t("#fetchForm").find('input[type="submit"]'))}),t("#customiseForm").on("submit","form",function(o){return o.preventDefault(),t("#tabbedBox").tabs("option","active",1),t("html, body").animate({scrollTop:0},100),!1}),t("#generateForm").on("click",".b--btn__submit",function(o){o.preventDefault();var e=t(this).data("copy");return n.copyClipboard(t("#"+e).val()),t(this).val("Copied to clipboard"),setTimeout(function(){t(this).val("Copy to clipboard")},5e3),!1}),t("body").on("blur",".invalid-fields",function(){t(this).length>0?t(this).removeClass("invalid-fields"):t(this).addClass("invalid-fields")})},bindUIActions:function(){t("#fetchForm").find('input[type="submit"]').addClass("btn-disabled"),t("#tabbedBox").tabs({disabled:[2]}),t(".picker").spectrum({showInput:!0,className:"full-spectrum",showInitial:!1,showPalette:!0,showSelectionPalette:!0,maxSelectionSize:10,preferredFormat:"hex",palette:[["rgb(227,6,19)","rgb(45, 53, 61)","rgb(231, 55, 85)","rgb(58, 85, 175)","rgb(76, 98, 108)"]]})}};n.init(),n.formListener(),n.fetchForm(),n.editForm(),n.personaliseForm(),n.fieldSort()}(jQuery),!function(t){"use strict";"function"==typeof define&&define.amd?define(["jquery"],t):"object"==typeof exports&&"object"==typeof module?module.exports=t:t(jQuery)}(function(t,o){"use strict";function e(o,e,a,i){for(var n=[],r=0;r<o.length;r++){var l=o[r];if(l){var s=tinycolor(l),p=s.toHsl().l<.5?"sp-thumb-el sp-thumb-dark":"sp-thumb-el sp-thumb-light";p+=tinycolor.equals(e,l)?" sp-thumb-active":"";var u=s.toString(i.preferredFormat||"rgb"),c=g?"background-color:"+s.toRgbString():"filter:"+s.toFilter();n.push('<span title="'+u+'" data-color="'+s.toRgbString()+'" class="'+p+'"><span class="sp-thumb-inner" style="'+c+';" /></span>')}else{var d="sp-clear-display";n.push(t("<div />").append(t('<span data-color="" style="background-color:transparent;" class="'+d+'"></span>').attr("title",i.noColorSelectedText)).html())}}return'<div class="sp-cf '+a+'">'+n.join("")+"</div>"}function a(){for(var t=0;t<h.length;t++)h[t]&&h[t].hide()}function i(o,e){var a=t.extend({},f,o);return a.callbacks={move:p(a.move,e),change:p(a.change,e),show:p(a.show,e),hide:p(a.hide,e),beforeShow:p(a.beforeShow,e)},a}function n(n,l){function p(){if(V.showPaletteOnly&&(V.showPalette=!0),Dt.text(V.showPaletteOnly?V.togglePaletteMoreText:V.togglePaletteLessText),V.palette){ft=V.palette.slice(0),ht=t.isArray(ft[0])?ft:[ft],vt={};for(var o=0;o<ht.length;o++)for(var e=0;e<ht[o].length;e++){var a=tinycolor(ht[o][e]).toRgbString();vt[a]=!0}}_t.toggleClass("sp-flat",Q),_t.toggleClass("sp-input-disabled",!V.showInput),_t.toggleClass("sp-alpha-enabled",V.showAlpha),_t.toggleClass("sp-clear-enabled",Jt),_t.toggleClass("sp-buttons-disabled",!V.showButtons),_t.toggleClass("sp-palette-buttons-disabled",!V.togglePaletteOnly),_t.toggleClass("sp-palette-disabled",!V.showPalette),_t.toggleClass("sp-palette-only",V.showPaletteOnly),_t.toggleClass("sp-initial-disabled",!V.showInitial),_t.addClass(V.className).addClass(V.containerClassName),O()}function f(){function o(o){return o.data&&o.data.ignore?(H(t(o.target).closest(".sp-thumb-el").data("color")),L()):(H(t(o.target).closest(".sp-thumb-el").data("color")),L(),G(!0),V.hideAfterPaletteSelect&&I()),!1}if(v&&_t.find("*:not(input)").attr("unselectable","on"),p(),jt&&kt.after(qt).hide(),Jt||Lt.hide(),Q)kt.after(_t).hide();else{var e="parent"===V.appendTo?kt.parent():t(V.appendTo);1!==e.length&&(e=t("body")),e.append(_t)}y(),zt.bind("click.spectrum touchstart.spectrum",function(o){xt||P(),o.stopPropagation(),t(o.target).is("input")||o.preventDefault()}),(kt.is(":disabled")||V.disabled===!0)&&K(),_t.click(s),Rt.change(M),Rt.bind("paste",function(){setTimeout(M,1)}),Rt.keydown(function(t){13===t.keyCode&&M()}),Nt.text(V.cancelText),Nt.bind("click.spectrum",function(t){t.stopPropagation(),t.preventDefault(),R(),I()}),Lt.attr("title",V.clearText),Lt.bind("click.spectrum",function(t){t.stopPropagation(),t.preventDefault(),Yt=!0,L(),Q&&G(!0)}),Et.text(V.chooseText),Et.bind("click.spectrum",function(t){t.stopPropagation(),t.preventDefault(),v&&Rt.is(":focus")&&Rt.trigger("change"),N()&&(G(!0),I())}),Dt.text(V.showPaletteOnly?V.togglePaletteMoreText:V.togglePaletteLessText),Dt.bind("click.spectrum",function(t){t.stopPropagation(),t.preventDefault(),V.showPaletteOnly=!V.showPaletteOnly,V.showPaletteOnly||Q||_t.css("left","-="+(Ct.outerWidth(!0)+5)),p()}),u(Tt,function(t,o,e){dt=t/rt,Yt=!1,e.shiftKey&&(dt=Math.round(10*dt)/10),L()},C,S),u(Pt,function(t,o){pt=parseFloat(o/it),Yt=!1,V.showAlpha||(dt=1),L()},C,S),u(St,function(t,o,e){if(e.shiftKey){if(!yt){var a=ut*ot,i=et-ct*et,n=Math.abs(t-a)>Math.abs(o-i);yt=n?"x":"y"}}else yt=null;var r=!yt||"x"===yt,l=!yt||"y"===yt;r&&(ut=parseFloat(t/ot)),l&&(ct=parseFloat((et-o)/et)),Yt=!1,V.showAlpha||(dt=1),L()},C,S),Ut?(H(Ut),E(),Wt=Qt||tinycolor(Ut).format,w(Ut)):E(),Q&&A();var a=v?"mousedown.spectrum":"click.spectrum touchstart.spectrum";Ht.delegate(".sp-thumb-el",a,o),Bt.delegate(".sp-thumb-el:nth-child(1)",a,{ignore:!0},o)}function y(){if(Z&&window.localStorage){try{var o=window.localStorage[Z].split(",#");o.length>1&&(delete window.localStorage[Z],t.each(o,function(t,o){w(o)}))}catch(e){}try{gt=window.localStorage[Z].split(";")}catch(e){}}}function w(o){if(W){var e=tinycolor(o).toRgbString();if(!vt[e]&&-1===t.inArray(e,gt))for(gt.push(e);gt.length>bt;)gt.shift();if(Z&&window.localStorage)try{window.localStorage[Z]=gt.join(";")}catch(a){}}}function k(){var t=[];if(V.showPalette)for(var o=0;o<gt.length;o++){var e=tinycolor(gt[o]).toRgbString();vt[e]||t.push(gt[o])}return t.reverse().slice(0,V.maxSelectionSize)}function x(){var o=B(),a=t.map(ht,function(t,a){return e(t,o,"sp-palette-row sp-palette-row-"+a,V)});y(),gt&&a.push(e(k(),o,"sp-palette-row sp-palette-row-selection",V)),Ht.html(a.join(""))}function _(){if(V.showInitial){var t=Vt,o=B();Bt.html(e([t,o],o,"sp-palette-row-initial",V))}}function C(){(0>=et||0>=ot||0>=it)&&O(),tt=!0,_t.addClass(mt),yt=null,kt.trigger("dragstart.spectrum",[B()])}function S(){tt=!1,_t.removeClass(mt),kt.trigger("dragstop.spectrum",[B()])}function M(){var t=Rt.val();if(null!==t&&""!==t||!Jt){var o=tinycolor(t);o.isValid()?(H(o),G(!0)):Rt.addClass("sp-validation-error")}else H(null),G(!0)}function P(){X?I():A()}function A(){var o=t.Event("beforeShow.spectrum");return X?void O():(kt.trigger(o,[B()]),void(J.beforeShow(B())===!1||o.isDefaultPrevented()||(a(),X=!0,t(wt).bind("keydown.spectrum",F),t(wt).bind("click.spectrum",T),t(window).bind("resize.spectrum",$),qt.addClass("sp-active"),_t.removeClass("sp-hidden"),O(),E(),Vt=B(),_(),J.show(Vt),kt.trigger("show.spectrum",[Vt]))))}function F(t){27===t.keyCode&&I()}function T(t){2!==t.button&&(tt||(Zt?G(!0):R(),I()))}function I(){X&&!Q&&(X=!1,t(wt).unbind("keydown.spectrum",F),t(wt).unbind("click.spectrum",T),t(window).unbind("resize.spectrum",$),qt.removeClass("sp-active"),_t.addClass("sp-hidden"),J.hide(B()),kt.trigger("hide.spectrum",[B()]))}function R(){H(Vt,!0)}function H(t,o){if(tinycolor.equals(t,B()))return void E();var e,a;!t&&Jt?Yt=!0:(Yt=!1,e=tinycolor(t),a=e.toHsv(),pt=a.h%360/360,ut=a.s,ct=a.v,dt=a.a),E(),e&&e.isValid()&&!o&&(Wt=Qt||e.getFormat())}function B(t){return t=t||{},Jt&&Yt?null:tinycolor.fromRatio({h:pt,s:ut,v:ct,a:Math.round(100*dt)/100},{format:t.format||Wt})}function N(){return!Rt.hasClass("sp-validation-error")}function L(){E(),J.move(B()),kt.trigger("move.spectrum",[B()])}function E(){Rt.removeClass("sp-validation-error"),D();var t=tinycolor.fromRatio({h:pt,s:1,v:1});St.css("background-color",t.toHexString());var o=Wt;1>dt&&(0!==dt||"name"!==o)&&("hex"===o||"hex3"===o||"hex6"===o||"name"===o)&&(o="rgb");var e=B({format:o}),a="";if(Kt.removeClass("sp-clear-display"),Kt.css("background-color","transparent"),!e&&Jt)Kt.addClass("sp-clear-display");else{var i=e.toHexString(),n=e.toRgbString();if(g||1===e.alpha?Kt.css("background-color",n):(Kt.css("background-color","transparent"),Kt.css("filter",e.toFilter())),V.showAlpha){var r=e.toRgb();r.a=0;var l=tinycolor(r).toRgbString(),s="linear-gradient(left, "+l+", "+i+")";v?Ft.css("filter",tinycolor(l).toFilter({gradientType:1},i)):(Ft.css("background","-webkit-"+s),Ft.css("background","-moz-"+s),Ft.css("background","-ms-"+s),Ft.css("background","linear-gradient(to right, "+l+", "+i+")"))}a=e.toString(o)}V.showInput&&Rt.val(a),V.showPalette&&x(),_()}function D(){var t=ut,o=ct;if(Jt&&Yt)It.hide(),At.hide(),Mt.hide();else{It.show(),At.show(),Mt.show();var e=t*ot,a=et-o*et;e=Math.max(-at,Math.min(ot-at,e-at)),a=Math.max(-at,Math.min(et-at,a-at)),Mt.css({top:a+"px",left:e+"px"});var i=dt*rt;It.css({left:i-lt/2+"px"});var n=pt*it;At.css({top:n-st+"px"})}}function G(t){var o=B(),e="",a=!tinycolor.equals(o,Vt);o&&(e=o.toString(Wt),w(o)),Gt&&kt.val(e),t&&a&&(J.change(o),kt.trigger("change",[o]))}function O(){ot=St.width(),et=St.height(),at=Mt.height(),nt=Pt.width(),it=Pt.height(),st=At.height(),rt=Tt.width(),lt=It.width(),Q||(_t.css("position","absolute"),V.offset?_t.offset(V.offset):_t.offset(r(_t,zt))),D(),V.showPalette&&x(),kt.trigger("reflow.spectrum")}function j(){kt.show(),zt.unbind("click.spectrum touchstart.spectrum"),_t.remove(),qt.remove(),h[$t.id]=null}function q(e,a){return e===o?t.extend({},V):a===o?V[e]:(V[e]=a,void p())}function z(){xt=!1,kt.attr("disabled",!1),zt.removeClass("sp-disabled")}function K(){I(),xt=!0,kt.attr("disabled",!0),zt.addClass("sp-disabled")}function U(t){V.offset=t,O()}var V=i(l,n),Q=V.flat,W=V.showSelectionPalette,Z=V.localStorageKey,Y=V.theme,J=V.callbacks,$=c(O,10),X=!1,tt=!1,ot=0,et=0,at=0,it=0,nt=0,rt=0,lt=0,st=0,pt=0,ut=0,ct=0,dt=1,ft=[],ht=[],vt={},gt=V.selectionPalette.slice(0),bt=V.maxSelectionSize,mt="sp-dragging",yt=null,wt=n.ownerDocument,kt=(wt.body,t(n)),xt=!1,_t=t(m,wt).addClass(Y),Ct=_t.find(".sp-picker-container"),St=_t.find(".sp-color"),Mt=_t.find(".sp-dragger"),Pt=_t.find(".sp-hue"),At=_t.find(".sp-slider"),Ft=_t.find(".sp-alpha-inner"),Tt=_t.find(".sp-alpha"),It=_t.find(".sp-alpha-handle"),Rt=_t.find(".sp-input"),Ht=_t.find(".sp-palette"),Bt=_t.find(".sp-initial"),Nt=_t.find(".sp-cancel"),Lt=_t.find(".sp-clear"),Et=_t.find(".sp-choose"),Dt=_t.find(".sp-palette-toggle"),Gt=kt.is("input"),Ot=Gt&&"color"===kt.attr("type")&&d(),jt=Gt&&!Q,qt=jt?t(b).addClass(Y).addClass(V.className).addClass(V.replacerClassName):t([]),zt=jt?qt:kt,Kt=qt.find(".sp-preview-inner"),Ut=V.color||Gt&&kt.val(),Vt=!1,Qt=V.preferredFormat,Wt=Qt,Zt=!V.showButtons||V.clickoutFiresChange,Yt=!Ut,Jt=V.allowEmpty&&!Ot;f();var $t={show:A,hide:I,toggle:P,reflow:O,option:q,enable:z,disable:K,offset:U,set:function(t){H(t),G()},get:B,destroy:j,container:_t};return $t.id=h.push($t)-1,$t}function r(o,e){var a=0,i=o.outerWidth(),n=o.outerHeight(),r=e.outerHeight(),l=o[0].ownerDocument,s=l.documentElement,p=s.clientWidth+t(l).scrollLeft(),u=s.clientHeight+t(l).scrollTop(),c=e.offset();return c.top+=r,c.left-=Math.min(c.left,c.left+i>p&&p>i?Math.abs(c.left+i-p):0),c.top-=Math.min(c.top,c.top+n>u&&u>n?Math.abs(n+r-a):a),c}function l(){}function s(t){t.stopPropagation()}function p(t,o){var e=Array.prototype.slice,a=e.call(arguments,2);return function(){return t.apply(o,a.concat(e.call(arguments)))}}function u(o,e,a,i){function n(t){t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault(),t.returnValue=!1}function r(t){if(u){if(v&&p.documentMode<9&&!t.button)return s();var a=t.originalEvent&&t.originalEvent.touches&&t.originalEvent.touches[0],i=a&&a.pageX||t.pageX,r=a&&a.pageY||t.pageY,l=Math.max(0,Math.min(i-c.left,f)),g=Math.max(0,Math.min(r-c.top,d));h&&n(t),e.apply(o,[l,g,t])}}function l(e){var i=e.which?3===e.which:2===e.button;i||u||a.apply(o,arguments)!==!1&&(u=!0,d=t(o).height(),f=t(o).width(),c=t(o).offset(),t(p).bind(g),t(p.body).addClass("sp-dragging"),r(e),n(e))}function s(){u&&(t(p).unbind(g),t(p.body).removeClass("sp-dragging"),setTimeout(function(){i.apply(o,arguments)},0)),u=!1}e=e||function(){},a=a||function(){},i=i||function(){};var p=document,u=!1,c={},d=0,f=0,h="ontouchstart"in window,g={};g.selectstart=n,g.dragstart=n,g["touchmove mousemove"]=r,g["touchend mouseup"]=s,t(o).bind("touchstart mousedown",l)}function c(t,o,e){var a;return function(){var i=this,n=arguments,r=function(){a=null,t.apply(i,n)};e&&clearTimeout(a),(e||!a)&&(a=setTimeout(r,o))}}function d(){
return t.fn.spectrum.inputTypeColorSupport()}var f={beforeShow:l,move:l,change:l,show:l,hide:l,color:!1,flat:!1,showInput:!0,allowEmpty:!0,showButtons:!0,clickoutFiresChange:!0,showInitial:!0,showPalette:!1,showPaletteOnly:!1,hideAfterPaletteSelect:!1,togglePaletteOnly:!1,showSelectionPalette:!0,localStorageKey:!1,appendTo:"body",maxSelectionSize:7,cancelText:"cancel",chooseText:"choose",togglePaletteMoreText:"more",togglePaletteLessText:"less",clearText:"Clear Color Selection",noColorSelectedText:"No Color Selected",preferredFormat:!1,className:"",containerClassName:"",replacerClassName:"",showAlpha:!1,theme:"sp-light",palette:[["#ffffff","#000000","#ff0000","#ff8000","#ffff00","#008000","#0000ff","#4b0082","#9400d3","#fff"]],selectionPalette:[],disabled:!1,offset:null},h=[],v=!!/msie/i.exec(window.navigator.userAgent),g=function(){function t(t,o){return!!~(""+t).indexOf(o)}var o=document.createElement("div"),e=o.style;return e.cssText="background-color:rgba(0,0,0,.5)",t(e.backgroundColor,"rgba")||t(e.backgroundColor,"hsla")}(),b=['<div class="sp-replacer">','<div class="sp-preview"><div class="sp-preview-inner"></div></div>','<div class="sp-dd">&#9660;</div>',"</div>"].join(""),m=function(){var t="";if(v)for(var o=1;6>=o;o++)t+='<div class="sp-'+o+'""></div>';return['<div class="sp-container sp-hidden">','<div class="sp-palette-container">','<div class="sp-palette sp-thumb sp-cf"></div>','<div class="sp-palette-button-container sp-cf">','<button type="button" class="sp-palette-toggle"></button>',"</div>","</div>",'<div class="sp-picker-container">','<div class="sp-top sp-cf">','<div class="sp-fill"></div>','<div class="sp-top-inner">','<div class="sp-color">','<div class="sp-sat">','<div class="sp-val">','<div class="sp-dragger"></div>',"</div>","</div>","</div>",'<div class="sp-clear sp-clear-display">',"</div>",'<div class="sp-hue">','<div class="sp-slider"></div>',t,"</div>","</div>",'<div class="sp-alpha"><div class="sp-alpha-inner"><div class="sp-alpha-handle"></div></div></div>',"</div>",'<div class="sp-input-container sp-cf">','<input class="sp-input" type="text" spellcheck="false"  />',"</div>",'<div class="sp-initial sp-thumb sp-cf"></div>','<div class="sp-button-container sp-cf">','<a class="sp-cancel" href="#"></a>','<button type="button" class="sp-choose"></button>',"</div>","</div>","</div>"].join("")}(),y="spectrum.id";t.fn.spectrum=function(o,e){if("string"==typeof o){var a=this,i=Array.prototype.slice.call(arguments,1);return this.each(function(){var e=h[t(this).data(y)];if(e){var n=e[o];if(!n)throw new Error('Spectrum: no such method: "'+o+'"');"get"===o?a=e.get():"container"===o?a=e.container:"option"===o?a=e.option.apply(e,i):"destroy"===o?(e.destroy(),t(this).removeData(y)):n.apply(e,i)}}),a}return this.spectrum("destroy").each(function(){var e=t.extend({},o,t(this).data()),a=n(this,e);t(this).data(y,a.id)})},t.fn.spectrum.load=!0,t.fn.spectrum.loadOpts={},t.fn.spectrum.draggable=u,t.fn.spectrum.defaults=f,t.fn.spectrum.inputTypeColorSupport=function w(){if("undefined"==typeof w._cachedResult){var o=t('<input type="color"/>')[0];w._cachedResult="color"===o.type&&""!==o.value}return w._cachedResult},t.spectrum={},t.spectrum.localization={},t.spectrum.palettes={},t.fn.spectrum.processNativeColorInputs=function(){var o=t("input[type=color]");o.length&&!d()&&o.spectrum({preferredFormat:"hex6"})},function(){function t(t){var e={r:0,g:0,b:0},i=1,r=!1,l=!1;return"string"==typeof t&&(t=R(t)),"object"==typeof t&&(t.hasOwnProperty("r")&&t.hasOwnProperty("g")&&t.hasOwnProperty("b")?(e=o(t.r,t.g,t.b),r=!0,l="%"===String(t.r).substr(-1)?"prgb":"rgb"):t.hasOwnProperty("h")&&t.hasOwnProperty("s")&&t.hasOwnProperty("v")?(t.s=F(t.s),t.v=F(t.v),e=n(t.h,t.s,t.v),r=!0,l="hsv"):t.hasOwnProperty("h")&&t.hasOwnProperty("s")&&t.hasOwnProperty("l")&&(t.s=F(t.s),t.l=F(t.l),e=a(t.h,t.s,t.l),r=!0,l="hsl"),t.hasOwnProperty("a")&&(i=t.a)),i=x(i),{ok:r,format:t.format||l,r:D(255,G(e.r,0)),g:D(255,G(e.g,0)),b:D(255,G(e.b,0)),a:i}}function o(t,o,e){return{r:255*_(t,255),g:255*_(o,255),b:255*_(e,255)}}function e(t,o,e){t=_(t,255),o=_(o,255),e=_(e,255);var a,i,n=G(t,o,e),r=D(t,o,e),l=(n+r)/2;if(n===r)a=i=0;else{var s=n-r;switch(i=l>.5?s/(2-n-r):s/(n+r),n){case t:a=(o-e)/s+(e>o?6:0);break;case o:a=(e-t)/s+2;break;case e:a=(t-o)/s+4}a/=6}return{h:a,s:i,l:l}}function a(t,o,e){function a(t,o,e){return 0>e&&(e+=1),e>1&&(e-=1),1/6>e?t+6*(o-t)*e:.5>e?o:2/3>e?t+(o-t)*(2/3-e)*6:t}var i,n,r;if(t=_(t,360),o=_(o,100),e=_(e,100),0===o)i=n=r=e;else{var l=.5>e?e*(1+o):e+o-e*o,s=2*e-l;i=a(s,l,t+1/3),n=a(s,l,t),r=a(s,l,t-1/3)}return{r:255*i,g:255*n,b:255*r}}function i(t,o,e){t=_(t,255),o=_(o,255),e=_(e,255);var a,i,n=G(t,o,e),r=D(t,o,e),l=n,s=n-r;if(i=0===n?0:s/n,n===r)a=0;else{switch(n){case t:a=(o-e)/s+(e>o?6:0);break;case o:a=(e-t)/s+2;break;case e:a=(t-o)/s+4}a/=6}return{h:a,s:i,v:l}}function n(t,o,e){t=6*_(t,360),o=_(o,100),e=_(e,100);var a=L.floor(t),i=t-a,n=e*(1-o),r=e*(1-i*o),l=e*(1-(1-i)*o),s=a%6,p=[e,r,n,n,l,e][s],u=[l,e,e,r,n,n][s],c=[n,n,l,e,e,r][s];return{r:255*p,g:255*u,b:255*c}}function r(t,o,e,a){var i=[A(E(t).toString(16)),A(E(o).toString(16)),A(E(e).toString(16))];return a&&i[0].charAt(0)===i[0].charAt(1)&&i[1].charAt(0)===i[1].charAt(1)&&i[2].charAt(0)===i[2].charAt(1)?i[0].charAt(0)+i[1].charAt(0)+i[2].charAt(0):i.join("")}function l(t,o,e,a){var i=[A(T(a)),A(E(t).toString(16)),A(E(o).toString(16)),A(E(e).toString(16))];return i.join("")}function s(t,o){o=0===o?0:o||10;var e=j(t).toHsl();return e.s-=o/100,e.s=C(e.s),j(e)}function p(t,o){o=0===o?0:o||10;var e=j(t).toHsl();return e.s+=o/100,e.s=C(e.s),j(e)}function u(t){return j(t).desaturate(100)}function c(t,o){o=0===o?0:o||10;var e=j(t).toHsl();return e.l+=o/100,e.l=C(e.l),j(e)}function d(t,o){o=0===o?0:o||10;var e=j(t).toRgb();return e.r=G(0,D(255,e.r-E(255*-(o/100)))),e.g=G(0,D(255,e.g-E(255*-(o/100)))),e.b=G(0,D(255,e.b-E(255*-(o/100)))),j(e)}function f(t,o){o=0===o?0:o||10;var e=j(t).toHsl();return e.l-=o/100,e.l=C(e.l),j(e)}function h(t,o){var e=j(t).toHsl(),a=(E(e.h)+o)%360;return e.h=0>a?360+a:a,j(e)}function v(t){var o=j(t).toHsl();return o.h=(o.h+180)%360,j(o)}function g(t){var o=j(t).toHsl(),e=o.h;return[j(t),j({h:(e+120)%360,s:o.s,l:o.l}),j({h:(e+240)%360,s:o.s,l:o.l})]}function b(t){var o=j(t).toHsl(),e=o.h;return[j(t),j({h:(e+90)%360,s:o.s,l:o.l}),j({h:(e+180)%360,s:o.s,l:o.l}),j({h:(e+270)%360,s:o.s,l:o.l})]}function m(t){var o=j(t).toHsl(),e=o.h;return[j(t),j({h:(e+72)%360,s:o.s,l:o.l}),j({h:(e+216)%360,s:o.s,l:o.l})]}function y(t,o,e){o=o||6,e=e||30;var a=j(t).toHsl(),i=360/e,n=[j(t)];for(a.h=(a.h-(i*o>>1)+720)%360;--o;)a.h=(a.h+i)%360,n.push(j(a));return n}function w(t,o){o=o||6;for(var e=j(t).toHsv(),a=e.h,i=e.s,n=e.v,r=[],l=1/o;o--;)r.push(j({h:a,s:i,v:n})),n=(n+l)%1;return r}function k(t){var o={};for(var e in t)t.hasOwnProperty(e)&&(o[t[e]]=e);return o}function x(t){return t=parseFloat(t),(isNaN(t)||0>t||t>1)&&(t=1),t}function _(t,o){M(t)&&(t="100%");var e=P(t);return t=D(o,G(0,parseFloat(t))),e&&(t=parseInt(t*o,10)/100),L.abs(t-o)<1e-6?1:t%o/parseFloat(o)}function C(t){return D(1,G(0,t))}function S(t){return parseInt(t,16)}function M(t){return"string"==typeof t&&-1!=t.indexOf(".")&&1===parseFloat(t)}function P(t){return"string"==typeof t&&-1!=t.indexOf("%")}function A(t){return 1===t.length?"0"+t:""+t}function F(t){return 1>=t&&(t=100*t+"%"),t}function T(t){return Math.round(255*parseFloat(t)).toString(16)}function I(t){return S(t)/255}function R(t){t=t.replace(H,"").replace(B,"").toLowerCase();var o=!1;if(q[t])t=q[t],o=!0;else if("transparent"===t)return{r:0,g:0,b:0,a:0,format:"name"};var e;return(e=K.rgb.exec(t))?{r:e[1],g:e[2],b:e[3]}:(e=K.rgba.exec(t))?{r:e[1],g:e[2],b:e[3],a:e[4]}:(e=K.hsl.exec(t))?{h:e[1],s:e[2],l:e[3]}:(e=K.hsla.exec(t))?{h:e[1],s:e[2],l:e[3],a:e[4]}:(e=K.hsv.exec(t))?{h:e[1],s:e[2],v:e[3]}:(e=K.hsva.exec(t))?{h:e[1],s:e[2],v:e[3],a:e[4]}:(e=K.hex8.exec(t))?{a:I(e[1]),r:S(e[2]),g:S(e[3]),b:S(e[4]),format:o?"name":"hex8"}:(e=K.hex6.exec(t))?{r:S(e[1]),g:S(e[2]),b:S(e[3]),format:o?"name":"hex"}:(e=K.hex3.exec(t))?{r:S(e[1]+""+e[1]),g:S(e[2]+""+e[2]),b:S(e[3]+""+e[3]),format:o?"name":"hex"}:!1}var H=/^[\s,#]+/,B=/\s+$/,N=0,L=Math,E=L.round,D=L.min,G=L.max,O=L.random,j=function(o,e){if(o=o?o:"",e=e||{},o instanceof j)return o;if(!(this instanceof j))return new j(o,e);var a=t(o);this._originalInput=o,this._r=a.r,this._g=a.g,this._b=a.b,this._a=a.a,this._roundA=E(100*this._a)/100,this._format=e.format||a.format,this._gradientType=e.gradientType,this._r<1&&(this._r=E(this._r)),this._g<1&&(this._g=E(this._g)),this._b<1&&(this._b=E(this._b)),this._ok=a.ok,this._tc_id=N++};j.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var t=this.toRgb();return(299*t.r+587*t.g+114*t.b)/1e3},setAlpha:function(t){return this._a=x(t),this._roundA=E(100*this._a)/100,this},toHsv:function(){var t=i(this._r,this._g,this._b);return{h:360*t.h,s:t.s,v:t.v,a:this._a}},toHsvString:function(){var t=i(this._r,this._g,this._b),o=E(360*t.h),e=E(100*t.s),a=E(100*t.v);return 1===this._a?"hsv("+o+", "+e+"%, "+a+"%)":"hsva("+o+", "+e+"%, "+a+"%, "+this._roundA+")"},toHsl:function(){var t=e(this._r,this._g,this._b);return{h:360*t.h,s:t.s,l:t.l,a:this._a}},toHslString:function(){var t=e(this._r,this._g,this._b),o=E(360*t.h),a=E(100*t.s),i=E(100*t.l);return 1===this._a?"hsl("+o+", "+a+"%, "+i+"%)":"hsla("+o+", "+a+"%, "+i+"%, "+this._roundA+")"},toHex:function(t){return r(this._r,this._g,this._b,t)},toHexString:function(t){return"#"+this.toHex(t)},toHex8:function(){return l(this._r,this._g,this._b,this._a)},toHex8String:function(){return"#"+this.toHex8()},toRgb:function(){return{r:E(this._r),g:E(this._g),b:E(this._b),a:this._a}},toRgbString:function(){return 1===this._a?"rgb("+E(this._r)+", "+E(this._g)+", "+E(this._b)+")":"rgba("+E(this._r)+", "+E(this._g)+", "+E(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:E(100*_(this._r,255))+"%",g:E(100*_(this._g,255))+"%",b:E(100*_(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1===this._a?"rgb("+E(100*_(this._r,255))+"%, "+E(100*_(this._g,255))+"%, "+E(100*_(this._b,255))+"%)":"rgba("+E(100*_(this._r,255))+"%, "+E(100*_(this._g,255))+"%, "+E(100*_(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":this._a<1?!1:z[r(this._r,this._g,this._b,!0)]||!1},toFilter:function(t){var o="#"+l(this._r,this._g,this._b,this._a),e=o,a=this._gradientType?"GradientType = 1, ":"";if(t){var i=j(t);e=i.toHex8String()}return"progid:DXImageTransform.Microsoft.gradient("+a+"startColorstr="+o+",endColorstr="+e+")"},toString:function(t){var o=!!t;t=t||this._format;var e=!1,a=this._a<1&&this._a>=0,i=!o&&a&&("hex"===t||"hex6"===t||"hex3"===t||"name"===t);return i?"name"===t&&0===this._a?this.toName():this.toRgbString():("rgb"===t&&(e=this.toRgbString()),"prgb"===t&&(e=this.toPercentageRgbString()),("hex"===t||"hex6"===t)&&(e=this.toHexString()),"hex3"===t&&(e=this.toHexString(!0)),"hex8"===t&&(e=this.toHex8String()),"name"===t&&(e=this.toName()),"hsl"===t&&(e=this.toHslString()),"hsv"===t&&(e=this.toHsvString()),e||this.toHexString())},_applyModification:function(t,o){var e=t.apply(null,[this].concat([].slice.call(o)));return this._r=e._r,this._g=e._g,this._b=e._b,this.setAlpha(e._a),this},lighten:function(){return this._applyModification(c,arguments)},brighten:function(){return this._applyModification(d,arguments)},darken:function(){return this._applyModification(f,arguments)},desaturate:function(){return this._applyModification(s,arguments)},saturate:function(){return this._applyModification(p,arguments)},greyscale:function(){return this._applyModification(u,arguments)},spin:function(){return this._applyModification(h,arguments)},_applyCombination:function(t,o){return t.apply(null,[this].concat([].slice.call(o)))},analogous:function(){return this._applyCombination(y,arguments)},complement:function(){return this._applyCombination(v,arguments)},monochromatic:function(){return this._applyCombination(w,arguments)},splitcomplement:function(){return this._applyCombination(m,arguments)},triad:function(){return this._applyCombination(g,arguments)},tetrad:function(){return this._applyCombination(b,arguments)}},j.fromRatio=function(t,o){if("object"==typeof t){var e={};for(var a in t)t.hasOwnProperty(a)&&("a"===a?e[a]=t[a]:e[a]=F(t[a]));t=e}return j(t,o)},j.equals=function(t,o){return t&&o?j(t).toRgbString()===j(o).toRgbString():!1},j.random=function(){return j.fromRatio({r:O(),g:O(),b:O()})},j.mix=function(t,o,e){e=0===e?0:e||50;var a,i=j(t).toRgb(),n=j(o).toRgb(),r=e/100,l=2*r-1,s=n.a-i.a;a=l*s===-1?l:(l+s)/(1+l*s),a=(a+1)/2;var p=1-a,u={r:n.r*a+i.r*p,g:n.g*a+i.g*p,b:n.b*a+i.b*p,a:n.a*r+i.a*(1-r)};return j(u)},j.readability=function(t,o){var e=j(t),a=j(o),i=e.toRgb(),n=a.toRgb(),r=e.getBrightness(),l=a.getBrightness(),s=Math.max(i.r,n.r)-Math.min(i.r,n.r)+Math.max(i.g,n.g)-Math.min(i.g,n.g)+Math.max(i.b,n.b)-Math.min(i.b,n.b);return{brightness:Math.abs(r-l),color:s}},j.isReadable=function(t,o){var e=j.readability(t,o);return e.brightness>125&&e.color>500},j.mostReadable=function(t,o){for(var e=null,a=0,i=!1,n=0;n<o.length;n++){var r=j.readability(t,o[n]),l=r.brightness>125&&r.color>500,s=3*(r.brightness/125)+r.color/500;(l&&!i||l&&i&&s>a||!l&&!i&&s>a)&&(i=l,a=s,e=j(o[n]))}return e};var q=j.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},z=j.hexNames=k(q),K=function(){var t="[-\\+]?\\d+%?",o="[-\\+]?\\d*\\.\\d+%?",e="(?:"+o+")|(?:"+t+")",a="[\\s|\\(]+("+e+")[,|\\s]+("+e+")[,|\\s]+("+e+")\\s*\\)?",i="[\\s|\\(]+("+e+")[,|\\s]+("+e+")[,|\\s]+("+e+")[,|\\s]+("+e+")\\s*\\)?";return{rgb:new RegExp("rgb"+a),rgba:new RegExp("rgba"+i),hsl:new RegExp("hsl"+a),hsla:new RegExp("hsla"+i),hsv:new RegExp("hsv"+a),hsva:new RegExp("hsva"+i),hex3:/^([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex8:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();window.tinycolor=j}(),t(function(){t.fn.spectrum.load&&t.fn.spectrum.processNativeColorInputs()})}),function(t){"use strict";var o,e,a,i="",n={settings:{formURL:"/form.php",fieldsURL:"/fields.php"},init:function(){o=this.settings,n.bindUIActions()},validate:function(o){var e=0,a="";return t(".form-error").remove(),o.data("validate").indexOf("presence")>=0&&(o.val()||(e=1,a='<p class="error">'+o.data("validatemsg")+"</p>")),o.data("validate").indexOf("numeric")>=0&&(t.isNumeric(o.val())||(e=1,a='<p class="error form-error">'+o.data("validatemsg")+"</p>")),e>0?(o.after(a),!1):!0},personaliseForm:function(){t("#personaliseForm .hide-row").hide(),t("#destination").on("change",function(){"content"===t(this).val()?(t(".hide-row").show(),t(".thankyouurl-row").hide()):(t(".thankyouurl-row").show(),t(".hide-row").hide())})},thankyouCode:function(){var o=encodeURIComponent(t("#shareTweet").val().trim()),e='<h2 class="thankyou-header">'+t("#thankyouHeader").val()+'</h2><div class="thankyou-content">'+t("#thankyouContent").val()+"</div>";if(t("#formEntry").is(":checked"))var a='<div class="form-post"><p>Thank you for submitting the following information:</p></div>';var i='<div class="share-content"><img src="'+t("#shareImg").val()+'" alt="share this page" /><div class="social-share"><a href="https://www.facebook.com/sharer/sharer.php?u='+t("#sharePage").val()+'" class="fb-btn">Share on Facebook</a><a href="https://twitter.com/home?status='+o+'" class="tw-btn">Share on Twitter</a></div></div>';return e+a+i},buildEmbedCode:function(){var o=0,a=0,r=0,l=0;t("#paddingVertical").val().length>0&&(a=t("#paddingVertical").val()),t("#paddingHoriz").val().length>0&&(o=t("#paddingHoriz").val()),t("#marginVertical").val().length>0&&(l=t("#marginVertical").val()),t("#marginHoriz").val().length>0&&(r=t("#marginHoriz").val());var s=a+" "+o,p=l+" "+r,u='<style type="text/css">';t("#linkColour").val().length>0&&(u+=".signup-wrapper a { color: "+t("#linkColour").val()+"  }"),t("#textColour").val().length>0&&(u+=".signup-wrapper { color: "+t("#textColour").val()+"  }"),t("#bgImg").val().length>0&&(u+=".signup-wrapper { background: url("+t("#bgImg").val()+") no-repeat "+t("#bgColour").val()+"; background-size:cover;  }"),u+=" .fb-btn {  background-color: #2b4170; /* fallback color */  background: -moz-linear-gradient(top, #3b5998, #2b4170);  background: -ms-linear-gradient(top, #3b5998, #2b4170);  background: -webkit-linear-gradient(top, #3b5998, #2b4170);  border: 1px solid #2b4170;  text-shadow: 0 -1px -1px #1f2f52;} .fb-btn:hover {  background-color: #3b5998; /* fallback color */   background: -moz-linear-gradient(top, #2b4170, #3b5998);  background: -ms-linear-gradient(top, #2b4170, #3b5998);   background: -webkit-linear-gradient(top, #2b4170, #3b5998);}",u+=" .tw-btn {  background-color: #0081ce; /* fallback color */  background: -moz-linear-gradient(top, #00aced, #0081ce);  background: -ms-linear-gradient(top, #00aced, #0081ce);  background: -webkit-linear-gradient(top, #00aced, #0081ce); border: 1px solid #0081ce;  text-shadow: 0 -1px -1px #005ea3;} .tw-btn:hover { background-color: #00aced; /* fallback color */  background: -moz-linear-gradient(top, #0081ce, #00aced);  background: -ms-linear-gradient(top, #0081ce, #00aced);  background: -webkit-linear-gradient(top, #0081ce, #00aced); } .tw-btn, .fb-btn {  border-radius: 3px;  box-shadow: 0 1px 1px #999;  color: #fff;  display: inline-block;  font-size: 16px;  margin: 0 20px 20px 0;  margin: 0 1rem 2rem 0;  padding: 10px 15px;  padding: 1rem 1.5rem;  text-align: center;  width: 140px;}",u+=' body .signup-wrapper label.visible-label {display:inline-block; padding-right: 10px;}  body .signup-wrapper label {display:none;} .form-row--half input:not([type="submit"]):not([type="radio"]):not([type="checkbox"]), .form-row--half select { width:80%; box-sizing:border-box; } .row-hidden { display:none!important; } .form-row--half { display: inline;  float: left;  width: 47.5609756098%;  margin: 0 1.2195121951%; } .signup-wrapper input:not([type=submit]), .signup-wrapper textarea, .signup-wrapper select, .signup-wrapper label, .signup-wrapper .form-radio--label, .signup-wrapper .form-field-static, .signup-wrapper .form-radio--label { padding: '+s+"; width:85%; margin: "+p+"; } .b--btn.b--btn__submit { box-shadow:0px 2px #a6132c; background-color: #e83755;  border-right-color: #bd1632; width:auto; padding: 12px 60px 12px 25px; color: #ffffff; font-size: 14px; } .signup-wrapper input([type=checkbox]), .signup-wrapper input([type=radio]) { width:auto; } </style>";var c='<script type="text/javascript">jQuery(document).ready(function() { jQuery(".thankyou-wrapper").hide();';t("#formValidation").is(":checked")&&(c+='jQuery(".apiform").on("submit", function() {',c+='jQuery(".row-required").each(function(index) {',c+='var selectedInput = jQuery(this).find(".w--input-field");',c+='if(selectedInput.data("validate") === "presence" && selectedInput.val().length === 0) {',c+="jQuery(this).append('<p class=\"form-error\">' + selectedInput.data(\"validatemsg\") + '</p>');",c+='selectedInput.addClass("invalid-fields");',c+='  selectedInput.on("blur", function() {',c+='    if(jQuery(this).length > 0) { jQuery(this).next("p.form-error").remove(); jQuery(this).removeClass("invalid-fields"); }',c+="    else {",c+='      jQuery(this).addClass("invalid-fields");',c+=" } return false; });}});});"),c+='jQuery(".apiform").bsdSignup({no_redirect:true}).on("bsd-success",function(e, response){ e.preventDefault();',t("#formEntry").is(":checked")&&(c+=' var postedHTML = ""; jQuery(".apiform .form-row").not(".row-hidden").each(function(index) { if($(this).find(".form-radio--label").length > 0) {      var postedLabel = $(this).find(".form-radio--label").text();  }    else if ($(this).find("label").length > 0) {      var postedLabel = $(this).find("label").text(); } else { var postedLabel = ""; }  var postedInput = $(this).find(":input").val(); if(postedInput.length > 0 && postedLabel.length > 0) {  postedHTML += postedLabel + " : " + postedInput + "<br />";    }  });',c+=" jQuery(\".thankyou-content\").append('<p class=\"wg-form-posted\">' + postedHTML + '</p>');"),c+="url"===t("#destination").val()?' window.location.replace("'+jQuery("#thankyouURL").val()+'"); ':' jQuery(".apiform").hide(); jQuery(".thankyou-wrapper").show(); ',c+="});});</script>";var d='<div class="bsd-embed-form widgetainer widget-styled">';if(d+='<form name="'+e.signup_form_name+'" class="apiform" action="'+t("#branch").val()+"/page/s/"+e.signup_form_slug+'" method="post" id="'+e.signup_form_id+'">',d+=t("#customiseForm form").html(),d=d.replace("Personalise form","Submit form"),d+="</form>",d+="</div>",i+='<div class="signup-wrapper">',t("#logo").val().length>0&&(i+='<div class="signup-logo" style="text-align: '+t("#logoAlignment").val()+';"><img src="'+t("#logo").val()+'" alt="logo" /></div>'),i+=d,"url"!==t("#destination").val()){var f=n.thankyouCode();i+='<div class="thankyou-wrapper">'+f+"</div>"}i+="</div>",t("#generateForm #embedScript").val(c),t("#generateForm #embedStyle").val(u),t("#generateForm #embedTextbox").val(i),c="",u="",i=""},editForm:function(){t(".e--edit-form").hide(),t(".e--edit-form").on("click","a",function(o){o.preventDefault(),t(".e--edit-form").hide(),t("#tabbedBox").hide(),t("#fetchForm").fadeIn()})},fetchForm:function(){t("#fetchForm").on("submit","form",function(a){a.preventDefault(),t("p.form-missing").remove();var i=n.validate(t("#formID"));return i===!1?!1:(t("#fetchForm .b--btn").addClass("loading-animation").attr("disabled",!0).css({cursor:"default"}),void t.ajax({url:o.formURL,method:"GET",data:{formID:t("#formID").val(),branch:t("#branch").val()},success:function(o){o=JSON.parse(o);var a=t.makeArray(o);e=a[0].signup_form,n.fetchFields()},error:function(){return t("#formID").after('<p class="error form-missing">I am sorry this signup form does not exist within this branch in the Blue State Digital Tools.</p>'),t("#fetchForm .b--btn").removeClass("loading-animation").attr("disabled",!1).css({cursor:"pointer"}),!1}}))})},fieldType:function(o,e,i,n){switch(o.format){case"1":a+='<label for="'+e+'">'+o.label+"</label>",a+='<input class="w--input-field" type="'+i+'" name="'+e+'" '+n+' placeholder="'+o.label+'" id="'+e+'" />';break;case"2":a+='<label for="'+e+'">'+o.label+"</label>",a+='<textarea class="w--input-field" '+n+' name="'+e+'">'+o.label+"</textarea>";break;case"3":if("Country"===o.label)a+='<label class="visible-label" for="country">Country</label>',a+='<select  class="w--input-field" id="country" name="country"><option value=""></option><option value="AF">Afghanistan</option><option value="AL">Albania</option><option value="DZ">Algeria</option><option value="AS">American Samoa</option><option value="AD">Andorra</option><option value="AO">Angola</option><option value="AI">Anguilla</option><option value="AG">Antigua and Barbuda</option><option value="AR">Argentina</option><option value="AM">Armenia</option><option value="AW">Aruba</option><option value="AU">Australia</option><option value="AT">Austria</option><option value="AZ">Azerbaijan</option><option value="BS">Bahamas</option><option value="BH">Bahrain</option><option value="BD">Bangladesh</option><option value="BB">Barbados</option><option value="BY">Belarus</option><option value="BE">Belgium</option><option value="BZ">Belize</option><option value="BJ">Benin</option><option value="BM">Bermuda</option><option value="BT">Bhutan</option><option value="BO">Bolivia</option><option value="BA">Bosnia and Herzegovina</option><option value="BW">Botswana</option><option value="BR">Brazil</option><option value="VG">British Virgin Islands</option><option value="IO">British Indian Ocean Territory</option><option value="BN">Brunei</option><option value="BG">Bulgaria</option><option value="BF">Burkina Faso</option><option value="BI">Burundi</option><option value="KH">Cambodia</option><option value="CM">Cameroon</option><option value="CA">Canada</option><option value="CV">Cape Verde</option><option value="KY">Cayman Islands</option><option value="CF">Central African Republic</option><option value="TD">Chad</option><option value="CL">Chile</option><option value="CN">China</option><option value="CX">Christmas Island</option><option value="CO">Colombia</option><option value="KM">Comoros Islands</option><option value="CD">Congo, Democratic Republic of the</option><option value="CG">Congo, Republic of the</option><option value="CK">Cook Islands</option><option value="CR">Costa Rica</option><option value="CI">Cote D\'ivoire</option><option value="HR">Croatia</option><option value="CU">Cuba</option><option value="CY">Cyprus</option><option value="CZ">Czech Republic</option><option value="DK">Denmark</option><option value="DJ">Djibouti</option><option value="DM">Dominica</option><option value="DO">Dominican Republic</option><option value="TP">East Timor</option><option value="EC">Ecuador</option><option value="EG">Egypt</option><option value="SV">El Salvador</option><option value="GQ">Equatorial Guinea</option><option value="ER">Eritrea</option><option value="EE">Estonia</option><option value="ET">Ethiopia</option><option value="FK">Falkland Islands (Malvinas)</option><option value="FO">Faroe Islands</option><option value="FJ">Fiji</option><option value="FI">Finland</option><option value="FR">France</option><option value="GF">French Guiana</option><option value="PF">French Polynesia</option><option value="TF">French Southern Territories</option><option value="GA">Gabon</option><option value="GM">Gambia</option><option value="GE">Georgia</option><option value="DE">Germany</option><option value="GH">Ghana</option><option value="GI">Gibraltar</option><option value="GR">Greece</option><option value="GL">Greenland</option><option value="GD">Grenada</option><option value="GP">Guadeloupe</option><option value="GU">Guam</option><option value="GT">Guatemala</option><option value="GN">Guinea</option><option value="GW">Guinea-Bissau</option><option value="GY">Guyana</option><option value="HT">Haiti</option><option value="VA">Holy See (Vatican City State)</option><option value="HN">Honduras</option><option value="HK">Hong Kong</option><option value="HU">Hungary</option><option value="IS">Iceland</option><option value="IN">India</option><option value="ID">Indonesia</option><option value="IR">Iran</option><option value="IQ">Iraq</option><option value="IE">Republic of Ireland</option><option value="IL">Israel</option><option value="IT">Italy</option><option value="JM">Jamaica</option><option value="JP">Japan</option><option value="JO">Jordan</option><option value="KZ">Kazakhstan</option><option value="KE">Kenya</option><option value="KI">Kiribati</option><option value="KR">South Korea</option><option value="XK">Kosovo</option><option value="KW">Kuwait</option><option value="KG">Kyrgyzstan</option><option value="LA">Laos</option><option value="LV">Latvia</option><option value="LB">Lebanon</option><option value="LS">Lesotho</option><option value="LR">Liberia</option><option value="LY">Libya</option><option value="LI">Liechtenstein</option><option value="LT">Lithuania</option><option value="LU">Luxembourg</option><option value="MO">Macau</option><option value="MK">Macedonia</option><option value="MG">Madagascar</option><option value="MW">Malawi</option><option value="MY">Malaysia</option><option value="MV">Maldives</option><option value="ML">Mali</option><option value="MT">Malta</option><option value="MH">Marshall Islands</option><option value="MQ">Martinique</option><option value="MR">Mauritania</option><option value="MU">Mauritius</option><option value="YT">Mayotte</option><option value="MX">Mexico</option><option value="FM">Micronesia</option><option value="MD">Moldova, Republic of</option><option value="MC">Monaco</option><option value="MN">Mongolia</option><option value="ME">Montenegro</option><option value="MS">Montserrat</option><option value="MA">Morocco</option><option value="MZ">Mozambique</option><option value="MM">Myanmar</option><option value="NA">Namibia</option><option value="NR">Nauru</option><option value="NP">Nepal</option><option value="NL">Netherlands</option><option value="AN">Netherlands Antilles</option><option value="NC">New Caledonia</option><option value="NZ">New Zealand</option><option value="NI">Nicaragua</option><option value="NE">Niger</option><option value="NG">Nigeria</option><option value="NU">Niue</option><option value="NF">Norfolk Island</option><option value="MP">Northern Mariana Islands</option><option value="NO">Norway</option><option value="OM">Oman</option><option value="PK">Pakistan</option><option value="PW">Palau</option><option value="PA">Panama</option><option value="PG">Papua New Guinea</option><option value="PY">Paraguay</option><option value="PE">Peru</option><option value="PH">Philippines</option><option value="PN">Pitcairn Island</option><option value="PL">Poland</option><option value="PT">Portugal</option><option value="PR">Puerto Rico</option><option value="QA">Qatar</option><option value="RE">Reunion</option><option value="RO">Romania</option><option value="RU">Russian Federation</option><option value="RW">Rwanda</option><option value="KN">Saint Kitts and Nevis</option><option value="LC">Saint Lucia</option><option value="VC">Saint Vincent and the Grenadines</option><option value="WS">Samoa</option><option value="SM">San Marino</option><option value="ST">Sao Tome and Principe</option><option value="SA">Saudi Arabia</option><option value="SN">Senegal</option><option value="RS">Serbia</option><option value="SC">Seychelles</option><option value="SL">Sierra Leone</option><option value="SG">Singapore</option><option value="SK">Slovakia</option><option value="SI">Slovenia</option><option value="SB">Solomon Islands</option><option value="SO">Somalia</option><option value="ZA">South Africa</option><option value="SS">South Sudan</option><option value="ES">Spain</option><option value="LK">Sri Lanka</option><option value="SH">St. Helena</option><option value="PM">St. Pierre and Miquelon</option><option value="SD">Sudan</option><option value="SR">Suriname</option><option value="SY">Syria</option><option value="SZ">Swaziland</option><option value="SE">Sweden</option><option value="CH">Switzerland</option><option value="TW">Taiwan</option><option value="TJ">Tajikistan</option><option value="TZ">Tanzania</option><option value="TH">Thailand</option><option value="TG">Togo</option><option value="TK">Tokelau</option><option value="TO">Tonga</option><option value="TT">Trinidad and Tobago</option><option value="TN">Tunisia</option><option value="TR">Turkey</option><option value="TM">Turkmenistan</option><option value="TC">Turks and Caicos Islands</option><option value="TV">Tuvalu</option><option value="UG">Uganda</option><option value="UA">Ukraine</option><option value="AE">United Arab Emirates</option><option value="GB" selected="selected">United Kingdom</option><option value="US">United States</option><option value="UY">Uruguay</option><option value="UZ">Uzbekistan</option><option value="VU">Vanuatu</option><option value="VE">Venezuela</option><option value="VN">Viet Nam</option><option value="VI">Virgin Islands (U.S.)</option><option value="WF">Wallis and Futuna Islands</option><option value="EH">Western Sahara</option><option value="YE">Yemen</option><option value="ZM">Zambia</option><option value="ZW">Zimbabwe</option></select>';else{
a+='<label class="visible-label" for="'+e+'">'+o.label+"</label>",a+="<select "+n+' class="w--input-field" name="'+e+'" id="'+e+'">';var r=o.extra_def.options;r=r.split("\r\n"),t.each(r,function(t,o){var e=o.split("|");a+=e.length>1?'<option value="'+e[0]+'">'+e[1]+"</option>":'<option value="'+e[0]+'">'+e[0]+"</option>"}),a+="</select>"}break;case"4":a+='<p class="form-radio--label">'+o.label+"</p>",r=o.extra_def.options,r=r.split("\r\n"),t.each(r,function(t,o){var i=o.split("|"),r="";r=i.length>1?i[1]:i[0],a+='<label class="visible-label" for="'+e+"_"+t+'">'+r+"</label>",a+='<input class="w--input-field" type="checkbox" name="'+e+'[]" '+n+' value="'+i[0]+'" id="'+e+"_"+t+'" onclick="if(this.checked) { this.form[\''+e+"["+t+"]'].value='"+r+"'; } else { this.form['"+e+"["+t+"]'].value=''; }\" />",a+='<input type="hidden" name="'+e+"["+t+']" />'});break;case"5":a+='<p class="form-radio--label">'+o.label+"</p>",r=o.extra_def.options,r=r.split("\r\n"),t.each(r,function(t,o){var i=o.split("|"),r="";r=i.length>1?i[1]:i[0],a+='<label class="visible-label" for="'+e+"_"+t+'">'+r+"</label>",a+='<input class="w--input-field" type="checkbox" name="'+e+'[]" '+n+' value="'+i[0]+'" id="'+e+"_"+t+'" onclick="if(this.checked) { this.form[\''+e+"["+t+"]'].value='"+r+"'; } else { this.form['"+e+"["+t+"]'].value=''; }\" />",a+='<input type="hidden" name="'+e+"["+t+']" />'});break;case"6":a+='<p class="form-field-static">'+o.extra_def.text+"</p>";break;case"7":o.extra_def.desc.length>0&&o.label!==o.extra_def.desc?(a+='<p class="checkbox-text">'+o.label+"</p>",a+='<label  class="visible-label" for="'+e+'">'+o.extra_def.desc+"</label>"):a+='<label  class="visible-label" for="'+e+'">'+o.label+"</label>",a+='<input class="w--input-field" type="checkbox" name="'+e+'" '+n+' value="1" id="'+e+'" />';break;case"8":a+='<label for="'+e+'">'+o.label+"</label>",a+='<input  class="w--input-field" type="file" name="'+e+'" '+n+' placeholder="'+o.label+'" id="'+e+'" />',a+='<p class="desc">Max upload size: '+o.extra_def.file_size+"mb ";break;case"9":a+='<label for="'+e+'">'+o.label+"</label>",a+='<input  class="w--input-field" type="text" name="'+e+'" '+n+' placeholder="'+o.label+'" id="'+e+'" />';break;case"10":a+='<label for="'+e+'">'+o.label+"</label>",a+='<input  class="w--input-field" type="hidden" name="'+e+'" '+n+' placeholder="'+o.label+'" id="'+e+'" />';break;default:a+='<label for="'+e+'">'+o.label+"</label>",a+='<input  class="w--input-field" type="'+i+'" name="'+e+'" '+n+' placeholder="'+o.label+'" id="'+e+'" />'}},buildFields:function(t){var o="text",e="",i="",r="";i="0"===t.is_custom_field?"Postal Code"===t.description?"zip":t.description.replace(/\s+/g,"").toLowerCase():"custom-"+t["@attributes"].id,"0"===t.is_shown&&(o="hidden",e=" row-hidden"),"Email"===t.description&&(o="email"),"1"===t.is_required&&(e+=" row-required",r=' data-validate="presence" data-validateMsg="Please enter a valid '+t.label+'" '),a+='<div class="form-row form-row--left '+e+'">',n.fieldType(t,i,o,r),a+="</div>"},fetchFields:function(){t.ajax({url:o.fieldsURL,method:"GET",data:{formID:t("#formID").val()},success:function(o){o=JSON.parse(o);var e=t.makeArray(o);a="",e=e[0].signup_form_field,t.each(e,function(t,o){n.buildFields(o)}),a+='<div class="form-row"><input type="submit" class="b--btn b--btn__submit" name="fetchform" value="Personalise form" /></div>',t("#customiseForm fieldset").html(a),t("#fetchForm").hide(),t("#tabbedBox").fadeIn(),t(".form-id--display").html(t("#formID").val()),t(".e--edit-form").show(),t(".form-row").on("click",function(){t(".toggle-btn").hasClass("is-active")&&(t(this).hasClass("form-row--half")?t(this).removeClass("form-row--half"):t(this).addClass("form-row--half"))}),t("#fetchForm .b--btn").removeClass("loading-animation").attr("disabled",!1).css({cursor:"pointer"})},error:function(){}})},fieldSort:function(){t("#customiseForm fieldset").sortable({revert:!0}),t("#customiseForm fieldset").disableSelection(),t("#customiseForm .form-row").on("mouseup",function(){t(this).removeClass(".is-dragging")}),t("#customiseForm .form-row").on("mousedown",function(){t(this).addClass("is-dragging")}),t(".toggle-btn").on("click",function(){return t(this).hasClass("is-active")?(t(this).removeClass("is-active"),t(this).parent().removeClass("row-toggled")):(t(this).addClass("is-active"),t(this).parent().addClass("row-toggled")),!1}),t("#customiseForm .form-row").droppable({greedy:!0,tolerance:"pointer"})},copyClipboard:function(t){var o=document.createElement("input");o.setAttribute("value",t),document.body.appendChild(o),o.select(),document.execCommand("copy"),document.body.removeChild(o)},toggleBtn:function(t,o){t.val().length>0?o.removeClass("btn-disabled"):o.addClass("btn-disabled")},formListener:function(){t("#personaliseForm form").on("submit",function(o){return o.preventDefault(),"content"!==t("#destination").val()||0!==t("#thankyouHeader").val().length&&0!==t("#thankyouContent").val().length&&0!==t("#shareImg").val().length?"url"===t("#destination").val()&&0===t("#thankyouURL").val().length?(t("#thankyouURL").after('<p class="error form-missing">Please complete the highlighted fields.</p>'),t(".required").addClass("invalid-fields"),!1):(t(".required").removeClass("invalid-fields"),t(".form-missing").remove(),n.buildEmbedCode(),t("#tabbedBox").tabs({disabled:""}),void t("#tabbedBox").tabs("option","active",2)):(t("#shareImg").after('<p class="error form-missing">Please complete the highlighted fields.</p>'),t(".required").addClass("invalid-fields"),!1)}),t("#formID").blur(function(){n.toggleBtn(t("#formID"),t("#fetchForm").find('input[type="submit"]'))}),t("#formID").keydown(function(){n.toggleBtn(t("#formID"),t("#fetchForm").find('input[type="submit"]'))}),t("#customiseForm").on("submit","form",function(o){o.preventDefault(),t("#tabbedBox").tabs("option","active",1)}),t("#generateForm").on("click",".b--btn__submit",function(o){o.preventDefault();var e=t(this).data("copy");return n.copyClipboard(t("#"+e).val()),t(this).val("Copied to clipboard"),setTimeout(function(){t(this).val("Copy to clipboard")},5e3),!1}),t("body").on("blur",".invalid-fields",function(){t(this).length>0?t(this).removeClass("invalid-fields"):t(this).addClass("invalid-fields")})},bindUIActions:function(){t("#fetchForm").find('input[type="submit"]').addClass("btn-disabled"),t("#tabbedBox").tabs({disabled:[2]}),t(".picker").spectrum({showInput:!0,className:"full-spectrum",showInitial:!1,showPalette:!0,showSelectionPalette:!0,maxSelectionSize:10,preferredFormat:"hex",palette:[["rgb(227,6,19)","rgb(45, 53, 61)","rgb(231, 55, 85)","rgb(58, 85, 175)","rgb(76, 98, 108)"]]})}};n.init(),n.formListener(),n.fetchForm(),n.editForm(),n.personaliseForm(),n.fieldSort()}(jQuery);