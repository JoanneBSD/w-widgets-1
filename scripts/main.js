!function(t){"use strict";"function"==typeof define&&define.amd?define(["jquery"],t):"object"==typeof exports&&"object"==typeof module?module.exports=t:t(jQuery)}(function(t,e){"use strict";function o(e,o,n,i){for(var a=[],r=0;r<e.length;r++){var l=e[r];if(l){var s=tinycolor(l),p=s.toHsl().l<.5?"sp-thumb-el sp-thumb-dark":"sp-thumb-el sp-thumb-light";p+=tinycolor.equals(o,l)?" sp-thumb-active":"";var u=s.toString(i.preferredFormat||"rgb"),c=m?"background-color:"+s.toRgbString():"filter:"+s.toFilter();a.push('<span title="'+u+'" data-color="'+s.toRgbString()+'" class="'+p+'"><span class="sp-thumb-inner" style="'+c+';" /></span>')}else{var d="sp-clear-display";a.push(t("<div />").append(t('<span data-color="" style="background-color:transparent;" class="'+d+'"></span>').attr("title",i.noColorSelectedText)).html())}}return'<div class="sp-cf '+n+'">'+a.join("")+"</div>"}function n(){for(var t=0;t<h.length;t++)h[t]&&h[t].hide()}function i(e,o){var n=t.extend({},f,e);return n.callbacks={move:p(n.move,o),change:p(n.change,o),show:p(n.show,o),hide:p(n.hide,o),beforeShow:p(n.beforeShow,o)},n}function a(a,l){function p(){if(V.showPaletteOnly&&(V.showPalette=!0),Dt.text(V.showPaletteOnly?V.togglePaletteMoreText:V.togglePaletteLessText),V.palette){ft=V.palette.slice(0),ht=t.isArray(ft[0])?ft:[ft],vt={};for(var e=0;e<ht.length;e++)for(var o=0;o<ht[e].length;o++){var n=tinycolor(ht[e][o]).toRgbString();vt[n]=!0}}xt.toggleClass("sp-flat",W),xt.toggleClass("sp-input-disabled",!V.showInput),xt.toggleClass("sp-alpha-enabled",V.showAlpha),xt.toggleClass("sp-clear-enabled",Jt),xt.toggleClass("sp-buttons-disabled",!V.showButtons),xt.toggleClass("sp-palette-buttons-disabled",!V.togglePaletteOnly),xt.toggleClass("sp-palette-disabled",!V.showPalette),xt.toggleClass("sp-palette-only",V.showPaletteOnly),xt.toggleClass("sp-initial-disabled",!V.showInitial),xt.addClass(V.className).addClass(V.containerClassName),G()}function f(){function e(e){return e.data&&e.data.ignore?(H(t(e.target).closest(".sp-thumb-el").data("color")),E()):(H(t(e.target).closest(".sp-thumb-el").data("color")),E(),O(!0),V.hideAfterPaletteSelect&&T()),!1}if(v&&xt.find("*:not(input)").attr("unselectable","on"),p(),jt&&kt.after(zt).hide(),Jt||Et.hide(),W)kt.after(xt).hide();else{var o="parent"===V.appendTo?kt.parent():t(V.appendTo);1!==o.length&&(o=t("body")),o.append(xt)}y(),qt.bind("click.spectrum touchstart.spectrum",function(e){Ct||A(),e.stopPropagation(),t(e.target).is("input")||e.preventDefault()}),(kt.is(":disabled")||V.disabled===!0)&&K(),xt.click(s),Pt.change(M),Pt.bind("paste",function(){setTimeout(M,1)}),Pt.keydown(function(t){13===t.keyCode&&M()}),Bt.text(V.cancelText),Bt.bind("click.spectrum",function(t){t.stopPropagation(),t.preventDefault(),P(),T()}),Et.attr("title",V.clearText),Et.bind("click.spectrum",function(t){t.stopPropagation(),t.preventDefault(),Yt=!0,E(),W&&O(!0)}),Lt.text(V.chooseText),Lt.bind("click.spectrum",function(t){t.stopPropagation(),t.preventDefault(),v&&Pt.is(":focus")&&Pt.trigger("change"),B()&&(O(!0),T())}),Dt.text(V.showPaletteOnly?V.togglePaletteMoreText:V.togglePaletteLessText),Dt.bind("click.spectrum",function(t){t.stopPropagation(),t.preventDefault(),V.showPaletteOnly=!V.showPaletteOnly,V.showPaletteOnly||W||xt.css("left","-="+(St.outerWidth(!0)+5)),p()}),u(Nt,function(t,e,o){dt=t/rt,Yt=!1,o.shiftKey&&(dt=Math.round(10*dt)/10),E()},S,_),u(At,function(t,e){pt=parseFloat(e/it),Yt=!1,V.showAlpha||(dt=1),E()},S,_),u(_t,function(t,e,o){if(o.shiftKey){if(!yt){var n=ut*et,i=ot-ct*ot,a=Math.abs(t-n)>Math.abs(e-i);yt=a?"x":"y"}}else yt=null;var r=!yt||"x"===yt,l=!yt||"y"===yt;r&&(ut=parseFloat(t/et)),l&&(ct=parseFloat((ot-e)/ot)),Yt=!1,V.showAlpha||(dt=1),E()},S,_),Ut?(H(Ut),L(),Qt=Wt||tinycolor(Ut).format,w(Ut)):L(),W&&F();var n=v?"mousedown.spectrum":"click.spectrum touchstart.spectrum";Ht.delegate(".sp-thumb-el",n,e),Rt.delegate(".sp-thumb-el:nth-child(1)",n,{ignore:!0},e)}function y(){if(Z&&window.localStorage){try{var e=window.localStorage[Z].split(",#");e.length>1&&(delete window.localStorage[Z],t.each(e,function(t,e){w(e)}))}catch(o){}try{mt=window.localStorage[Z].split(";")}catch(o){}}}function w(e){if(Q){var o=tinycolor(e).toRgbString();if(!vt[o]&&-1===t.inArray(o,mt))for(mt.push(o);mt.length>gt;)mt.shift();if(Z&&window.localStorage)try{window.localStorage[Z]=mt.join(";")}catch(n){}}}function k(){var t=[];if(V.showPalette)for(var e=0;e<mt.length;e++){var o=tinycolor(mt[e]).toRgbString();vt[o]||t.push(mt[e])}return t.reverse().slice(0,V.maxSelectionSize)}function C(){var e=R(),n=t.map(ht,function(t,n){return o(t,e,"sp-palette-row sp-palette-row-"+n,V)});y(),mt&&n.push(o(k(),e,"sp-palette-row sp-palette-row-selection",V)),Ht.html(n.join(""))}function x(){if(V.showInitial){var t=Vt,e=R();Rt.html(o([t,e],e,"sp-palette-row-initial",V))}}function S(){(0>=ot||0>=et||0>=it)&&G(),tt=!0,xt.addClass(bt),yt=null,kt.trigger("dragstart.spectrum",[R()])}function _(){tt=!1,xt.removeClass(bt),kt.trigger("dragstop.spectrum",[R()])}function M(){var t=Pt.val();if(null!==t&&""!==t||!Jt){var e=tinycolor(t);e.isValid()?(H(e),O(!0)):Pt.addClass("sp-validation-error")}else H(null),O(!0)}function A(){X?T():F()}function F(){var e=t.Event("beforeShow.spectrum");return X?void G():(kt.trigger(e,[R()]),void(J.beforeShow(R())===!1||e.isDefaultPrevented()||(n(),X=!0,t(wt).bind("keydown.spectrum",I),t(wt).bind("click.spectrum",N),t(window).bind("resize.spectrum",$),zt.addClass("sp-active"),xt.removeClass("sp-hidden"),G(),L(),Vt=R(),x(),J.show(Vt),kt.trigger("show.spectrum",[Vt]))))}function I(t){27===t.keyCode&&T()}function N(t){2!==t.button&&(tt||(Zt?O(!0):P(),T()))}function T(){X&&!W&&(X=!1,t(wt).unbind("keydown.spectrum",I),t(wt).unbind("click.spectrum",N),t(window).unbind("resize.spectrum",$),zt.removeClass("sp-active"),xt.addClass("sp-hidden"),J.hide(R()),kt.trigger("hide.spectrum",[R()]))}function P(){H(Vt,!0)}function H(t,e){if(tinycolor.equals(t,R()))return void L();var o,n;!t&&Jt?Yt=!0:(Yt=!1,o=tinycolor(t),n=o.toHsv(),pt=n.h%360/360,ut=n.s,ct=n.v,dt=n.a),L(),o&&o.isValid()&&!e&&(Qt=Wt||o.getFormat())}function R(t){return t=t||{},Jt&&Yt?null:tinycolor.fromRatio({h:pt,s:ut,v:ct,a:Math.round(100*dt)/100},{format:t.format||Qt})}function B(){return!Pt.hasClass("sp-validation-error")}function E(){L(),J.move(R()),kt.trigger("move.spectrum",[R()])}function L(){Pt.removeClass("sp-validation-error"),D();var t=tinycolor.fromRatio({h:pt,s:1,v:1});_t.css("background-color",t.toHexString());var e=Qt;1>dt&&(0!==dt||"name"!==e)&&("hex"===e||"hex3"===e||"hex6"===e||"name"===e)&&(e="rgb");var o=R({format:e}),n="";if(Kt.removeClass("sp-clear-display"),Kt.css("background-color","transparent"),!o&&Jt)Kt.addClass("sp-clear-display");else{var i=o.toHexString(),a=o.toRgbString();if(m||1===o.alpha?Kt.css("background-color",a):(Kt.css("background-color","transparent"),Kt.css("filter",o.toFilter())),V.showAlpha){var r=o.toRgb();r.a=0;var l=tinycolor(r).toRgbString(),s="linear-gradient(left, "+l+", "+i+")";v?It.css("filter",tinycolor(l).toFilter({gradientType:1},i)):(It.css("background","-webkit-"+s),It.css("background","-moz-"+s),It.css("background","-ms-"+s),It.css("background","linear-gradient(to right, "+l+", "+i+")"))}n=o.toString(e)}V.showInput&&Pt.val(n),V.showPalette&&C(),x()}function D(){var t=ut,e=ct;if(Jt&&Yt)Tt.hide(),Ft.hide(),Mt.hide();else{Tt.show(),Ft.show(),Mt.show();var o=t*et,n=ot-e*ot;o=Math.max(-nt,Math.min(et-nt,o-nt)),n=Math.max(-nt,Math.min(ot-nt,n-nt)),Mt.css({top:n+"px",left:o+"px"});var i=dt*rt;Tt.css({left:i-lt/2+"px"});var a=pt*it;Ft.css({top:a-st+"px"})}}function O(t){var e=R(),o="",n=!tinycolor.equals(e,Vt);e&&(o=e.toString(Qt),w(e)),Ot&&kt.val(o),t&&n&&(J.change(e),kt.trigger("change",[e]))}function G(){et=_t.width(),ot=_t.height(),nt=Mt.height(),at=At.width(),it=At.height(),st=Ft.height(),rt=Nt.width(),lt=Tt.width(),W||(xt.css("position","absolute"),V.offset?xt.offset(V.offset):xt.offset(r(xt,qt))),D(),V.showPalette&&C(),kt.trigger("reflow.spectrum")}function j(){kt.show(),qt.unbind("click.spectrum touchstart.spectrum"),xt.remove(),zt.remove(),h[$t.id]=null}function z(o,n){return o===e?t.extend({},V):n===e?V[o]:(V[o]=n,void p())}function q(){Ct=!1,kt.attr("disabled",!1),qt.removeClass("sp-disabled")}function K(){T(),Ct=!0,kt.attr("disabled",!0),qt.addClass("sp-disabled")}function U(t){V.offset=t,G()}var V=i(l,a),W=V.flat,Q=V.showSelectionPalette,Z=V.localStorageKey,Y=V.theme,J=V.callbacks,$=c(G,10),X=!1,tt=!1,et=0,ot=0,nt=0,it=0,at=0,rt=0,lt=0,st=0,pt=0,ut=0,ct=0,dt=1,ft=[],ht=[],vt={},mt=V.selectionPalette.slice(0),gt=V.maxSelectionSize,bt="sp-dragging",yt=null,wt=a.ownerDocument,kt=(wt.body,t(a)),Ct=!1,xt=t(b,wt).addClass(Y),St=xt.find(".sp-picker-container"),_t=xt.find(".sp-color"),Mt=xt.find(".sp-dragger"),At=xt.find(".sp-hue"),Ft=xt.find(".sp-slider"),It=xt.find(".sp-alpha-inner"),Nt=xt.find(".sp-alpha"),Tt=xt.find(".sp-alpha-handle"),Pt=xt.find(".sp-input"),Ht=xt.find(".sp-palette"),Rt=xt.find(".sp-initial"),Bt=xt.find(".sp-cancel"),Et=xt.find(".sp-clear"),Lt=xt.find(".sp-choose"),Dt=xt.find(".sp-palette-toggle"),Ot=kt.is("input"),Gt=Ot&&"color"===kt.attr("type")&&d(),jt=Ot&&!W,zt=jt?t(g).addClass(Y).addClass(V.className).addClass(V.replacerClassName):t([]),qt=jt?zt:kt,Kt=zt.find(".sp-preview-inner"),Ut=V.color||Ot&&kt.val(),Vt=!1,Wt=V.preferredFormat,Qt=Wt,Zt=!V.showButtons||V.clickoutFiresChange,Yt=!Ut,Jt=V.allowEmpty&&!Gt;f();var $t={show:F,hide:T,toggle:A,reflow:G,option:z,enable:q,disable:K,offset:U,set:function(t){H(t),O()},get:R,destroy:j,container:xt};return $t.id=h.push($t)-1,$t}function r(e,o){var n=0,i=e.outerWidth(),a=e.outerHeight(),r=o.outerHeight(),l=e[0].ownerDocument,s=l.documentElement,p=s.clientWidth+t(l).scrollLeft(),u=s.clientHeight+t(l).scrollTop(),c=o.offset();return c.top+=r,c.left-=Math.min(c.left,c.left+i>p&&p>i?Math.abs(c.left+i-p):0),c.top-=Math.min(c.top,c.top+a>u&&u>a?Math.abs(a+r-n):n),c}function l(){}function s(t){t.stopPropagation()}function p(t,e){var o=Array.prototype.slice,n=o.call(arguments,2);return function(){return t.apply(e,n.concat(o.call(arguments)))}}function u(e,o,n,i){function a(t){t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault(),t.returnValue=!1}function r(t){if(u){if(v&&p.documentMode<9&&!t.button)return s();var n=t.originalEvent&&t.originalEvent.touches&&t.originalEvent.touches[0],i=n&&n.pageX||t.pageX,r=n&&n.pageY||t.pageY,l=Math.max(0,Math.min(i-c.left,f)),m=Math.max(0,Math.min(r-c.top,d));h&&a(t),o.apply(e,[l,m,t])}}function l(o){var i=o.which?3===o.which:2===o.button;i||u||n.apply(e,arguments)!==!1&&(u=!0,d=t(e).height(),f=t(e).width(),c=t(e).offset(),t(p).bind(m),t(p.body).addClass("sp-dragging"),r(o),a(o))}function s(){u&&(t(p).unbind(m),t(p.body).removeClass("sp-dragging"),setTimeout(function(){i.apply(e,arguments)},0)),u=!1}o=o||function(){},n=n||function(){},i=i||function(){};var p=document,u=!1,c={},d=0,f=0,h="ontouchstart"in window,m={};m.selectstart=a,m.dragstart=a,m["touchmove mousemove"]=r,m["touchend mouseup"]=s,t(e).bind("touchstart mousedown",l)}function c(t,e,o){var n;return function(){var i=this,a=arguments,r=function(){n=null,t.apply(i,a)};o&&clearTimeout(n),(o||!n)&&(n=setTimeout(r,e))}}function d(){return t.fn.spectrum.inputTypeColorSupport()}var f={beforeShow:l,move:l,change:l,show:l,hide:l,color:!1,flat:!1,showInput:!0,allowEmpty:!0,showButtons:!0,clickoutFiresChange:!0,showInitial:!0,showPalette:!1,showPaletteOnly:!1,hideAfterPaletteSelect:!1,togglePaletteOnly:!1,showSelectionPalette:!0,localStorageKey:!1,appendTo:"body",maxSelectionSize:7,cancelText:"cancel",chooseText:"choose",togglePaletteMoreText:"more",togglePaletteLessText:"less",clearText:"Clear Color Selection",noColorSelectedText:"No Color Selected",preferredFormat:!1,className:"",containerClassName:"",replacerClassName:"",showAlpha:!1,theme:"sp-light",palette:[["#ffffff","#000000","#ff0000","#ff8000","#ffff00","#008000","#0000ff","#4b0082","#9400d3","#fff"]],selectionPalette:[],disabled:!1,offset:null},h=[],v=!!/msie/i.exec(window.navigator.userAgent),m=function(){function t(t,e){return!!~(""+t).indexOf(e)}var e=document.createElement("div"),o=e.style;return o.cssText="background-color:rgba(0,0,0,.5)",t(o.backgroundColor,"rgba")||t(o.backgroundColor,"hsla")}(),g=['<div class="sp-replacer">','<div class="sp-preview"><div class="sp-preview-inner"></div></div>','<div class="sp-dd">&#9660;</div>',"</div>"].join(""),b=function(){var t="";if(v)for(var e=1;6>=e;e++)t+='<div class="sp-'+e+'""></div>';return['<div class="sp-container sp-hidden">','<div class="sp-palette-container">','<div class="sp-palette sp-thumb sp-cf"></div>','<div class="sp-palette-button-container sp-cf">','<button type="button" class="sp-palette-toggle"></button>',"</div>","</div>",'<div class="sp-picker-container">','<div class="sp-top sp-cf">','<div class="sp-fill"></div>','<div class="sp-top-inner">','<div class="sp-color">','<div class="sp-sat">','<div class="sp-val">','<div class="sp-dragger"></div>',"</div>","</div>","</div>",'<div class="sp-clear sp-clear-display">',"</div>",'<div class="sp-hue">','<div class="sp-slider"></div>',t,"</div>","</div>",'<div class="sp-alpha"><div class="sp-alpha-inner"><div class="sp-alpha-handle"></div></div></div>',"</div>",'<div class="sp-input-container sp-cf">','<input class="sp-input" type="text" spellcheck="false"  />',"</div>",'<div class="sp-initial sp-thumb sp-cf"></div>','<div class="sp-button-container sp-cf">','<a class="sp-cancel" href="#"></a>','<button type="button" class="sp-choose"></button>',"</div>","</div>","</div>"].join("")}(),y="spectrum.id";t.fn.spectrum=function(e,o){if("string"==typeof e){var n=this,i=Array.prototype.slice.call(arguments,1);return this.each(function(){var o=h[t(this).data(y)];if(o){var a=o[e];if(!a)throw new Error('Spectrum: no such method: "'+e+'"');"get"===e?n=o.get():"container"===e?n=o.container:"option"===e?n=o.option.apply(o,i):"destroy"===e?(o.destroy(),t(this).removeData(y)):a.apply(o,i)}}),n}return this.spectrum("destroy").each(function(){var o=t.extend({},e,t(this).data()),n=a(this,o);t(this).data(y,n.id)})},t.fn.spectrum.load=!0,t.fn.spectrum.loadOpts={},t.fn.spectrum.draggable=u,t.fn.spectrum.defaults=f,t.fn.spectrum.inputTypeColorSupport=function w(){if("undefined"==typeof w._cachedResult){var e=t('<input type="color"/>')[0];w._cachedResult="color"===e.type&&""!==e.value}return w._cachedResult},t.spectrum={},t.spectrum.localization={},t.spectrum.palettes={},t.fn.spectrum.processNativeColorInputs=function(){var e=t("input[type=color]");e.length&&!d()&&e.spectrum({preferredFormat:"hex6"})},function(){function t(t){var o={r:0,g:0,b:0},i=1,r=!1,l=!1;return"string"==typeof t&&(t=P(t)),"object"==typeof t&&(t.hasOwnProperty("r")&&t.hasOwnProperty("g")&&t.hasOwnProperty("b")?(o=e(t.r,t.g,t.b),r=!0,l="%"===String(t.r).substr(-1)?"prgb":"rgb"):t.hasOwnProperty("h")&&t.hasOwnProperty("s")&&t.hasOwnProperty("v")?(t.s=I(t.s),t.v=I(t.v),o=a(t.h,t.s,t.v),r=!0,l="hsv"):t.hasOwnProperty("h")&&t.hasOwnProperty("s")&&t.hasOwnProperty("l")&&(t.s=I(t.s),t.l=I(t.l),o=n(t.h,t.s,t.l),r=!0,l="hsl"),t.hasOwnProperty("a")&&(i=t.a)),i=C(i),{ok:r,format:t.format||l,r:D(255,O(o.r,0)),g:D(255,O(o.g,0)),b:D(255,O(o.b,0)),a:i}}function e(t,e,o){return{r:255*x(t,255),g:255*x(e,255),b:255*x(o,255)}}function o(t,e,o){t=x(t,255),e=x(e,255),o=x(o,255);var n,i,a=O(t,e,o),r=D(t,e,o),l=(a+r)/2;if(a===r)n=i=0;else{var s=a-r;switch(i=l>.5?s/(2-a-r):s/(a+r),a){case t:n=(e-o)/s+(o>e?6:0);break;case e:n=(o-t)/s+2;break;case o:n=(t-e)/s+4}n/=6}return{h:n,s:i,l:l}}function n(t,e,o){function n(t,e,o){return 0>o&&(o+=1),o>1&&(o-=1),1/6>o?t+6*(e-t)*o:.5>o?e:2/3>o?t+(e-t)*(2/3-o)*6:t}var i,a,r;if(t=x(t,360),e=x(e,100),o=x(o,100),0===e)i=a=r=o;else{var l=.5>o?o*(1+e):o+e-o*e,s=2*o-l;i=n(s,l,t+1/3),a=n(s,l,t),r=n(s,l,t-1/3)}return{r:255*i,g:255*a,b:255*r}}function i(t,e,o){t=x(t,255),e=x(e,255),o=x(o,255);var n,i,a=O(t,e,o),r=D(t,e,o),l=a,s=a-r;if(i=0===a?0:s/a,a===r)n=0;else{switch(a){case t:n=(e-o)/s+(o>e?6:0);break;case e:n=(o-t)/s+2;break;case o:n=(t-e)/s+4}n/=6}return{h:n,s:i,v:l}}function a(t,e,o){t=6*x(t,360),e=x(e,100),o=x(o,100);var n=E.floor(t),i=t-n,a=o*(1-e),r=o*(1-i*e),l=o*(1-(1-i)*e),s=n%6,p=[o,r,a,a,l,o][s],u=[l,o,o,r,a,a][s],c=[a,a,l,o,o,r][s];return{r:255*p,g:255*u,b:255*c}}function r(t,e,o,n){var i=[F(L(t).toString(16)),F(L(e).toString(16)),F(L(o).toString(16))];return n&&i[0].charAt(0)===i[0].charAt(1)&&i[1].charAt(0)===i[1].charAt(1)&&i[2].charAt(0)===i[2].charAt(1)?i[0].charAt(0)+i[1].charAt(0)+i[2].charAt(0):i.join("")}function l(t,e,o,n){var i=[F(N(n)),F(L(t).toString(16)),F(L(e).toString(16)),F(L(o).toString(16))];return i.join("")}function s(t,e){e=0===e?0:e||10;var o=j(t).toHsl();return o.s-=e/100,o.s=S(o.s),j(o)}function p(t,e){e=0===e?0:e||10;var o=j(t).toHsl();return o.s+=e/100,o.s=S(o.s),j(o)}function u(t){return j(t).desaturate(100)}function c(t,e){e=0===e?0:e||10;var o=j(t).toHsl();return o.l+=e/100,o.l=S(o.l),j(o)}function d(t,e){e=0===e?0:e||10;var o=j(t).toRgb();return o.r=O(0,D(255,o.r-L(255*-(e/100)))),o.g=O(0,D(255,o.g-L(255*-(e/100)))),o.b=O(0,D(255,o.b-L(255*-(e/100)))),j(o)}function f(t,e){e=0===e?0:e||10;var o=j(t).toHsl();return o.l-=e/100,o.l=S(o.l),j(o)}function h(t,e){var o=j(t).toHsl(),n=(L(o.h)+e)%360;return o.h=0>n?360+n:n,j(o)}function v(t){var e=j(t).toHsl();return e.h=(e.h+180)%360,j(e)}function m(t){var e=j(t).toHsl(),o=e.h;return[j(t),j({h:(o+120)%360,s:e.s,l:e.l}),j({h:(o+240)%360,s:e.s,l:e.l})]}function g(t){var e=j(t).toHsl(),o=e.h;return[j(t),j({h:(o+90)%360,s:e.s,l:e.l}),j({h:(o+180)%360,s:e.s,l:e.l}),j({h:(o+270)%360,s:e.s,l:e.l})]}function b(t){var e=j(t).toHsl(),o=e.h;return[j(t),j({h:(o+72)%360,s:e.s,l:e.l}),j({h:(o+216)%360,s:e.s,l:e.l})]}function y(t,e,o){e=e||6,o=o||30;var n=j(t).toHsl(),i=360/o,a=[j(t)];for(n.h=(n.h-(i*e>>1)+720)%360;--e;)n.h=(n.h+i)%360,a.push(j(n));return a}function w(t,e){e=e||6;for(var o=j(t).toHsv(),n=o.h,i=o.s,a=o.v,r=[],l=1/e;e--;)r.push(j({h:n,s:i,v:a})),a=(a+l)%1;return r}function k(t){var e={};for(var o in t)t.hasOwnProperty(o)&&(e[t[o]]=o);return e}function C(t){return t=parseFloat(t),(isNaN(t)||0>t||t>1)&&(t=1),t}function x(t,e){M(t)&&(t="100%");var o=A(t);return t=D(e,O(0,parseFloat(t))),o&&(t=parseInt(t*e,10)/100),E.abs(t-e)<1e-6?1:t%e/parseFloat(e)}function S(t){return D(1,O(0,t))}function _(t){return parseInt(t,16)}function M(t){return"string"==typeof t&&-1!=t.indexOf(".")&&1===parseFloat(t)}function A(t){return"string"==typeof t&&-1!=t.indexOf("%")}function F(t){return 1===t.length?"0"+t:""+t}function I(t){return 1>=t&&(t=100*t+"%"),t}function N(t){return Math.round(255*parseFloat(t)).toString(16)}function T(t){return _(t)/255}function P(t){t=t.replace(H,"").replace(R,"").toLowerCase();var e=!1;if(z[t])t=z[t],e=!0;else if("transparent"===t)return{r:0,g:0,b:0,a:0,format:"name"};var o;return(o=K.rgb.exec(t))?{r:o[1],g:o[2],b:o[3]}:(o=K.rgba.exec(t))?{r:o[1],g:o[2],b:o[3],a:o[4]}:(o=K.hsl.exec(t))?{h:o[1],s:o[2],l:o[3]}:(o=K.hsla.exec(t))?{h:o[1],s:o[2],l:o[3],a:o[4]}:(o=K.hsv.exec(t))?{h:o[1],s:o[2],v:o[3]}:(o=K.hsva.exec(t))?{h:o[1],s:o[2],v:o[3],a:o[4]}:(o=K.hex8.exec(t))?{a:T(o[1]),r:_(o[2]),g:_(o[3]),b:_(o[4]),format:e?"name":"hex8"}:(o=K.hex6.exec(t))?{r:_(o[1]),g:_(o[2]),b:_(o[3]),format:e?"name":"hex"}:(o=K.hex3.exec(t))?{r:_(o[1]+""+o[1]),g:_(o[2]+""+o[2]),b:_(o[3]+""+o[3]),format:e?"name":"hex"}:!1}var H=/^[\s,#]+/,R=/\s+$/,B=0,E=Math,L=E.round,D=E.min,O=E.max,G=E.random,j=function(e,o){if(e=e?e:"",o=o||{},e instanceof j)return e;if(!(this instanceof j))return new j(e,o);var n=t(e);this._originalInput=e,this._r=n.r,this._g=n.g,this._b=n.b,this._a=n.a,this._roundA=L(100*this._a)/100,this._format=o.format||n.format,this._gradientType=o.gradientType,this._r<1&&(this._r=L(this._r)),this._g<1&&(this._g=L(this._g)),this._b<1&&(this._b=L(this._b)),this._ok=n.ok,this._tc_id=B++};j.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var t=this.toRgb();return(299*t.r+587*t.g+114*t.b)/1e3},setAlpha:function(t){return this._a=C(t),this._roundA=L(100*this._a)/100,this},toHsv:function(){var t=i(this._r,this._g,this._b);return{h:360*t.h,s:t.s,v:t.v,a:this._a}},toHsvString:function(){var t=i(this._r,this._g,this._b),e=L(360*t.h),o=L(100*t.s),n=L(100*t.v);return 1===this._a?"hsv("+e+", "+o+"%, "+n+"%)":"hsva("+e+", "+o+"%, "+n+"%, "+this._roundA+")"},toHsl:function(){var t=o(this._r,this._g,this._b);return{h:360*t.h,s:t.s,l:t.l,a:this._a}},toHslString:function(){var t=o(this._r,this._g,this._b),e=L(360*t.h),n=L(100*t.s),i=L(100*t.l);return 1===this._a?"hsl("+e+", "+n+"%, "+i+"%)":"hsla("+e+", "+n+"%, "+i+"%, "+this._roundA+")"},toHex:function(t){return r(this._r,this._g,this._b,t)},toHexString:function(t){return"#"+this.toHex(t)},toHex8:function(){return l(this._r,this._g,this._b,this._a)},toHex8String:function(){return"#"+this.toHex8()},toRgb:function(){return{r:L(this._r),g:L(this._g),b:L(this._b),a:this._a}},toRgbString:function(){return 1===this._a?"rgb("+L(this._r)+", "+L(this._g)+", "+L(this._b)+")":"rgba("+L(this._r)+", "+L(this._g)+", "+L(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:L(100*x(this._r,255))+"%",g:L(100*x(this._g,255))+"%",b:L(100*x(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1===this._a?"rgb("+L(100*x(this._r,255))+"%, "+L(100*x(this._g,255))+"%, "+L(100*x(this._b,255))+"%)":"rgba("+L(100*x(this._r,255))+"%, "+L(100*x(this._g,255))+"%, "+L(100*x(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":this._a<1?!1:q[r(this._r,this._g,this._b,!0)]||!1},toFilter:function(t){var e="#"+l(this._r,this._g,this._b,this._a),o=e,n=this._gradientType?"GradientType = 1, ":"";if(t){var i=j(t);o=i.toHex8String()}return"progid:DXImageTransform.Microsoft.gradient("+n+"startColorstr="+e+",endColorstr="+o+")"},toString:function(t){var e=!!t;t=t||this._format;var o=!1,n=this._a<1&&this._a>=0,i=!e&&n&&("hex"===t||"hex6"===t||"hex3"===t||"name"===t);return i?"name"===t&&0===this._a?this.toName():this.toRgbString():("rgb"===t&&(o=this.toRgbString()),"prgb"===t&&(o=this.toPercentageRgbString()),("hex"===t||"hex6"===t)&&(o=this.toHexString()),"hex3"===t&&(o=this.toHexString(!0)),"hex8"===t&&(o=this.toHex8String()),"name"===t&&(o=this.toName()),"hsl"===t&&(o=this.toHslString()),"hsv"===t&&(o=this.toHsvString()),o||this.toHexString())},_applyModification:function(t,e){var o=t.apply(null,[this].concat([].slice.call(e)));return this._r=o._r,this._g=o._g,this._b=o._b,this.setAlpha(o._a),this},lighten:function(){return this._applyModification(c,arguments)},brighten:function(){return this._applyModification(d,arguments)},darken:function(){return this._applyModification(f,arguments)},desaturate:function(){return this._applyModification(s,arguments)},saturate:function(){return this._applyModification(p,arguments)},greyscale:function(){return this._applyModification(u,arguments)},spin:function(){return this._applyModification(h,arguments)},_applyCombination:function(t,e){return t.apply(null,[this].concat([].slice.call(e)))},analogous:function(){return this._applyCombination(y,arguments)},complement:function(){return this._applyCombination(v,arguments)},monochromatic:function(){return this._applyCombination(w,arguments)},splitcomplement:function(){return this._applyCombination(b,arguments)},triad:function(){return this._applyCombination(m,arguments)},tetrad:function(){return this._applyCombination(g,arguments)}},j.fromRatio=function(t,e){if("object"==typeof t){var o={};for(var n in t)t.hasOwnProperty(n)&&("a"===n?o[n]=t[n]:o[n]=I(t[n]));t=o}return j(t,e)},j.equals=function(t,e){return t&&e?j(t).toRgbString()===j(e).toRgbString():!1},j.random=function(){return j.fromRatio({r:G(),g:G(),b:G()})},j.mix=function(t,e,o){o=0===o?0:o||50;var n,i=j(t).toRgb(),a=j(e).toRgb(),r=o/100,l=2*r-1,s=a.a-i.a;n=l*s===-1?l:(l+s)/(1+l*s),n=(n+1)/2;var p=1-n,u={r:a.r*n+i.r*p,g:a.g*n+i.g*p,b:a.b*n+i.b*p,a:a.a*r+i.a*(1-r)};return j(u)},j.readability=function(t,e){var o=j(t),n=j(e),i=o.toRgb(),a=n.toRgb(),r=o.getBrightness(),l=n.getBrightness(),s=Math.max(i.r,a.r)-Math.min(i.r,a.r)+Math.max(i.g,a.g)-Math.min(i.g,a.g)+Math.max(i.b,a.b)-Math.min(i.b,a.b);return{brightness:Math.abs(r-l),color:s}},j.isReadable=function(t,e){var o=j.readability(t,e);return o.brightness>125&&o.color>500},j.mostReadable=function(t,e){for(var o=null,n=0,i=!1,a=0;a<e.length;a++){var r=j.readability(t,e[a]),l=r.brightness>125&&r.color>500,s=3*(r.brightness/125)+r.color/500;(l&&!i||l&&i&&s>n||!l&&!i&&s>n)&&(i=l,n=s,o=j(e[a]))}return o};var z=j.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},q=j.hexNames=k(z),K=function(){var t="[-\\+]?\\d+%?",e="[-\\+]?\\d*\\.\\d+%?",o="(?:"+e+")|(?:"+t+")",n="[\\s|\\(]+("+o+")[,|\\s]+("+o+")[,|\\s]+("+o+")\\s*\\)?",i="[\\s|\\(]+("+o+")[,|\\s]+("+o+")[,|\\s]+("+o+")[,|\\s]+("+o+")\\s*\\)?";return{rgb:new RegExp("rgb"+n),rgba:new RegExp("rgba"+i),hsl:new RegExp("hsl"+n),hsla:new RegExp("hsla"+i),hsv:new RegExp("hsv"+n),hsva:new RegExp("hsva"+i),hex3:/^([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex8:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();window.tinycolor=j}(),t(function(){t.fn.spectrum.load&&t.fn.spectrum.processNativeColorInputs()})}),function(t,e,o){"use strict";function n(t,e){this.elem=t,e=e||{},this.className=e.className||"easyeditor";var o=["bold","italic","link","h2","h3","h4","alignleft","aligncenter","alignright"];this.buttons=e.buttons||o,this.buttonsHtml=e.buttonsHtml||null,this.overwriteButtonSettings=e.overwriteButtonSettings||null,this.css=e.css||null,this.onLoaded="function"==typeof e.onLoaded?e.onLoaded:null,this.randomString=Math.random().toString(36).substring(7),this.theme=e.theme||null,this.dropdown=e.dropdown||{},this.attachEvents()}n.prototype.attachEvents=function(){this.bootstrap(),this.addToolbar(),this.handleKeypress(),this.handleResizeImage(),this.utils(),null!==this.onLoaded&&this.onLoaded.call(this)},n.prototype.bootstrap=function(){var o=this,n=t(o.elem).prop("tagName").toLowerCase();if("textarea"===n||"input"===n){var i=t(o.elem).attr("placeholder")||"",a=t(o.elem).css("marginTop")||0,r=t(o.elem).css("marginBottom")||0,l="";(a.length>0||r.length>0)&&(l=' style="margin-top: '+a+"; margin-bottom: "+r+'" '),t(o.elem).after('<div id="'+o.randomString+'-editor" placeholder="'+i+'">'+t(o.elem).val()+"</div>"),t(o.elem).hide().addClass(o.randomString+"-bind"),o.elem=e.getElementById(o.randomString+"-editor"),t(o.elem).attr("contentEditable",!0).addClass(o.className).wrap('<div class="'+o.className+'-wrapper"'+l+"></div>")}else t(o.elem).attr("contentEditable",!0).addClass(o.className).wrap('<div class="'+o.className+'-wrapper"></div>');this.$wrapperElem=t(o.elem).parent(),null!==o.css&&t(o.elem).css(o.css),this.containerClass="."+o.className+"-wrapper","string"==typeof o.elem&&(o.elem=t(o.elem).get(0)),null!==o.theme&&t(o.elem).closest(o.containerClass).addClass(o.theme)},n.prototype.handleKeypress=function(){var o=this;t(o.elem).keydown(function(t){return 13===t.keyCode&&o.isSelectionInsideElement("li")===!1?(t.preventDefault(),t.shiftKey===!0?e.execCommand("insertHTML",!1,"<br>"):e.execCommand("insertHTML",!1,"<br><br>"),!1):void 0}),o.elem.addEventListener("paste",function(t){t.preventDefault();var o=t.clipboardData.getData("text/plain").replace(/\n/gi,"<br>");e.execCommand("insertHTML",!1,o)})},n.prototype.isSelectionInsideElement=function(t){var n,i;for(t=t.toUpperCase(),o.getSelection?(n=o.getSelection(),n.rangeCount>0&&(i=n.getRangeAt(0).commonAncestorContainer)):(n=e.selection)&&"Control"!=n.type&&(i=n.createRange().parentElement());i;){if(1==i.nodeType&&i.tagName==t)return!0;i=i.parentNode}return!1},n.prototype.addToolbar=function(){var e=this;t(e.elem).before('<div class="'+e.className+'-toolbar"><ul></ul></div>'),this.$toolbarContainer=this.$wrapperElem.find("."+e.className+"-toolbar"),this.populateButtons()},n.prototype.injectButton=function(e){var o=this;if(null!==o.overwriteButtonSettings&&void 0!==o.overwriteButtonSettings[e.buttonIdentifier]){var n=t.extend({},e,o.overwriteButtonSettings[e.buttonIdentifier]);e=n}null!==o.buttonsHtml&&void 0!==o.buttonsHtml[e.buttonIdentifier]&&(e.buttonHtml=o.buttonsHtml[e.buttonIdentifier]);var i;if(i=e.buttonTitle?e.buttonTitle:e.buttonIdentifier.replace(/\W/g," "),e.buttonHtml)if(void 0!==e.childOf){var a=o.$toolbarContainer.find(".toolbar-"+e.childOf).parent("li");0===a.find("ul").length&&a.append("<ul></ul>"),a=a.find("ul"),a.append('<li><button class="toolbar-'+e.buttonIdentifier+'" title="'+i+'">'+e.buttonHtml+"</button></li>")}else o.$toolbarContainer.children("ul").append('<li><button class="toolbar-'+e.buttonIdentifier+'" title="'+i+'">'+e.buttonHtml+"</button></li>");"function"==typeof e.clickHandler&&t("html").find(o.elem).closest(o.containerClass).delegate(".toolbar-"+e.buttonIdentifier,"click",function(n){void 0!==typeof e.hasChild&&e.hasChild===!0?n.stopPropagation():n.preventDefault(),e.clickHandler.call(this,this),t(o.elem).trigger("keyup")})},n.prototype.openDropdownOf=function(e){var o=this;
t(o.elem).closest(o.containerClass).find(".toolbar-"+e).parent().children("ul").show()},n.prototype.populateButtons=function(){var e=this;t.each(e.buttons,function(t,o){"function"==typeof e[o]&&e[o]()})},n.prototype.handleResizeImage=function(){var o=this;t("html").delegate(o.containerClass+" figure","click",function(e){e.stopPropagation(),t(this).addClass("is-resizable")}),t("html").delegate(o.containerClass+" figure.is-resizable","mousemove",function(e){t(this).find("img").css({width:t(this).width()+"px"})}),t(e).click(function(){t(o.elem).find("figure").removeClass("is-resizable")})},n.prototype.getSelection=function(){if(o.getSelection){var t=o.getSelection();if(t.rangeCount)return t}return!1},n.prototype.removeFormatting=function(o){var n=this,i=o.inFullArea;if(n.isSelectionOutsideOfEditor()===!0)return!1;if(i===!1){var a=n.getSelection(),r=a.toString();if(a&&r.length>0){var l=a.getRangeAt(0),s=t(l.commonAncestorContainer.parentNode);if(s.attr("class")===n.className||s.attr("class")===n.className+"-wrapper"){var p=e.createElement("span");t(p).attr("data-value","temp").html(r.replace(/\n/gi,"<br>")),l.deleteContents(),l.insertNode(p),t('[data-value="temp"]').contents().unwrap()}else{var u,c=!1;t.each(s.parentsUntil(n.elem),function(t,e){u=e,c=!0}),c===!0?t(u).html(t(u).text().replace(/\n/gi,"<br>")).contents().unwrap():s.contents().unwrap()}}}else t(n.elem).html(t(n.elem).text().replace(/\n/gi,"<br>"))},n.prototype.removeEmptyTags=function(){var e=this;t(e.elem).html(t(e.elem).html().replace(/(<(?!\/)[^>]+>)+(<\/[^>]+>)+/,""))},n.prototype.removeBlockElementFromSelection=function(o,n){var i;n=void 0===n?!1:n;var a="";n===!0&&(a=", br");var r=o.getRangeAt(0),l=r.cloneContents(),s=e.createElement("temp");return t(s).html(l),t(s).find("h1, h2, h3, h4, h5, h6, p, div"+a).each(function(){t(this).replaceWith(this.childNodes)}),i=t(s).html()},n.prototype.wrapSelectionWithNodeName=function(o){var n=this;if(n.isSelectionOutsideOfEditor()===!0)return!1;var i={name:"span",blockElement:!1,style:null,"class":null,attribute:null,keepHtml:!1};"string"==typeof o?i.name=o:(i.name=o.nodeName||i.name,i.blockElement=o.blockElement||i.blockElement,i.style=o.style||i.style,i["class"]=o["class"]||i["class"],i.attribute=o.attribute||i.attribute,i.keepHtml=o.keepHtml||i.keepHtml);var a=n.getSelection();if(a&&a.toString().length>0&&a.rangeCount){var r=n.isAlreadyWrapped(a,i),l=a.getRangeAt(0).cloneRange(),s=e.createElement(i.name);if((null!==i.style||null!==i["class"]||null!==i.attribute)&&(s=n.addAttribute(s,i)),n.selectionContainsHtml(l)){if(l=a.getRangeAt(0),i.keepHtml===!0){var p=l.cloneContents(),u=e.createElement("div");u.appendChild(p),t(s).html(u.innerHTML)}else s.textContent=a.toString();l.deleteContents(),l.insertNode(s),l.commonAncestorContainer.localName===i.name&&(t(l.commonAncestorContainer).contents().unwrap(),n.removeEmptyTags())}else l.surroundContents(s),a.removeAllRanges(),a.addRange(l);r===!0&&n.removeWrappedDuplicateTag(s),n.removeEmptyTags(),a.removeAllRanges()}},n.prototype.wrapSelectionWithList=function(o){var n=this;if(o=o||"ul",n.isSelectionOutsideOfEditor()===!0)return!1;var i=n.getSelection();if(i&&i.toString().length>0&&i.rangeCount){var a=n.removeBlockElementFromSelection(i,!0),r=a.split("\n").filter(function(t){return""!==t}),l=t.map(r,function(e){return"<li>"+t.trim(e)+"</li>"}),s=e.createElement(o);t(s).html(l);var p=i.getRangeAt(0);p.deleteContents(),p.insertNode(s),i.removeAllRanges()}},n.prototype.selectionContainsHtml=function(t){var e=this;return t.startContainer.parentNode.className===e.className+"-wrapper"?!1:!0},n.prototype.isAlreadyWrapped=function(e,o){var n=this,i=e.getRangeAt(0),a=t(i.commonAncestorContainer),r=!1;return a.parent().prop("tagName").toLowerCase()===o.name&&a.parent().hasClass(n.className)===!1?r=!0:o.blockElement===!0?t.each(a.parentsUntil(n.elem),function(e,o){var n=o.tagName.toLowerCase();-1!==t.inArray(n,["h1","h2","h3","h4","h5","h6"])&&(r=!0)}):t.each(a.parentsUntil(n.elem),function(t,e){var n=e.tagName.toLowerCase();n===o.name&&(r=!0)}),r},n.prototype.removeWrappedDuplicateTag=function(e){var o=this,n=e.tagName;t(e).unwrap(),t(e).prop("tagName")===n&&t(e).parent().hasClass(o.className)===!1&&t(e).parent().hasClass(o.className+"-wrapper")&&t(e).unwrap()},n.prototype.addAttribute=function(e,o){return null!==o.style&&t(e).attr("style",o.style),null!==o["class"]&&t(e).addClass(o["class"]),null!==o.attribute&&(t.isArray(o.attribute)===!0?t(e).attr(o.attribute[0],o.attribute[1]):t(e).attr(o.attribute)),e},n.prototype.insertAtCaret=function(e){var o=this;if(o.isSelectionOutsideOfEditor()===!0)return!1;if(o.getSelection()){var n=o.getSelection().getRangeAt(0);n.insertNode(e)}else t(e).appendTo(o.elem)},n.prototype.isSelectionOutsideOfEditor=function(){return!this.elementContainsSelection(this.elem)},n.prototype.isOrContains=function(t,e){for(;t;){if(t===e)return!0;t=t.parentNode}return!1},n.prototype.elementContainsSelection=function(t){var n,i=this;if(o.getSelection){if(n=o.getSelection(),n.rangeCount>0){for(var a=0;a<n.rangeCount;++a)if(!i.isOrContains(n.getRangeAt(a).commonAncestorContainer,t))return!1;return!0}}else if((n=e.selection)&&"Control"!==n.type)return i.isOrContains(n.createRange().parentElement(),t);return!1},n.prototype.insertHtml=function(e){var o=this;t(o.elem).find("temp").html(e)},n.prototype.utils=function(){var o=this;if(t("html").delegate("."+o.className+"-modal-close","click",function(e){e.preventDefault(),o.closeModal("#"+t(this).closest("."+o.className+"-modal").attr("id"))}),t("."+o.randomString+"-bind").length>0){var n;t("html").delegate(o.elem,"click keyup",function(){var e=o.elem;clearTimeout(n),n=setTimeout(function(){t("."+o.randomString+"-bind").html(t(e).html())},250)})}t(e).click(function(e){t("."+o.className).closest("."+o.className+"-wrapper").find("."+o.className+"-toolbar > ul > li > ul").hide()})},n.prototype.getYoutubeVideoIdFromUrl=function(t){if(0===t.length)return!1;var e="";return t=t.replace(/(>|<)/gi,"").split(/(vi\/|v=|\/v\/|youtu\.be\/|\/embed\/)/),void 0!==t[2]?(e=t[2].split(/[^0-9a-z_\-]/i),e=e[0]):e=t,e},n.prototype.openModal=function(o){var n=e.createElement("temp");n.textContent=".",this.insertAtCaret(n),t(o).removeClass("is-hidden")},n.prototype.closeModal=function(e){var o=this;t(e).addClass("is-hidden").find("input").val(""),t(e).find("."+o.className+"-modal-content-body-loader").css("width","0");var n=t(this.elem).find("temp");"."===n.html()?n.remove():n.contents().unwrap(),t(this.elem).focus()},n.prototype.bold=function(){var t=this,e={buttonIdentifier:"bold",buttonHtml:"B",clickHandler:function(){t.wrapSelectionWithNodeName({nodeName:"strong",keepHtml:!0})}};t.injectButton(e)},n.prototype.italic=function(){var t=this,e={buttonIdentifier:"italic",buttonHtml:"I",clickHandler:function(){t.wrapSelectionWithNodeName({nodeName:"em",keepHtml:!0})}};t.injectButton(e)},n.prototype.h2=function(){var t=this,e={buttonIdentifier:"header-2",buttonHtml:"H2",clickHandler:function(){t.wrapSelectionWithNodeName({nodeName:"h2",blockElement:!0})}};t.injectButton(e)},n.prototype.h3=function(){var t=this,e={buttonIdentifier:"header-3",buttonHtml:"H3",clickHandler:function(){t.wrapSelectionWithNodeName({nodeName:"h3",blockElement:!0})}};t.injectButton(e)},n.prototype.h4=function(){var t=this,e={buttonIdentifier:"header-4",buttonHtml:"H4",clickHandler:function(){t.wrapSelectionWithNodeName({nodeName:"h4",blockElement:!0})}};t.injectButton(e)},n.prototype.x=function(){var t=this,e={buttonIdentifier:"remove-formatting",buttonHtml:"x",clickHandler:function(){t.removeFormatting({inFullArea:!1})}};t.injectButton(e)},n.prototype.alignleft=function(){var t=this,e={buttonIdentifier:"align-left",buttonHtml:"Align left",clickHandler:function(){t.wrapSelectionWithNodeName({nodeName:"p",style:"text-align: left","class":"text-left",keepHtml:!0})}};t.injectButton(e)},n.prototype.aligncenter=function(){var t=this,e={buttonIdentifier:"align-center",buttonHtml:"Align center",clickHandler:function(){t.wrapSelectionWithNodeName({nodeName:"p",style:"text-align: center","class":"text-center",keepHtml:!0})}};t.injectButton(e)},n.prototype.alignright=function(){var t=this,e={buttonIdentifier:"align-right",buttonHtml:"Align right",clickHandler:function(){t.wrapSelectionWithNodeName({nodeName:"p",style:"text-align: right","class":"text-right",keepHtml:!0})}};t.injectButton(e)},n.prototype.quote=function(){var t=this,e={buttonIdentifier:"quote",buttonHtml:"Quote",clickHandler:function(){t.wrapSelectionWithNodeName({nodeName:"blockquote"})}};t.injectButton(e)},n.prototype.code=function(){var t=this,e={buttonIdentifier:"code",buttonHtml:"Code",clickHandler:function(){t.wrapSelectionWithNodeName({nodeName:"pre"})}};t.injectButton(e)},n.prototype.link=function(){var t=this,e={buttonIdentifier:"link",buttonHtml:"Link",clickHandler:function(){t.wrapSelectionWithNodeName({nodeName:"a",attribute:["href",prompt("Insert link","")]})}};t.injectButton(e)},n.prototype.list=function(){var t=this,e={buttonIdentifier:"list",buttonHtml:"List",clickHandler:function(){t.wrapSelectionWithList()}};t.injectButton(e)},n.prototype.source=function(){var e=this,o={buttonIdentifier:"source",buttonHtml:"Source",clickHandler:function(o){var n,i=t(o).closest("."+e.className+"-wrapper"),a=i.find("."+e.className);t(o).hasClass("is-view-source-mode")?(n=t("body > textarea."+e.className+"-temp"),a.css("visibility","visible"),n.remove(),t(o).removeClass("is-view-source-mode")):(t("body").append('<textarea class="'+e.className+'-temp" style="position: absolute; margin: 0;"></textarea>'),n=t("body > textarea."+e.className+"-temp"),n.css({top:a.offset().top,left:a.offset().left,width:a.outerWidth(),height:a.outerHeight()}).html(a.html()),void 0!==a.css("border")&&n.css("border",a.css("border")),a.css("visibility","hidden"),t(o).addClass("is-view-source-mode"),n.on("keyup click change keypress",function(){a.html(t(this).val())}))}};e.injectButton(o)},o.EasyEditor=n,t.fn.easyEditor=function(e){return this.each(function(){t.data(this,"plugin_easyEditor")||t.data(this,"plugin_easyEditor",new n(this,e))})}}(jQuery,document,window),function(t){t.fn.extend({limiter:function(e,o){function n(t,o){var n=t.value.length;n>e&&(t.value=t.value.substr(0,e),n=e),o.html(e-n+" characters remaining")}t(this).on("keyup focus",function(){n(this,o)}),n(t(this)[0],o)}})}(jQuery),function(t){"use strict";var e,o,n,i="",a={settings:{formURL:"/form.php",fieldsURL:"/fields.php"},init:function(){e=this.settings,a.bindUIActions(),t("#previewForm").hide().fadeOut()},validate:function(e){var o=0,n="";return t(".form-error").remove(),e.data("validate").indexOf("presence")>=0&&(e.val()||(o=1,n='<p class="error">'+e.data("validatemsg")+"</p>")),e.data("validate").indexOf("numeric")>=0&&(t.isNumeric(e.val())||(o=1,n='<p class="error form-error">'+e.data("validatemsg")+"</p>")),o>0?(e.after(n),!1):!0},personaliseForm:function(){t("#personaliseForm .hide-row").hide(),t("#destination").on("change",function(){if("content"===t(this).val()){t(".hide-row").show(),t(".thankyouurl-row").hide(),t("#thankyouContent").easyEditor({buttons:["bold","italic","link","h3","h4","h5","alignleft","aligncenter","alignright","list","x","source"]});var e=t(".countdown");t(".message").limiter(140,e)}else t(".thankyouurl-row").show(),t(".hide-row").hide()})},thankyouCode:function(){var e="",o="",n=encodeURIComponent(t("#shareTweet").val().trim()),i='<h2 class="thankyou-header">'+t("#thankyouHeader").val()+'</h2><div class="thankyou-content">'+t("#thankyouContent").val()+"</div>";return t("#formEntry").is(":checked")&&(o='<div class="form-post"><p>Thank you for submitting the following information:</p></div>'),t("#shareImg").val().length>0&&(e='<div class="share-content"><img src="'+t("#shareImg").val()+'" alt="share this page" /><div class="social-share"><a href="https://www.facebook.com/sharer/sharer.php?u='+t("#sharePage").val()+'" class="fb-btn">Share on Facebook</a><a href="https://twitter.com/home?status='+n+'" class="tw-btn">Share on Twitter</a></div></div>'),i+o+e},buildEmbedCode:function(){var e=a.buildStyle(),o=a.buildScript(),n=a.buildMarkup();t("#generateForm #embedScript").val(o),t("#generateForm #embedStyle").val(e),t("#generateForm #embedTextbox").val(n)},buildMarkup:function(){var e='<div class="bsd-embed-form widgetainer widget-styled">';if(e+='<form name="'+o.signup_form_name+'" class="apiform" action="'+t("#branch").val()+"/page/s/"+o.signup_form_slug+'" method="post" id="'+o.signup_form_id+'">',t("#optIn").is(":checked")){var n=t("#customiseForm form").html().split('<div class="form-row--submit">'),r='<div class="form-row"><input id="email_opt_in" name="email_opt_in" type="checkbox" value="1" checked="checked"><label for="email_opt_in">Keep me up-to-date on this and other Which? campaigns by email</label></div><div class="form-row--submit">';e+=n[0],e+=r,e+=n[1]}else e+=t("#customiseForm form").html();if(e=e.replace('name="address"','name="addr1'),e=e.replace("Personalise Form","Submit Form"),e=e.replace("Next step","Submit Form"),e=e.replace("requiredplaceholder",'required aria-required="true"'),e+="</form>",e+="</div>",i='<div class="signup-wrapper">',t("#logo").val().length>0&&(i+='<div class="signup-logo" style="text-align: '+t("#logoAlignment").val()+';"><img src="'+t("#logo").val()+'" alt="logo" /></div>'),i+=e,"url"!==t("#destination").val()){var l=a.thankyouCode();i+='<div class="thankyou-wrapper">'+l+"</div>"}return i+="</div>"},buildStyle:function(){var e=0,o=0,n=0;t("#paddingVertical").val().length>0&&(o=t("#paddingVertical").val()),t("#paddingHoriz").val().length>0&&(e=t("#paddingHoriz").val()),t("#marginVertical").val().length>0&&(n=t("#marginVertical").val());var i=o+" "+e,a=n,r='<style type="text/css">';return t("#linkColour").val().length>0&&(r+=".signup-wrapper a { color: "+t("#linkColour").val()+"  }"),t("#textColour").val().length>0&&(r+=".signup-wrapper { color: "+t("#textColour").val()+"  }"),t("#bgImg").val().length>0&&(r+=".signup-wrapper { background: url("+t("#bgImg").val()+") no-repeat "+t("#bgColour").val()+"; background-size:cover;  }"),r+=" .signup-logo img { max-width:100%; } .fb-btn {  background-color: #2b4170; /* fallback color */  background: -moz-linear-gradient(top, #3b5998, #2b4170);  background: -ms-linear-gradient(top, #3b5998, #2b4170);  background: -webkit-linear-gradient(top, #3b5998, #2b4170);  border: 1px solid #2b4170;  text-shadow: 0 -1px -1px #1f2f52;} .fb-btn:hover {  background-color: #3b5998; /* fallback color */   background: -moz-linear-gradient(top, #2b4170, #3b5998);  background: -ms-linear-gradient(top, #2b4170, #3b5998);   background: -webkit-linear-gradient(top, #2b4170, #3b5998);}",r+=" .tw-btn {  background-color: #0081ce; /* fallback color */  background: -moz-linear-gradient(top, #00aced, #0081ce);  background: -ms-linear-gradient(top, #00aced, #0081ce);  background: -webkit-linear-gradient(top, #00aced, #0081ce); border: 1px solid #0081ce;  text-shadow: 0 -1px -1px #005ea3;} .tw-btn:hover { background-color: #00aced; /* fallback color */  background: -moz-linear-gradient(top, #0081ce, #00aced);  background: -ms-linear-gradient(top, #0081ce, #00aced);  background: -webkit-linear-gradient(top, #0081ce, #00aced); } .tw-btn, .fb-btn {  border-radius: 3px;  box-shadow: 0 1px 1px #999;  color: #fff;  display: inline-block;  font-size: 16px;  margin: 0 20px 20px 0;  margin: 0 1rem 2rem 0;  padding: 10px 15px;  padding: 1rem 1.5rem;  text-align: center;  width: 140px;}",r+=' body .signup-wrapper label.visible-label:not(.select-label) {display:inline-block; padding-right: 10px;} body .signup-wrapper label {display:none;} .form-row--half input:not([type="submit"]):not([type="radio"]):not([type="checkbox"]), .form-row--half select { width:100%; box-sizing:border-box; } .row-hidden { display:none!important; }   .form-row { display: inline;  float: left;  width: 97.5609756098%;  margin: 0 1.2195121951%; }  .form-row--half { display: inline;  float: left;  width: 47.5609756098%;  margin: 0 1.2195121951%; } .signup-wrapper input:not([type=submit]):not([type="radio"]):not([type="checkbox"]), .signup-wrapper textarea, .signup-wrapper select, .signup-wrapper label, .signup-wrapper .form-radio--label, .signup-wrapper .form-field-static, .signup-wrapper .form-radio--label { padding: '+i+"; width:100%; box-sizing:border-box; margin-top: "+a+"; margin-bottom: "+a+"; } .b--btn.b--btn__submit { box-shadow:0px 2px #a6132c; background-color: #e83755;  border-right-color: #bd1632; width:auto; padding: 12px 60px 12px 25px; color: #ffffff; font-size: 14px; }",r+=" .signup-wr.form-row:not(.form-row--half) + .form-row--half + .form-row--half  { clear:none;}.form-row:not(.form-row--half) + .form-row--half + .form-row--half  + .form-row--half  { clear:left;} .form-row--half:nth-child(2n + 2) { clear:left; }apper input([type=checkbox]), .signup-wrapper input([type=radio]) { width:auto; } #email_opt_in { width:10%;  } body .apiform .form-row #email_opt_in + label { display:block; padding:0; width:85%; float:right; } body .checkbox-label, body .radio-label { float:right; width:85%; padding:0; } body .apiform .form-row .visible-label + input { width:10%; }</style>"},buildScript:function(){var e="";return t("#formValidation").is(":checked")&&(e+='<script type="text/javascript" src="http://cdn.jsdelivr.net/jquery.validation/1.14.0/jquery.validate.min.js" />'),e+='<script type="text/javascript">jQuery(document).ready(function() { jQuery(".thankyou-wrapper").hide();',t("#formValidation").is(":checked")&&(e+='jQuery(".apiform").on("submit", function() {',e+='jQuery(".apiform").validate();',e+="});"),e+='jQuery(".apiform").bsdSignup({no_redirect:true}).on("bsd-success",function(e, response){ e.preventDefault();',t("#formEntry").is(":checked")&&(e+=' var postedHTML = ""; jQuery(".apiform .form-row").not(".row-hidden").each(function(index) { if($(this).find(".form-radio--label").length > 0) {      var postedLabel = $(this).find(".form-radio--label").text();  }    else if ($(this).find("label").length > 0) {      var postedLabel = $(this).find("label").text(); } else { var postedLabel = ""; }  var postedInput = $(this).find(":input").val(); if(postedInput.length > 0 && postedLabel.length > 0) {  postedHTML += postedLabel + " : " + postedInput + "<br />";    }  });',e+=" jQuery(\".thankyou-content\").append('<p class=\"wg-form-posted\">' + postedHTML + '</p>');"),e+="url"===t("#destination").val()?' window.location.replace("'+jQuery("#thankyouURL").val()+'"); ':' jQuery(".apiform").hide(); jQuery(".thankyou-wrapper").show(); ',e+="});});</script>"},editForm:function(){t(".e--edit-form").hide(),t(".e--edit-form").on("click","a",function(e){e.preventDefault(),t(".e--edit-form").hide(),t("#tabbedBox").hide(),t("#fetchForm").fadeIn()})},fetchForm:function(){t("#fetchForm").on("submit","form",function(n){n.preventDefault(),t("p.form-missing").remove();var i=a.validate(t("#formID"));return i===!1?!1:(a.resetBtn(),void t.ajax({url:e.formURL,method:"GET",data:{formID:t("#formID").val(),branch:t("#branch").val()},success:function(e){e=JSON.parse(e);var n=t.makeArray(e);o=n[0].signup_form,a.fetchFields()},error:function(){return t("#formID").after('<p class="error form-missing">I am sorry this signup form does not exist within this branch in the Blue State Digital Tools.</p>'),a.resetBtn(),!1}}))})},fieldType:function(e,o,i,a){switch(e.format){case"1":n+='<label for="'+o+'">'+e.label,(1===e.is_required||"1"===e.is_required)&&(n+="*"),n+="</label>",n+='<input class="w--input-field" type="'+i+'" name="'+o+'" '+a+' placeholder="'+e.label+'" id="'+o+'" />';break;case"2":n+='<label for="'+o+'">'+e.label,(1===e.is_required||"1"===e.is_required)&&(n+="*"),n+="</label>",n+='<textarea class="w--input-field" '+a+' name="'+o+'">'+e.label+"</textarea>";break;case"3":if("Country"===e.label)n+='<label class="visible-label select-label" for="country">Country',(1===e.is_required||"1"===e.is_required)&&(n+="*"),n+="</label>",n+='<select  class="w--input-field" id="country" name="country"><option value=""></option><option value="AF">Afghanistan</option><option value="AL">Albania</option><option value="DZ">Algeria</option><option value="AS">American Samoa</option><option value="AD">Andorra</option><option value="AO">Angola</option><option value="AI">Anguilla</option><option value="AG">Antigua and Barbuda</option><option value="AR">Argentina</option><option value="AM">Armenia</option><option value="AW">Aruba</option><option value="AU">Australia</option><option value="AT">Austria</option><option value="AZ">Azerbaijan</option><option value="BS">Bahamas</option><option value="BH">Bahrain</option><option value="BD">Bangladesh</option><option value="BB">Barbados</option><option value="BY">Belarus</option><option value="BE">Belgium</option><option value="BZ">Belize</option><option value="BJ">Benin</option><option value="BM">Bermuda</option><option value="BT">Bhutan</option><option value="BO">Bolivia</option><option value="BA">Bosnia and Herzegovina</option><option value="BW">Botswana</option><option value="BR">Brazil</option><option value="VG">British Virgin Islands</option><option value="IO">British Indian Ocean Territory</option><option value="BN">Brunei</option><option value="BG">Bulgaria</option><option value="BF">Burkina Faso</option><option value="BI">Burundi</option><option value="KH">Cambodia</option><option value="CM">Cameroon</option><option value="CA">Canada</option><option value="CV">Cape Verde</option><option value="KY">Cayman Islands</option><option value="CF">Central African Republic</option><option value="TD">Chad</option><option value="CL">Chile</option><option value="CN">China</option><option value="CX">Christmas Island</option><option value="CO">Colombia</option><option value="KM">Comoros Islands</option><option value="CD">Congo, Democratic Republic of the</option><option value="CG">Congo, Republic of the</option><option value="CK">Cook Islands</option><option value="CR">Costa Rica</option><option value="CI">Cote D\'ivoire</option><option value="HR">Croatia</option><option value="CU">Cuba</option><option value="CY">Cyprus</option><option value="CZ">Czech Republic</option><option value="DK">Denmark</option><option value="DJ">Djibouti</option><option value="DM">Dominica</option><option value="DO">Dominican Republic</option><option value="TP">East Timor</option><option value="EC">Ecuador</option><option value="EG">Egypt</option><option value="SV">El Salvador</option><option value="GQ">Equatorial Guinea</option><option value="ER">Eritrea</option><option value="EE">Estonia</option><option value="ET">Ethiopia</option><option value="FK">Falkland Islands (Malvinas)</option><option value="FO">Faroe Islands</option><option value="FJ">Fiji</option><option value="FI">Finland</option><option value="FR">France</option><option value="GF">French Guiana</option><option value="PF">French Polynesia</option><option value="TF">French Southern Territories</option><option value="GA">Gabon</option><option value="GM">Gambia</option><option value="GE">Georgia</option><option value="DE">Germany</option><option value="GH">Ghana</option><option value="GI">Gibraltar</option><option value="GR">Greece</option><option value="GL">Greenland</option><option value="GD">Grenada</option><option value="GP">Guadeloupe</option><option value="GU">Guam</option><option value="GT">Guatemala</option><option value="GN">Guinea</option><option value="GW">Guinea-Bissau</option><option value="GY">Guyana</option><option value="HT">Haiti</option><option value="VA">Holy See (Vatican City State)</option><option value="HN">Honduras</option><option value="HK">Hong Kong</option><option value="HU">Hungary</option><option value="IS">Iceland</option><option value="IN">India</option><option value="ID">Indonesia</option><option value="IR">Iran</option><option value="IQ">Iraq</option><option value="IE">Republic of Ireland</option><option value="IL">Israel</option><option value="IT">Italy</option><option value="JM">Jamaica</option><option value="JP">Japan</option><option value="JO">Jordan</option><option value="KZ">Kazakhstan</option><option value="KE">Kenya</option><option value="KI">Kiribati</option><option value="KR">South Korea</option><option value="XK">Kosovo</option><option value="KW">Kuwait</option><option value="KG">Kyrgyzstan</option><option value="LA">Laos</option><option value="LV">Latvia</option><option value="LB">Lebanon</option><option value="LS">Lesotho</option><option value="LR">Liberia</option><option value="LY">Libya</option><option value="LI">Liechtenstein</option><option value="LT">Lithuania</option><option value="LU">Luxembourg</option><option value="MO">Macau</option><option value="MK">Macedonia</option><option value="MG">Madagascar</option><option value="MW">Malawi</option><option value="MY">Malaysia</option><option value="MV">Maldives</option><option value="ML">Mali</option><option value="MT">Malta</option><option value="MH">Marshall Islands</option><option value="MQ">Martinique</option><option value="MR">Mauritania</option><option value="MU">Mauritius</option><option value="YT">Mayotte</option><option value="MX">Mexico</option><option value="FM">Micronesia</option><option value="MD">Moldova, Republic of</option><option value="MC">Monaco</option><option value="MN">Mongolia</option><option value="ME">Montenegro</option><option value="MS">Montserrat</option><option value="MA">Morocco</option><option value="MZ">Mozambique</option><option value="MM">Myanmar</option><option value="NA">Namibia</option><option value="NR">Nauru</option><option value="NP">Nepal</option><option value="NL">Netherlands</option><option value="AN">Netherlands Antilles</option><option value="NC">New Caledonia</option><option value="NZ">New Zealand</option><option value="NI">Nicaragua</option><option value="NE">Niger</option><option value="NG">Nigeria</option><option value="NU">Niue</option><option value="NF">Norfolk Island</option><option value="MP">Northern Mariana Islands</option><option value="NO">Norway</option><option value="OM">Oman</option><option value="PK">Pakistan</option><option value="PW">Palau</option><option value="PA">Panama</option><option value="PG">Papua New Guinea</option><option value="PY">Paraguay</option><option value="PE">Peru</option><option value="PH">Philippines</option><option value="PN">Pitcairn Island</option><option value="PL">Poland</option><option value="PT">Portugal</option><option value="PR">Puerto Rico</option><option value="QA">Qatar</option><option value="RE">Reunion</option><option value="RO">Romania</option><option value="RU">Russian Federation</option><option value="RW">Rwanda</option><option value="KN">Saint Kitts and Nevis</option><option value="LC">Saint Lucia</option><option value="VC">Saint Vincent and the Grenadines</option><option value="WS">Samoa</option><option value="SM">San Marino</option><option value="ST">Sao Tome and Principe</option><option value="SA">Saudi Arabia</option><option value="SN">Senegal</option><option value="RS">Serbia</option><option value="SC">Seychelles</option><option value="SL">Sierra Leone</option><option value="SG">Singapore</option><option value="SK">Slovakia</option><option value="SI">Slovenia</option><option value="SB">Solomon Islands</option><option value="SO">Somalia</option><option value="ZA">South Africa</option><option value="SS">South Sudan</option><option value="ES">Spain</option><option value="LK">Sri Lanka</option><option value="SH">St. Helena</option><option value="PM">St. Pierre and Miquelon</option><option value="SD">Sudan</option><option value="SR">Suriname</option><option value="SY">Syria</option><option value="SZ">Swaziland</option><option value="SE">Sweden</option><option value="CH">Switzerland</option><option value="TW">Taiwan</option><option value="TJ">Tajikistan</option><option value="TZ">Tanzania</option><option value="TH">Thailand</option><option value="TG">Togo</option><option value="TK">Tokelau</option><option value="TO">Tonga</option><option value="TT">Trinidad and Tobago</option><option value="TN">Tunisia</option><option value="TR">Turkey</option><option value="TM">Turkmenistan</option><option value="TC">Turks and Caicos Islands</option><option value="TV">Tuvalu</option><option value="UG">Uganda</option><option value="UA">Ukraine</option><option value="AE">United Arab Emirates</option><option value="GB" selected="selected">United Kingdom</option><option value="US">United States</option><option value="UY">Uruguay</option><option value="UZ">Uzbekistan</option><option value="VU">Vanuatu</option><option value="VE">Venezuela</option><option value="VN">Viet Nam</option><option value="VI">Virgin Islands (U.S.)</option><option value="WF">Wallis and Futuna Islands</option><option value="EH">Western Sahara</option><option value="YE">Yemen</option><option value="ZM">Zambia</option><option value="ZW">Zimbabwe</option></select>';else{n+='<label class="visible-label select-label" for="'+o+'">'+e.label,(1===e.is_required||"1"===e.is_required)&&(n+="*"),n+="</label>",n+="<select "+a+' class="w--input-field" name="'+o+'" id="'+o+'">';var r=e.extra_def.options;r=r.split("\r\n"),t.each(r,function(t,e){var o=e.split("|");n+=o.length>1?'<option value="'+o[0]+'">'+o[1]+"</option>":'<option value="'+o[0]+'">'+o[0]+"</option>"}),n+="</select>"}break;case"4":n+='<p class="form-radio--label">'+e.label,(1===e.is_required||"1"===e.is_required)&&(n+="*"),n+="</p>",r=e.extra_def.options,r=r.split("\r\n"),t.each(r,function(t,e){var i=e.split("|"),r="";r=i.length>1?i[1]:i[0],n+='<label class="visible-label checkbox-label" for="'+o+"_"+t+'">'+r+"</label>",n+='<input class="w--input-field" type="checkbox" name="'+o+'[]" '+a+' value="'+i[0]+'" id="'+o+"_"+t+'" onclick="if(this.checked) { this.form[\''+o+"["+t+"]'].value='"+r+"'; } else { this.form['"+o+"["+t+"]'].value=''; }\" />",n+='<input type="hidden" name="'+o+"["+t+']" />'});break;case"5":n+='<p class="form-radio--label">'+e.label,(1===e.is_required||"1"===e.is_required)&&(n+="*"),n+="</p>",r=e.extra_def.options,r=r.split("\r\n"),t.each(r,function(t,e){var i=e.split("|"),r="";r=i.length>1?i[1]:i[0],n+='<label class="visible-label radio-label" for="'+o+"_"+t+'">'+r+"</label>",n+='<input class="w--input-field" type="radio" name="'+o+'[]" '+a+' value="'+i[0]+'" id="'+o+"_"+t+'" onclick="if(this.checked) { this.form[\''+o+"["+t+"]'].value='"+r+"'; } else { this.form['"+o+"["+t+"]'].value=''; }\" />",n+='<input type="hidden" name="'+o+"["+t+']" />'});break;case"6":n+='<p class="form-field-static">'+e.extra_def.text+"</p>";break;case"7":e.extra_def.desc.length>0&&e.label!==e.extra_def.desc?(n+='<p class="checkbox-text">'+e.label,(1===e.is_required||"1"===e.is_required)&&(n+="*"),n+="</p>",n+='<label  class="visible-label checkbox-label" for="'+o+'">'+e.extra_def.desc+"</label>"):n+='<label  class="visible-label checkbox-label" for="'+o+'">'+e.label+"</label>",n+='<input class="w--input-field" type="checkbox" name="'+o+'" '+a+' value="1" id="'+o+'" />';break;case"8":n+='<label for="'+o+'">'+e.label,(1===e.is_required||"1"===e.is_required)&&(n+="*"),n+="</label>",n+='<input  class="w--input-field" type="file" name="'+o+'" '+a+' placeholder="'+e.label+'" id="'+o+'" />',n+='<p class="desc">Max upload size: '+e.extra_def.file_size+"mb ";break;case"9":n+='<label for="'+o+'">'+e.label,(1===e.is_required||"1"===e.is_required)&&(n+="*"),n+="</label>",n+='<input  class="w--input-field" type="text" name="'+o+'" '+a+' placeholder="'+e.label+'" id="'+o+'" />';break;case"10":n+='<label for="'+o+'">'+e.label+"</label>",n+='<input  class="w--input-field" type="hidden" name="'+o+'" '+a+' placeholder="'+e.label+'" id="'+o+'" />';break;default:n+='<label for="'+o+'">'+e.label,(1===e.is_required||"1"===e.is_required)&&(n+="*"),n+="</label>",n+='<input  class="w--input-field" type="'+i+'" name="'+o+'" '+a+' placeholder="'+e.label+'" id="'+o+'" />'}},buildFields:function(t){var e="text",o="",i="",r="";i="0"===t.is_custom_field?"Postal Code"===t.description?"zip":t.description.replace(/\s+/g,"").toLowerCase():"custom-"+t["@attributes"].id,
"0"===t.is_shown&&(e="hidden",o=" row-hidden"),"Email"===t.description&&(e="email"),"1"===t.is_required&&(o+=" row-required",r=' data-validate="presence" requiredplaceholder data-validateMsg="Please enter a valid '+t.label+'" '),n+='<div class="form-row form-row--left '+o+'">',a.fieldType(t,i,e,r),n+="</div>"},resetBtn:function(){t("#fetchForm .b--btn").hasClass("loading-animation")?t("#fetchForm .b--btn").removeClass("loading-animation").val("Fetch form").attr("disabled",!1).css({cursor:"pointer"}):t("#fetchForm .b--btn").addClass("loading-animation").val("Loading...").attr("disabled",!0).css({cursor:"default"})},fetchFields:function(){t.ajax({url:e.fieldsURL,method:"GET",data:{formID:t("#formID").val(),branch:t("#branch").val()},success:function(e){e=JSON.parse(e);var o=t.makeArray(e);n="",o=o[0].signup_form_field,t.each(o,function(t,e){a.buildFields(e)}),t("#customiseForm .sortable-rows").html(n),t(".row-hidden").remove(),t("#fetchForm").hide(),t("#tabbedBox").fadeIn(),t(".form-id--display").html(t("#formID").val()),t(".e--edit-form").show(),t("#customiseForm .form-row").on("click",function(){t(".l-customise--step2").hasClass("current-step")&&(t(this).hasClass("form-row--half")?t(this).removeClass("form-row--half"):t(this).addClass("form-row--half"))}),a.resetBtn()},error:function(){}})},fieldSort:function(){t("#customiseForm .sortable-rows").sortable({revert:!0,start:function(){}}),t("#customiseForm .sortable-rows").disableSelection(),t("#customiseForm .form-row").on("mouseup",function(){return t(this).removeClass(".is-dragging"),!1}),t("#customiseForm .form-row").on("mousedown",function(){return t(this).addClass("is-dragging"),!1}),t("#customiseForm .form-row").droppable({greedy:!0,tolerance:"pointer"})},copyClipboard:function(t){var e=document.createElement("input");e.setAttribute("value",t),document.body.appendChild(e),e.select(),document.execCommand("copy"),document.body.removeChild(e)},toggleBtn:function(t,e){t.val().length>0?e.removeClass("btn-disabled"):e.addClass("btn-disabled")},previewForm:function(){var e=a.buildStyle(),o=a.buildMarkup();return t(".preview-form__wrapper").remove(),t("#previewForm").html('<div class="preview-form__wrapper">'+e+o+"</div>").show().fadeIn(),t(".preview-form__wrapper .thankyou-wrapper").length>0&&t(".thankyou-wrapper").hide(),t("#previewForm").on("click",function(){a.removePreviewForm()}),t(".preview-form__wrapper").on("click",function(){return!1}),t("#previewForm").on("click",".icon-times-circle",function(){a.removePreviewForm()}),!1},removePreviewForm:function(){t("#previewForm").fadeOut().hide().find(".preview-form__wrapper").remove()},formListener:function(){t(".b--btn__preview").on("click",function(){return a.previewForm(),!1}),t("#personaliseForm form").on("submit",function(e){return e.preventDefault(),"content"!==t("#destination").val()||0!==t("#thankyouHeader").val().length&&0!==t("#thankyouContent").val().length?"url"===t("#destination").val()&&0===t("#thankyouURL").val().length?(t(".form-missing").remove(),t("#thankyouURL").after('<p class="error form-missing">Please complete the highlighted fields.</p>'),t(".required").addClass("invalid-fields"),!1):(t(".required").removeClass("invalid-fields"),t(".form-missing").remove(),a.buildEmbedCode(),t("#tabbedBox").tabs({disabled:""}),t("#tabbedBox").tabs("option","active",2),t("html, body").animate({scrollTop:0},100),!1):(t(".form-missing").remove(),t(".fieldset--submit").before('<p class="error form-missing">Please complete the highlighted fields.</p>'),t(".required").addClass("invalid-fields"),!1)}),t("#formID").blur(function(){a.toggleBtn(t("#formID"),t("#fetchForm").find('input[type="submit"]'))}),t("#formID").keydown(function(){a.toggleBtn(t("#formID"),t("#fetchForm").find('input[type="submit"]'))}),t("#customiseForm").on("submit","form",function(e){return e.preventDefault(),t("#tabbedBox").tabs("option","active",1),t("html, body").animate({scrollTop:0},100),!1}),t("#generateForm").on("click",".b--btn__submit",function(e){e.preventDefault();var o=t(this).data("copy");return a.copyClipboard(t("#"+o).val()),t(this).val("Copied to clipboard"),setTimeout(function(){t(this).val("Copy to clipboard")},5e3),!1}),t("body").on("blur",".invalid-fields",function(){t(this).length>0?t(this).removeClass("invalid-fields"):t(this).addClass("invalid-fields")})},customiseFormSetup:function(){t(".l-customise--step2").hide(),t("#customiseSubmit").val("Next step").addClass("btn-step-2"),t(".l-customise--step1 h4").on("click",function(){return t(".l-customise--step2").hide().removeClass("current-step"),t(".l-customise--step1").show().addClass("current-step"),t("html, body").animate({scrollTop:0},100),t(this).parent().parent().removeClass("row-toggled"),t("#customiseForm .sortable-rows").sortable({revert:!0,start:function(){}}),t("#customiseSubmit").val("Next step").addClass("btn-step-2"),!1}),t("#customiseForm").on("click",".btn-step-2",function(){return t(this).val("Personalise form").removeClass("btn-step-2"),t(".l-customise--step1").removeClass("current-step"),t(".l-customise--step2").show().addClass("current-step"),t("#customiseForm .sortable-rows").sortable("destroy"),t("html, body").animate({scrollTop:0},100),t(this).parent().parent().addClass("row-toggled"),!1})},bindUIActions:function(){t("#fetchForm").find('input[type="submit"]').addClass("btn-disabled"),t("#personaliseForm h3").on("click","a",function(){t(this).find("span").hasClass("icon-chevron-up")?t(this).find("span").removeClass("icon-chevron-up").addClass("icon-chevron-down"):t(this).find("span").removeClass("icon-chevron-down").addClass("icon-chevron-up");var e=t(this).parent().next(".accordion-content");return e.hasClass("active-content")?e.removeClass("active-content"):e.addClass("active-content"),!1}),t("#tabbedBox").tabs({disabled:[2]}),t(".picker").spectrum({showInput:!0,className:"full-spectrum",showInitial:!1,showPalette:!0,showSelectionPalette:!0,maxSelectionSize:10,preferredFormat:"hex",palette:[["rgb(227,6,19)","rgb(45, 53, 61)","rgb(231, 55, 85)","rgb(58, 85, 175)","rgb(76, 98, 108)"]]})}};a.init(),a.formListener(),a.fetchForm(),a.editForm(),a.customiseFormSetup(),a.personaliseForm(),a.fieldSort()}(jQuery),!function(t){"use strict";"function"==typeof define&&define.amd?define(["jquery"],t):"object"==typeof exports&&"object"==typeof module?module.exports=t:t(jQuery)}(function(t,e){"use strict";function o(e,o,n,i){for(var a=[],r=0;r<e.length;r++){var l=e[r];if(l){var s=tinycolor(l),p=s.toHsl().l<.5?"sp-thumb-el sp-thumb-dark":"sp-thumb-el sp-thumb-light";p+=tinycolor.equals(o,l)?" sp-thumb-active":"";var u=s.toString(i.preferredFormat||"rgb"),c=m?"background-color:"+s.toRgbString():"filter:"+s.toFilter();a.push('<span title="'+u+'" data-color="'+s.toRgbString()+'" class="'+p+'"><span class="sp-thumb-inner" style="'+c+';" /></span>')}else{var d="sp-clear-display";a.push(t("<div />").append(t('<span data-color="" style="background-color:transparent;" class="'+d+'"></span>').attr("title",i.noColorSelectedText)).html())}}return'<div class="sp-cf '+n+'">'+a.join("")+"</div>"}function n(){for(var t=0;t<h.length;t++)h[t]&&h[t].hide()}function i(e,o){var n=t.extend({},f,e);return n.callbacks={move:p(n.move,o),change:p(n.change,o),show:p(n.show,o),hide:p(n.hide,o),beforeShow:p(n.beforeShow,o)},n}function a(a,l){function p(){if(V.showPaletteOnly&&(V.showPalette=!0),Dt.text(V.showPaletteOnly?V.togglePaletteMoreText:V.togglePaletteLessText),V.palette){ft=V.palette.slice(0),ht=t.isArray(ft[0])?ft:[ft],vt={};for(var e=0;e<ht.length;e++)for(var o=0;o<ht[e].length;o++){var n=tinycolor(ht[e][o]).toRgbString();vt[n]=!0}}xt.toggleClass("sp-flat",W),xt.toggleClass("sp-input-disabled",!V.showInput),xt.toggleClass("sp-alpha-enabled",V.showAlpha),xt.toggleClass("sp-clear-enabled",Jt),xt.toggleClass("sp-buttons-disabled",!V.showButtons),xt.toggleClass("sp-palette-buttons-disabled",!V.togglePaletteOnly),xt.toggleClass("sp-palette-disabled",!V.showPalette),xt.toggleClass("sp-palette-only",V.showPaletteOnly),xt.toggleClass("sp-initial-disabled",!V.showInitial),xt.addClass(V.className).addClass(V.containerClassName),G()}function f(){function e(e){return e.data&&e.data.ignore?(H(t(e.target).closest(".sp-thumb-el").data("color")),E()):(H(t(e.target).closest(".sp-thumb-el").data("color")),E(),O(!0),V.hideAfterPaletteSelect&&T()),!1}if(v&&xt.find("*:not(input)").attr("unselectable","on"),p(),jt&&kt.after(zt).hide(),Jt||Et.hide(),W)kt.after(xt).hide();else{var o="parent"===V.appendTo?kt.parent():t(V.appendTo);1!==o.length&&(o=t("body")),o.append(xt)}y(),qt.bind("click.spectrum touchstart.spectrum",function(e){Ct||A(),e.stopPropagation(),t(e.target).is("input")||e.preventDefault()}),(kt.is(":disabled")||V.disabled===!0)&&K(),xt.click(s),Pt.change(M),Pt.bind("paste",function(){setTimeout(M,1)}),Pt.keydown(function(t){13===t.keyCode&&M()}),Bt.text(V.cancelText),Bt.bind("click.spectrum",function(t){t.stopPropagation(),t.preventDefault(),P(),T()}),Et.attr("title",V.clearText),Et.bind("click.spectrum",function(t){t.stopPropagation(),t.preventDefault(),Yt=!0,E(),W&&O(!0)}),Lt.text(V.chooseText),Lt.bind("click.spectrum",function(t){t.stopPropagation(),t.preventDefault(),v&&Pt.is(":focus")&&Pt.trigger("change"),B()&&(O(!0),T())}),Dt.text(V.showPaletteOnly?V.togglePaletteMoreText:V.togglePaletteLessText),Dt.bind("click.spectrum",function(t){t.stopPropagation(),t.preventDefault(),V.showPaletteOnly=!V.showPaletteOnly,V.showPaletteOnly||W||xt.css("left","-="+(St.outerWidth(!0)+5)),p()}),u(Nt,function(t,e,o){dt=t/rt,Yt=!1,o.shiftKey&&(dt=Math.round(10*dt)/10),E()},S,_),u(At,function(t,e){pt=parseFloat(e/it),Yt=!1,V.showAlpha||(dt=1),E()},S,_),u(_t,function(t,e,o){if(o.shiftKey){if(!yt){var n=ut*et,i=ot-ct*ot,a=Math.abs(t-n)>Math.abs(e-i);yt=a?"x":"y"}}else yt=null;var r=!yt||"x"===yt,l=!yt||"y"===yt;r&&(ut=parseFloat(t/et)),l&&(ct=parseFloat((ot-e)/ot)),Yt=!1,V.showAlpha||(dt=1),E()},S,_),Ut?(H(Ut),L(),Qt=Wt||tinycolor(Ut).format,w(Ut)):L(),W&&F();var n=v?"mousedown.spectrum":"click.spectrum touchstart.spectrum";Ht.delegate(".sp-thumb-el",n,e),Rt.delegate(".sp-thumb-el:nth-child(1)",n,{ignore:!0},e)}function y(){if(Z&&window.localStorage){try{var e=window.localStorage[Z].split(",#");e.length>1&&(delete window.localStorage[Z],t.each(e,function(t,e){w(e)}))}catch(o){}try{mt=window.localStorage[Z].split(";")}catch(o){}}}function w(e){if(Q){var o=tinycolor(e).toRgbString();if(!vt[o]&&-1===t.inArray(o,mt))for(mt.push(o);mt.length>gt;)mt.shift();if(Z&&window.localStorage)try{window.localStorage[Z]=mt.join(";")}catch(n){}}}function k(){var t=[];if(V.showPalette)for(var e=0;e<mt.length;e++){var o=tinycolor(mt[e]).toRgbString();vt[o]||t.push(mt[e])}return t.reverse().slice(0,V.maxSelectionSize)}function C(){var e=R(),n=t.map(ht,function(t,n){return o(t,e,"sp-palette-row sp-palette-row-"+n,V)});y(),mt&&n.push(o(k(),e,"sp-palette-row sp-palette-row-selection",V)),Ht.html(n.join(""))}function x(){if(V.showInitial){var t=Vt,e=R();Rt.html(o([t,e],e,"sp-palette-row-initial",V))}}function S(){(0>=ot||0>=et||0>=it)&&G(),tt=!0,xt.addClass(bt),yt=null,kt.trigger("dragstart.spectrum",[R()])}function _(){tt=!1,xt.removeClass(bt),kt.trigger("dragstop.spectrum",[R()])}function M(){var t=Pt.val();if(null!==t&&""!==t||!Jt){var e=tinycolor(t);e.isValid()?(H(e),O(!0)):Pt.addClass("sp-validation-error")}else H(null),O(!0)}function A(){X?T():F()}function F(){var e=t.Event("beforeShow.spectrum");return X?void G():(kt.trigger(e,[R()]),void(J.beforeShow(R())===!1||e.isDefaultPrevented()||(n(),X=!0,t(wt).bind("keydown.spectrum",I),t(wt).bind("click.spectrum",N),t(window).bind("resize.spectrum",$),zt.addClass("sp-active"),xt.removeClass("sp-hidden"),G(),L(),Vt=R(),x(),J.show(Vt),kt.trigger("show.spectrum",[Vt]))))}function I(t){27===t.keyCode&&T()}function N(t){2!==t.button&&(tt||(Zt?O(!0):P(),T()))}function T(){X&&!W&&(X=!1,t(wt).unbind("keydown.spectrum",I),t(wt).unbind("click.spectrum",N),t(window).unbind("resize.spectrum",$),zt.removeClass("sp-active"),xt.addClass("sp-hidden"),J.hide(R()),kt.trigger("hide.spectrum",[R()]))}function P(){H(Vt,!0)}function H(t,e){if(tinycolor.equals(t,R()))return void L();var o,n;!t&&Jt?Yt=!0:(Yt=!1,o=tinycolor(t),n=o.toHsv(),pt=n.h%360/360,ut=n.s,ct=n.v,dt=n.a),L(),o&&o.isValid()&&!e&&(Qt=Wt||o.getFormat())}function R(t){return t=t||{},Jt&&Yt?null:tinycolor.fromRatio({h:pt,s:ut,v:ct,a:Math.round(100*dt)/100},{format:t.format||Qt})}function B(){return!Pt.hasClass("sp-validation-error")}function E(){L(),J.move(R()),kt.trigger("move.spectrum",[R()])}function L(){Pt.removeClass("sp-validation-error"),D();var t=tinycolor.fromRatio({h:pt,s:1,v:1});_t.css("background-color",t.toHexString());var e=Qt;1>dt&&(0!==dt||"name"!==e)&&("hex"===e||"hex3"===e||"hex6"===e||"name"===e)&&(e="rgb");var o=R({format:e}),n="";if(Kt.removeClass("sp-clear-display"),Kt.css("background-color","transparent"),!o&&Jt)Kt.addClass("sp-clear-display");else{var i=o.toHexString(),a=o.toRgbString();if(m||1===o.alpha?Kt.css("background-color",a):(Kt.css("background-color","transparent"),Kt.css("filter",o.toFilter())),V.showAlpha){var r=o.toRgb();r.a=0;var l=tinycolor(r).toRgbString(),s="linear-gradient(left, "+l+", "+i+")";v?It.css("filter",tinycolor(l).toFilter({gradientType:1},i)):(It.css("background","-webkit-"+s),It.css("background","-moz-"+s),It.css("background","-ms-"+s),It.css("background","linear-gradient(to right, "+l+", "+i+")"))}n=o.toString(e)}V.showInput&&Pt.val(n),V.showPalette&&C(),x()}function D(){var t=ut,e=ct;if(Jt&&Yt)Tt.hide(),Ft.hide(),Mt.hide();else{Tt.show(),Ft.show(),Mt.show();var o=t*et,n=ot-e*ot;o=Math.max(-nt,Math.min(et-nt,o-nt)),n=Math.max(-nt,Math.min(ot-nt,n-nt)),Mt.css({top:n+"px",left:o+"px"});var i=dt*rt;Tt.css({left:i-lt/2+"px"});var a=pt*it;Ft.css({top:a-st+"px"})}}function O(t){var e=R(),o="",n=!tinycolor.equals(e,Vt);e&&(o=e.toString(Qt),w(e)),Ot&&kt.val(o),t&&n&&(J.change(e),kt.trigger("change",[e]))}function G(){et=_t.width(),ot=_t.height(),nt=Mt.height(),at=At.width(),it=At.height(),st=Ft.height(),rt=Nt.width(),lt=Tt.width(),W||(xt.css("position","absolute"),V.offset?xt.offset(V.offset):xt.offset(r(xt,qt))),D(),V.showPalette&&C(),kt.trigger("reflow.spectrum")}function j(){kt.show(),qt.unbind("click.spectrum touchstart.spectrum"),xt.remove(),zt.remove(),h[$t.id]=null}function z(o,n){return o===e?t.extend({},V):n===e?V[o]:(V[o]=n,void p())}function q(){Ct=!1,kt.attr("disabled",!1),qt.removeClass("sp-disabled")}function K(){T(),Ct=!0,kt.attr("disabled",!0),qt.addClass("sp-disabled")}function U(t){V.offset=t,G()}var V=i(l,a),W=V.flat,Q=V.showSelectionPalette,Z=V.localStorageKey,Y=V.theme,J=V.callbacks,$=c(G,10),X=!1,tt=!1,et=0,ot=0,nt=0,it=0,at=0,rt=0,lt=0,st=0,pt=0,ut=0,ct=0,dt=1,ft=[],ht=[],vt={},mt=V.selectionPalette.slice(0),gt=V.maxSelectionSize,bt="sp-dragging",yt=null,wt=a.ownerDocument,kt=(wt.body,t(a)),Ct=!1,xt=t(b,wt).addClass(Y),St=xt.find(".sp-picker-container"),_t=xt.find(".sp-color"),Mt=xt.find(".sp-dragger"),At=xt.find(".sp-hue"),Ft=xt.find(".sp-slider"),It=xt.find(".sp-alpha-inner"),Nt=xt.find(".sp-alpha"),Tt=xt.find(".sp-alpha-handle"),Pt=xt.find(".sp-input"),Ht=xt.find(".sp-palette"),Rt=xt.find(".sp-initial"),Bt=xt.find(".sp-cancel"),Et=xt.find(".sp-clear"),Lt=xt.find(".sp-choose"),Dt=xt.find(".sp-palette-toggle"),Ot=kt.is("input"),Gt=Ot&&"color"===kt.attr("type")&&d(),jt=Ot&&!W,zt=jt?t(g).addClass(Y).addClass(V.className).addClass(V.replacerClassName):t([]),qt=jt?zt:kt,Kt=zt.find(".sp-preview-inner"),Ut=V.color||Ot&&kt.val(),Vt=!1,Wt=V.preferredFormat,Qt=Wt,Zt=!V.showButtons||V.clickoutFiresChange,Yt=!Ut,Jt=V.allowEmpty&&!Gt;f();var $t={show:F,hide:T,toggle:A,reflow:G,option:z,enable:q,disable:K,offset:U,set:function(t){H(t),O()},get:R,destroy:j,container:xt};return $t.id=h.push($t)-1,$t}function r(e,o){var n=0,i=e.outerWidth(),a=e.outerHeight(),r=o.outerHeight(),l=e[0].ownerDocument,s=l.documentElement,p=s.clientWidth+t(l).scrollLeft(),u=s.clientHeight+t(l).scrollTop(),c=o.offset();return c.top+=r,c.left-=Math.min(c.left,c.left+i>p&&p>i?Math.abs(c.left+i-p):0),c.top-=Math.min(c.top,c.top+a>u&&u>a?Math.abs(a+r-n):n),c}function l(){}function s(t){t.stopPropagation()}function p(t,e){var o=Array.prototype.slice,n=o.call(arguments,2);return function(){return t.apply(e,n.concat(o.call(arguments)))}}function u(e,o,n,i){function a(t){t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault(),t.returnValue=!1}function r(t){if(u){if(v&&p.documentMode<9&&!t.button)return s();var n=t.originalEvent&&t.originalEvent.touches&&t.originalEvent.touches[0],i=n&&n.pageX||t.pageX,r=n&&n.pageY||t.pageY,l=Math.max(0,Math.min(i-c.left,f)),m=Math.max(0,Math.min(r-c.top,d));h&&a(t),o.apply(e,[l,m,t])}}function l(o){var i=o.which?3===o.which:2===o.button;i||u||n.apply(e,arguments)!==!1&&(u=!0,d=t(e).height(),f=t(e).width(),c=t(e).offset(),t(p).bind(m),t(p.body).addClass("sp-dragging"),r(o),a(o))}function s(){u&&(t(p).unbind(m),t(p.body).removeClass("sp-dragging"),setTimeout(function(){i.apply(e,arguments)},0)),u=!1}o=o||function(){},n=n||function(){},i=i||function(){};var p=document,u=!1,c={},d=0,f=0,h="ontouchstart"in window,m={};m.selectstart=a,m.dragstart=a,m["touchmove mousemove"]=r,m["touchend mouseup"]=s,t(e).bind("touchstart mousedown",l)}function c(t,e,o){var n;return function(){var i=this,a=arguments,r=function(){n=null,t.apply(i,a)};o&&clearTimeout(n),(o||!n)&&(n=setTimeout(r,e))}}function d(){return t.fn.spectrum.inputTypeColorSupport()}var f={beforeShow:l,move:l,change:l,show:l,hide:l,color:!1,flat:!1,showInput:!0,allowEmpty:!0,showButtons:!0,clickoutFiresChange:!0,showInitial:!0,showPalette:!1,showPaletteOnly:!1,hideAfterPaletteSelect:!1,togglePaletteOnly:!1,showSelectionPalette:!0,localStorageKey:!1,appendTo:"body",maxSelectionSize:7,cancelText:"cancel",chooseText:"choose",togglePaletteMoreText:"more",togglePaletteLessText:"less",clearText:"Clear Color Selection",noColorSelectedText:"No Color Selected",preferredFormat:!1,className:"",containerClassName:"",replacerClassName:"",showAlpha:!1,theme:"sp-light",palette:[["#ffffff","#000000","#ff0000","#ff8000","#ffff00","#008000","#0000ff","#4b0082","#9400d3","#fff"]],selectionPalette:[],disabled:!1,offset:null},h=[],v=!!/msie/i.exec(window.navigator.userAgent),m=function(){function t(t,e){return!!~(""+t).indexOf(e)}var e=document.createElement("div"),o=e.style;return o.cssText="background-color:rgba(0,0,0,.5)",t(o.backgroundColor,"rgba")||t(o.backgroundColor,"hsla")}(),g=['<div class="sp-replacer">','<div class="sp-preview"><div class="sp-preview-inner"></div></div>','<div class="sp-dd">&#9660;</div>',"</div>"].join(""),b=function(){var t="";if(v)for(var e=1;6>=e;e++)t+='<div class="sp-'+e+'""></div>';return['<div class="sp-container sp-hidden">','<div class="sp-palette-container">','<div class="sp-palette sp-thumb sp-cf"></div>','<div class="sp-palette-button-container sp-cf">','<button type="button" class="sp-palette-toggle"></button>',"</div>","</div>",'<div class="sp-picker-container">','<div class="sp-top sp-cf">','<div class="sp-fill"></div>','<div class="sp-top-inner">','<div class="sp-color">','<div class="sp-sat">','<div class="sp-val">','<div class="sp-dragger"></div>',"</div>","</div>","</div>",'<div class="sp-clear sp-clear-display">',"</div>",'<div class="sp-hue">','<div class="sp-slider"></div>',t,"</div>","</div>",'<div class="sp-alpha"><div class="sp-alpha-inner"><div class="sp-alpha-handle"></div></div></div>',"</div>",'<div class="sp-input-container sp-cf">','<input class="sp-input" type="text" spellcheck="false"  />',"</div>",'<div class="sp-initial sp-thumb sp-cf"></div>','<div class="sp-button-container sp-cf">','<a class="sp-cancel" href="#"></a>','<button type="button" class="sp-choose"></button>',"</div>","</div>","</div>"].join("")}(),y="spectrum.id";t.fn.spectrum=function(e,o){if("string"==typeof e){var n=this,i=Array.prototype.slice.call(arguments,1);return this.each(function(){var o=h[t(this).data(y)];if(o){var a=o[e];if(!a)throw new Error('Spectrum: no such method: "'+e+'"');"get"===e?n=o.get():"container"===e?n=o.container:"option"===e?n=o.option.apply(o,i):"destroy"===e?(o.destroy(),t(this).removeData(y)):a.apply(o,i)}}),n}return this.spectrum("destroy").each(function(){var o=t.extend({},e,t(this).data()),n=a(this,o);t(this).data(y,n.id)})},t.fn.spectrum.load=!0,t.fn.spectrum.loadOpts={},t.fn.spectrum.draggable=u,t.fn.spectrum.defaults=f,t.fn.spectrum.inputTypeColorSupport=function w(){if("undefined"==typeof w._cachedResult){var e=t('<input type="color"/>')[0];w._cachedResult="color"===e.type&&""!==e.value}return w._cachedResult},t.spectrum={},t.spectrum.localization={},t.spectrum.palettes={},t.fn.spectrum.processNativeColorInputs=function(){var e=t("input[type=color]");e.length&&!d()&&e.spectrum({preferredFormat:"hex6"})},function(){function t(t){var o={r:0,g:0,b:0},i=1,r=!1,l=!1;return"string"==typeof t&&(t=P(t)),"object"==typeof t&&(t.hasOwnProperty("r")&&t.hasOwnProperty("g")&&t.hasOwnProperty("b")?(o=e(t.r,t.g,t.b),r=!0,l="%"===String(t.r).substr(-1)?"prgb":"rgb"):t.hasOwnProperty("h")&&t.hasOwnProperty("s")&&t.hasOwnProperty("v")?(t.s=I(t.s),t.v=I(t.v),o=a(t.h,t.s,t.v),r=!0,l="hsv"):t.hasOwnProperty("h")&&t.hasOwnProperty("s")&&t.hasOwnProperty("l")&&(t.s=I(t.s),t.l=I(t.l),o=n(t.h,t.s,t.l),r=!0,l="hsl"),t.hasOwnProperty("a")&&(i=t.a)),i=C(i),{ok:r,format:t.format||l,r:D(255,O(o.r,0)),g:D(255,O(o.g,0)),b:D(255,O(o.b,0)),a:i}}function e(t,e,o){return{r:255*x(t,255),g:255*x(e,255),b:255*x(o,255)}}function o(t,e,o){t=x(t,255),e=x(e,255),o=x(o,255);var n,i,a=O(t,e,o),r=D(t,e,o),l=(a+r)/2;if(a===r)n=i=0;else{var s=a-r;switch(i=l>.5?s/(2-a-r):s/(a+r),a){case t:n=(e-o)/s+(o>e?6:0);break;case e:n=(o-t)/s+2;break;case o:n=(t-e)/s+4}n/=6}return{h:n,s:i,l:l}}function n(t,e,o){function n(t,e,o){return 0>o&&(o+=1),o>1&&(o-=1),1/6>o?t+6*(e-t)*o:.5>o?e:2/3>o?t+(e-t)*(2/3-o)*6:t}var i,a,r;if(t=x(t,360),e=x(e,100),o=x(o,100),0===e)i=a=r=o;else{var l=.5>o?o*(1+e):o+e-o*e,s=2*o-l;i=n(s,l,t+1/3),a=n(s,l,t),r=n(s,l,t-1/3)}return{r:255*i,g:255*a,b:255*r}}function i(t,e,o){t=x(t,255),e=x(e,255),o=x(o,255);var n,i,a=O(t,e,o),r=D(t,e,o),l=a,s=a-r;if(i=0===a?0:s/a,a===r)n=0;else{switch(a){case t:n=(e-o)/s+(o>e?6:0);break;case e:n=(o-t)/s+2;break;case o:n=(t-e)/s+4}n/=6}return{h:n,s:i,v:l}}function a(t,e,o){t=6*x(t,360),e=x(e,100),o=x(o,100);var n=E.floor(t),i=t-n,a=o*(1-e),r=o*(1-i*e),l=o*(1-(1-i)*e),s=n%6,p=[o,r,a,a,l,o][s],u=[l,o,o,r,a,a][s],c=[a,a,l,o,o,r][s];return{r:255*p,g:255*u,b:255*c}}function r(t,e,o,n){var i=[F(L(t).toString(16)),F(L(e).toString(16)),F(L(o).toString(16))];return n&&i[0].charAt(0)===i[0].charAt(1)&&i[1].charAt(0)===i[1].charAt(1)&&i[2].charAt(0)===i[2].charAt(1)?i[0].charAt(0)+i[1].charAt(0)+i[2].charAt(0):i.join("")}function l(t,e,o,n){var i=[F(N(n)),F(L(t).toString(16)),F(L(e).toString(16)),F(L(o).toString(16))];return i.join("")}function s(t,e){e=0===e?0:e||10;var o=j(t).toHsl();return o.s-=e/100,o.s=S(o.s),j(o)}function p(t,e){e=0===e?0:e||10;var o=j(t).toHsl();return o.s+=e/100,o.s=S(o.s),j(o)}function u(t){return j(t).desaturate(100)}function c(t,e){e=0===e?0:e||10;var o=j(t).toHsl();return o.l+=e/100,o.l=S(o.l),j(o)}function d(t,e){e=0===e?0:e||10;var o=j(t).toRgb();return o.r=O(0,D(255,o.r-L(255*-(e/100)))),o.g=O(0,D(255,o.g-L(255*-(e/100)))),o.b=O(0,D(255,o.b-L(255*-(e/100)))),j(o)}function f(t,e){e=0===e?0:e||10;var o=j(t).toHsl();return o.l-=e/100,o.l=S(o.l),j(o)}function h(t,e){var o=j(t).toHsl(),n=(L(o.h)+e)%360;return o.h=0>n?360+n:n,j(o)}function v(t){var e=j(t).toHsl();return e.h=(e.h+180)%360,j(e)}function m(t){var e=j(t).toHsl(),o=e.h;return[j(t),j({h:(o+120)%360,s:e.s,l:e.l}),j({h:(o+240)%360,s:e.s,l:e.l})]}function g(t){var e=j(t).toHsl(),o=e.h;return[j(t),j({h:(o+90)%360,s:e.s,l:e.l}),j({h:(o+180)%360,s:e.s,l:e.l}),j({h:(o+270)%360,s:e.s,l:e.l})]}function b(t){var e=j(t).toHsl(),o=e.h;return[j(t),j({h:(o+72)%360,s:e.s,l:e.l}),j({h:(o+216)%360,s:e.s,l:e.l})]}function y(t,e,o){e=e||6,o=o||30;var n=j(t).toHsl(),i=360/o,a=[j(t)];for(n.h=(n.h-(i*e>>1)+720)%360;--e;)n.h=(n.h+i)%360,a.push(j(n));return a}function w(t,e){e=e||6;for(var o=j(t).toHsv(),n=o.h,i=o.s,a=o.v,r=[],l=1/e;e--;)r.push(j({h:n,s:i,v:a})),a=(a+l)%1;return r}function k(t){var e={};for(var o in t)t.hasOwnProperty(o)&&(e[t[o]]=o);return e}function C(t){return t=parseFloat(t),(isNaN(t)||0>t||t>1)&&(t=1),t}function x(t,e){M(t)&&(t="100%");var o=A(t);return t=D(e,O(0,parseFloat(t))),o&&(t=parseInt(t*e,10)/100),E.abs(t-e)<1e-6?1:t%e/parseFloat(e)}function S(t){return D(1,O(0,t))}function _(t){return parseInt(t,16)}function M(t){return"string"==typeof t&&-1!=t.indexOf(".")&&1===parseFloat(t)}function A(t){return"string"==typeof t&&-1!=t.indexOf("%")}function F(t){return 1===t.length?"0"+t:""+t}function I(t){return 1>=t&&(t=100*t+"%"),t}function N(t){return Math.round(255*parseFloat(t)).toString(16)}function T(t){return _(t)/255}function P(t){t=t.replace(H,"").replace(R,"").toLowerCase();var e=!1;if(z[t])t=z[t],e=!0;else if("transparent"===t)return{r:0,g:0,b:0,a:0,format:"name"};var o;return(o=K.rgb.exec(t))?{r:o[1],g:o[2],b:o[3]}:(o=K.rgba.exec(t))?{r:o[1],g:o[2],b:o[3],a:o[4]}:(o=K.hsl.exec(t))?{h:o[1],s:o[2],l:o[3]}:(o=K.hsla.exec(t))?{h:o[1],s:o[2],l:o[3],a:o[4]}:(o=K.hsv.exec(t))?{h:o[1],s:o[2],v:o[3]}:(o=K.hsva.exec(t))?{h:o[1],s:o[2],v:o[3],a:o[4]}:(o=K.hex8.exec(t))?{a:T(o[1]),r:_(o[2]),g:_(o[3]),b:_(o[4]),format:e?"name":"hex8"}:(o=K.hex6.exec(t))?{r:_(o[1]),g:_(o[2]),b:_(o[3]),format:e?"name":"hex"}:(o=K.hex3.exec(t))?{r:_(o[1]+""+o[1]),g:_(o[2]+""+o[2]),b:_(o[3]+""+o[3]),format:e?"name":"hex"}:!1}var H=/^[\s,#]+/,R=/\s+$/,B=0,E=Math,L=E.round,D=E.min,O=E.max,G=E.random,j=function(e,o){if(e=e?e:"",o=o||{},e instanceof j)return e;if(!(this instanceof j))return new j(e,o);var n=t(e);this._originalInput=e,this._r=n.r,this._g=n.g,this._b=n.b,this._a=n.a,this._roundA=L(100*this._a)/100,this._format=o.format||n.format,this._gradientType=o.gradientType,this._r<1&&(this._r=L(this._r)),this._g<1&&(this._g=L(this._g)),this._b<1&&(this._b=L(this._b)),this._ok=n.ok,this._tc_id=B++};j.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var t=this.toRgb();return(299*t.r+587*t.g+114*t.b)/1e3},setAlpha:function(t){return this._a=C(t),this._roundA=L(100*this._a)/100,this},toHsv:function(){var t=i(this._r,this._g,this._b);return{h:360*t.h,s:t.s,v:t.v,a:this._a}},toHsvString:function(){var t=i(this._r,this._g,this._b),e=L(360*t.h),o=L(100*t.s),n=L(100*t.v);return 1===this._a?"hsv("+e+", "+o+"%, "+n+"%)":"hsva("+e+", "+o+"%, "+n+"%, "+this._roundA+")"},toHsl:function(){var t=o(this._r,this._g,this._b);return{h:360*t.h,s:t.s,l:t.l,a:this._a}},toHslString:function(){var t=o(this._r,this._g,this._b),e=L(360*t.h),n=L(100*t.s),i=L(100*t.l);return 1===this._a?"hsl("+e+", "+n+"%, "+i+"%)":"hsla("+e+", "+n+"%, "+i+"%, "+this._roundA+")"},toHex:function(t){return r(this._r,this._g,this._b,t)},toHexString:function(t){return"#"+this.toHex(t)},toHex8:function(){return l(this._r,this._g,this._b,this._a)},toHex8String:function(){return"#"+this.toHex8()},toRgb:function(){return{r:L(this._r),g:L(this._g),b:L(this._b),a:this._a}},toRgbString:function(){return 1===this._a?"rgb("+L(this._r)+", "+L(this._g)+", "+L(this._b)+")":"rgba("+L(this._r)+", "+L(this._g)+", "+L(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:L(100*x(this._r,255))+"%",g:L(100*x(this._g,255))+"%",b:L(100*x(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1===this._a?"rgb("+L(100*x(this._r,255))+"%, "+L(100*x(this._g,255))+"%, "+L(100*x(this._b,255))+"%)":"rgba("+L(100*x(this._r,255))+"%, "+L(100*x(this._g,255))+"%, "+L(100*x(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":this._a<1?!1:q[r(this._r,this._g,this._b,!0)]||!1},toFilter:function(t){var e="#"+l(this._r,this._g,this._b,this._a),o=e,n=this._gradientType?"GradientType = 1, ":"";if(t){var i=j(t);o=i.toHex8String()}return"progid:DXImageTransform.Microsoft.gradient("+n+"startColorstr="+e+",endColorstr="+o+")"},toString:function(t){var e=!!t;t=t||this._format;var o=!1,n=this._a<1&&this._a>=0,i=!e&&n&&("hex"===t||"hex6"===t||"hex3"===t||"name"===t);return i?"name"===t&&0===this._a?this.toName():this.toRgbString():("rgb"===t&&(o=this.toRgbString()),"prgb"===t&&(o=this.toPercentageRgbString()),("hex"===t||"hex6"===t)&&(o=this.toHexString()),"hex3"===t&&(o=this.toHexString(!0)),"hex8"===t&&(o=this.toHex8String()),"name"===t&&(o=this.toName()),"hsl"===t&&(o=this.toHslString()),"hsv"===t&&(o=this.toHsvString()),o||this.toHexString())},_applyModification:function(t,e){var o=t.apply(null,[this].concat([].slice.call(e)));return this._r=o._r,this._g=o._g,this._b=o._b,this.setAlpha(o._a),this},lighten:function(){return this._applyModification(c,arguments)},brighten:function(){return this._applyModification(d,arguments)},darken:function(){return this._applyModification(f,arguments)},desaturate:function(){return this._applyModification(s,arguments)},saturate:function(){return this._applyModification(p,arguments)},greyscale:function(){return this._applyModification(u,arguments)},spin:function(){return this._applyModification(h,arguments)},_applyCombination:function(t,e){return t.apply(null,[this].concat([].slice.call(e)))},analogous:function(){return this._applyCombination(y,arguments)},complement:function(){return this._applyCombination(v,arguments)},monochromatic:function(){return this._applyCombination(w,arguments)},splitcomplement:function(){return this._applyCombination(b,arguments)},triad:function(){return this._applyCombination(m,arguments)},tetrad:function(){return this._applyCombination(g,arguments)}},j.fromRatio=function(t,e){if("object"==typeof t){var o={};for(var n in t)t.hasOwnProperty(n)&&("a"===n?o[n]=t[n]:o[n]=I(t[n]));t=o}return j(t,e)},j.equals=function(t,e){return t&&e?j(t).toRgbString()===j(e).toRgbString():!1},j.random=function(){return j.fromRatio({r:G(),g:G(),b:G()})},j.mix=function(t,e,o){o=0===o?0:o||50;var n,i=j(t).toRgb(),a=j(e).toRgb(),r=o/100,l=2*r-1,s=a.a-i.a;n=l*s===-1?l:(l+s)/(1+l*s),n=(n+1)/2;var p=1-n,u={r:a.r*n+i.r*p,g:a.g*n+i.g*p,b:a.b*n+i.b*p,a:a.a*r+i.a*(1-r)};return j(u)},j.readability=function(t,e){var o=j(t),n=j(e),i=o.toRgb(),a=n.toRgb(),r=o.getBrightness(),l=n.getBrightness(),s=Math.max(i.r,a.r)-Math.min(i.r,a.r)+Math.max(i.g,a.g)-Math.min(i.g,a.g)+Math.max(i.b,a.b)-Math.min(i.b,a.b);return{brightness:Math.abs(r-l),color:s}},j.isReadable=function(t,e){var o=j.readability(t,e);return o.brightness>125&&o.color>500},j.mostReadable=function(t,e){for(var o=null,n=0,i=!1,a=0;a<e.length;a++){var r=j.readability(t,e[a]),l=r.brightness>125&&r.color>500,s=3*(r.brightness/125)+r.color/500;(l&&!i||l&&i&&s>n||!l&&!i&&s>n)&&(i=l,n=s,o=j(e[a]))}return o};var z=j.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",
indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},q=j.hexNames=k(z),K=function(){var t="[-\\+]?\\d+%?",e="[-\\+]?\\d*\\.\\d+%?",o="(?:"+e+")|(?:"+t+")",n="[\\s|\\(]+("+o+")[,|\\s]+("+o+")[,|\\s]+("+o+")\\s*\\)?",i="[\\s|\\(]+("+o+")[,|\\s]+("+o+")[,|\\s]+("+o+")[,|\\s]+("+o+")\\s*\\)?";return{rgb:new RegExp("rgb"+n),rgba:new RegExp("rgba"+i),hsl:new RegExp("hsl"+n),hsla:new RegExp("hsla"+i),hsv:new RegExp("hsv"+n),hsva:new RegExp("hsva"+i),hex3:/^([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex8:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();window.tinycolor=j}(),t(function(){t.fn.spectrum.load&&t.fn.spectrum.processNativeColorInputs()})}),function(t){"use strict";var e,o,n,i="",a={settings:{formURL:"/form.php",fieldsURL:"/fields.php"},init:function(){e=this.settings,a.bindUIActions()},validate:function(e){var o=0,n="";return t(".form-error").remove(),e.data("validate").indexOf("presence")>=0&&(e.val()||(o=1,n='<p class="error">'+e.data("validatemsg")+"</p>")),e.data("validate").indexOf("numeric")>=0&&(t.isNumeric(e.val())||(o=1,n='<p class="error form-error">'+e.data("validatemsg")+"</p>")),o>0?(e.after(n),!1):!0},personaliseForm:function(){t("#personaliseForm .hide-row").hide(),t("#destination").on("change",function(){"content"===t(this).val()?(t(".hide-row").show(),t(".thankyouurl-row").hide()):(t(".thankyouurl-row").show(),t(".hide-row").hide())})},thankyouCode:function(){var e=encodeURIComponent(t("#shareTweet").val().trim()),o='<h2 class="thankyou-header">'+t("#thankyouHeader").val()+'</h2><div class="thankyou-content">'+t("#thankyouContent").val()+"</div>";if(t("#formEntry").is(":checked"))var n='<div class="form-post"><p>Thank you for submitting the following information:</p></div>';var i='<div class="share-content"><img src="'+t("#shareImg").val()+'" alt="share this page" /><div class="social-share"><a href="https://www.facebook.com/sharer/sharer.php?u='+t("#sharePage").val()+'" class="fb-btn">Share on Facebook</a><a href="https://twitter.com/home?status='+e+'" class="tw-btn">Share on Twitter</a></div></div>';return o+n+i},buildEmbedCode:function(){var e=0,n=0,r=0,l=0;t("#paddingVertical").val().length>0&&(n=t("#paddingVertical").val()),t("#paddingHoriz").val().length>0&&(e=t("#paddingHoriz").val()),t("#marginVertical").val().length>0&&(l=t("#marginVertical").val()),t("#marginHoriz").val().length>0&&(r=t("#marginHoriz").val());var s=n+" "+e,p=l+" "+r,u='<style type="text/css">';t("#linkColour").val().length>0&&(u+=".signup-wrapper a { color: "+t("#linkColour").val()+"  }"),t("#textColour").val().length>0&&(u+=".signup-wrapper { color: "+t("#textColour").val()+"  }"),t("#bgImg").val().length>0&&(u+=".signup-wrapper { background: url("+t("#bgImg").val()+") no-repeat "+t("#bgColour").val()+"; background-size:cover;  }"),u+=" .fb-btn {  background-color: #2b4170; /* fallback color */  background: -moz-linear-gradient(top, #3b5998, #2b4170);  background: -ms-linear-gradient(top, #3b5998, #2b4170);  background: -webkit-linear-gradient(top, #3b5998, #2b4170);  border: 1px solid #2b4170;  text-shadow: 0 -1px -1px #1f2f52;} .fb-btn:hover {  background-color: #3b5998; /* fallback color */   background: -moz-linear-gradient(top, #2b4170, #3b5998);  background: -ms-linear-gradient(top, #2b4170, #3b5998);   background: -webkit-linear-gradient(top, #2b4170, #3b5998);}",u+=" .tw-btn {  background-color: #0081ce; /* fallback color */  background: -moz-linear-gradient(top, #00aced, #0081ce);  background: -ms-linear-gradient(top, #00aced, #0081ce);  background: -webkit-linear-gradient(top, #00aced, #0081ce); border: 1px solid #0081ce;  text-shadow: 0 -1px -1px #005ea3;} .tw-btn:hover { background-color: #00aced; /* fallback color */  background: -moz-linear-gradient(top, #0081ce, #00aced);  background: -ms-linear-gradient(top, #0081ce, #00aced);  background: -webkit-linear-gradient(top, #0081ce, #00aced); } .tw-btn, .fb-btn {  border-radius: 3px;  box-shadow: 0 1px 1px #999;  color: #fff;  display: inline-block;  font-size: 16px;  margin: 0 20px 20px 0;  margin: 0 1rem 2rem 0;  padding: 10px 15px;  padding: 1rem 1.5rem;  text-align: center;  width: 140px;}",u+=' body .signup-wrapper label.visible-label {display:inline-block; padding-right: 10px;}  body .signup-wrapper label {display:none;} .form-row--half input:not([type="submit"]):not([type="radio"]):not([type="checkbox"]), .form-row--half select { width:80%; box-sizing:border-box; } .row-hidden { display:none!important; } .form-row--half { display: inline;  float: left;  width: 47.5609756098%;  margin: 0 1.2195121951%; } .signup-wrapper input:not([type=submit]), .signup-wrapper textarea, .signup-wrapper select, .signup-wrapper label, .signup-wrapper .form-radio--label, .signup-wrapper .form-field-static, .signup-wrapper .form-radio--label { padding: '+s+"; width:85%; margin: "+p+"; } .b--btn.b--btn__submit { box-shadow:0px 2px #a6132c; background-color: #e83755;  border-right-color: #bd1632; width:auto; padding: 12px 60px 12px 25px; color: #ffffff; font-size: 14px; } .signup-wrapper input([type=checkbox]), .signup-wrapper input([type=radio]) { width:auto; } </style>";var c='<script type="text/javascript">jQuery(document).ready(function() { jQuery(".thankyou-wrapper").hide();';t("#formValidation").is(":checked")&&(c+='jQuery(".apiform").on("submit", function() {',c+='jQuery(".row-required").each(function(index) {',c+='var selectedInput = jQuery(this).find(".w--input-field");',c+='if(selectedInput.data("validate") === "presence" && selectedInput.val().length === 0) {',c+="jQuery(this).append('<p class=\"form-error\">' + selectedInput.data(\"validatemsg\") + '</p>');",c+='selectedInput.addClass("invalid-fields");',c+='  selectedInput.on("blur", function() {',c+='    if(jQuery(this).length > 0) { jQuery(this).next("p.form-error").remove(); jQuery(this).removeClass("invalid-fields"); }',c+="    else {",c+='      jQuery(this).addClass("invalid-fields");',c+=" } return false; });}});});"),c+='jQuery(".apiform").bsdSignup({no_redirect:true}).on("bsd-success",function(e, response){ e.preventDefault();',t("#formEntry").is(":checked")&&(c+=' var postedHTML = ""; jQuery(".apiform .form-row").not(".row-hidden").each(function(index) { if($(this).find(".form-radio--label").length > 0) {      var postedLabel = $(this).find(".form-radio--label").text();  }    else if ($(this).find("label").length > 0) {      var postedLabel = $(this).find("label").text(); } else { var postedLabel = ""; }  var postedInput = $(this).find(":input").val(); if(postedInput.length > 0 && postedLabel.length > 0) {  postedHTML += postedLabel + " : " + postedInput + "<br />";    }  });',c+=" jQuery(\".thankyou-content\").append('<p class=\"wg-form-posted\">' + postedHTML + '</p>');"),c+="url"===t("#destination").val()?' window.location.replace("'+jQuery("#thankyouURL").val()+'"); ':' jQuery(".apiform").hide(); jQuery(".thankyou-wrapper").show(); ',c+="});});</script>";var d='<div class="bsd-embed-form widgetainer widget-styled">';if(d+='<form name="'+o.signup_form_name+'" class="apiform" action="'+t("#branch").val()+"/page/s/"+o.signup_form_slug+'" method="post" id="'+o.signup_form_id+'">',d+=t("#customiseForm form").html(),d=d.replace("Personalise form","Submit form"),d+="</form>",d+="</div>",i+='<div class="signup-wrapper">',t("#logo").val().length>0&&(i+='<div class="signup-logo" style="text-align: '+t("#logoAlignment").val()+';"><img src="'+t("#logo").val()+'" alt="logo" /></div>'),i+=d,"url"!==t("#destination").val()){var f=a.thankyouCode();i+='<div class="thankyou-wrapper">'+f+"</div>"}i+="</div>",t("#generateForm #embedScript").val(c),t("#generateForm #embedStyle").val(u),t("#generateForm #embedTextbox").val(i),c="",u="",i=""},editForm:function(){t(".e--edit-form").hide(),t(".e--edit-form").on("click","a",function(e){e.preventDefault(),t(".e--edit-form").hide(),t("#tabbedBox").hide(),t("#fetchForm").fadeIn()})},fetchForm:function(){t("#fetchForm").on("submit","form",function(n){n.preventDefault(),t("p.form-missing").remove();var i=a.validate(t("#formID"));return i===!1?!1:(t("#fetchForm .b--btn").addClass("loading-animation").attr("disabled",!0).css({cursor:"default"}),void t.ajax({url:e.formURL,method:"GET",data:{formID:t("#formID").val(),branch:t("#branch").val()},success:function(e){e=JSON.parse(e);var n=t.makeArray(e);o=n[0].signup_form,a.fetchFields()},error:function(){return t("#formID").after('<p class="error form-missing">I am sorry this signup form does not exist within this branch in the Blue State Digital Tools.</p>'),t("#fetchForm .b--btn").removeClass("loading-animation").attr("disabled",!1).css({cursor:"pointer"}),!1}}))})},fieldType:function(e,o,i,a){switch(e.format){case"1":n+='<label for="'+o+'">'+e.label+"</label>",n+='<input class="w--input-field" type="'+i+'" name="'+o+'" '+a+' placeholder="'+e.label+'" id="'+o+'" />';break;case"2":n+='<label for="'+o+'">'+e.label+"</label>",n+='<textarea class="w--input-field" '+a+' name="'+o+'">'+e.label+"</textarea>";break;case"3":if("Country"===e.label)n+='<label class="visible-label" for="country">Country</label>',n+='<select  class="w--input-field" id="country" name="country"><option value=""></option><option value="AF">Afghanistan</option><option value="AL">Albania</option><option value="DZ">Algeria</option><option value="AS">American Samoa</option><option value="AD">Andorra</option><option value="AO">Angola</option><option value="AI">Anguilla</option><option value="AG">Antigua and Barbuda</option><option value="AR">Argentina</option><option value="AM">Armenia</option><option value="AW">Aruba</option><option value="AU">Australia</option><option value="AT">Austria</option><option value="AZ">Azerbaijan</option><option value="BS">Bahamas</option><option value="BH">Bahrain</option><option value="BD">Bangladesh</option><option value="BB">Barbados</option><option value="BY">Belarus</option><option value="BE">Belgium</option><option value="BZ">Belize</option><option value="BJ">Benin</option><option value="BM">Bermuda</option><option value="BT">Bhutan</option><option value="BO">Bolivia</option><option value="BA">Bosnia and Herzegovina</option><option value="BW">Botswana</option><option value="BR">Brazil</option><option value="VG">British Virgin Islands</option><option value="IO">British Indian Ocean Territory</option><option value="BN">Brunei</option><option value="BG">Bulgaria</option><option value="BF">Burkina Faso</option><option value="BI">Burundi</option><option value="KH">Cambodia</option><option value="CM">Cameroon</option><option value="CA">Canada</option><option value="CV">Cape Verde</option><option value="KY">Cayman Islands</option><option value="CF">Central African Republic</option><option value="TD">Chad</option><option value="CL">Chile</option><option value="CN">China</option><option value="CX">Christmas Island</option><option value="CO">Colombia</option><option value="KM">Comoros Islands</option><option value="CD">Congo, Democratic Republic of the</option><option value="CG">Congo, Republic of the</option><option value="CK">Cook Islands</option><option value="CR">Costa Rica</option><option value="CI">Cote D\'ivoire</option><option value="HR">Croatia</option><option value="CU">Cuba</option><option value="CY">Cyprus</option><option value="CZ">Czech Republic</option><option value="DK">Denmark</option><option value="DJ">Djibouti</option><option value="DM">Dominica</option><option value="DO">Dominican Republic</option><option value="TP">East Timor</option><option value="EC">Ecuador</option><option value="EG">Egypt</option><option value="SV">El Salvador</option><option value="GQ">Equatorial Guinea</option><option value="ER">Eritrea</option><option value="EE">Estonia</option><option value="ET">Ethiopia</option><option value="FK">Falkland Islands (Malvinas)</option><option value="FO">Faroe Islands</option><option value="FJ">Fiji</option><option value="FI">Finland</option><option value="FR">France</option><option value="GF">French Guiana</option><option value="PF">French Polynesia</option><option value="TF">French Southern Territories</option><option value="GA">Gabon</option><option value="GM">Gambia</option><option value="GE">Georgia</option><option value="DE">Germany</option><option value="GH">Ghana</option><option value="GI">Gibraltar</option><option value="GR">Greece</option><option value="GL">Greenland</option><option value="GD">Grenada</option><option value="GP">Guadeloupe</option><option value="GU">Guam</option><option value="GT">Guatemala</option><option value="GN">Guinea</option><option value="GW">Guinea-Bissau</option><option value="GY">Guyana</option><option value="HT">Haiti</option><option value="VA">Holy See (Vatican City State)</option><option value="HN">Honduras</option><option value="HK">Hong Kong</option><option value="HU">Hungary</option><option value="IS">Iceland</option><option value="IN">India</option><option value="ID">Indonesia</option><option value="IR">Iran</option><option value="IQ">Iraq</option><option value="IE">Republic of Ireland</option><option value="IL">Israel</option><option value="IT">Italy</option><option value="JM">Jamaica</option><option value="JP">Japan</option><option value="JO">Jordan</option><option value="KZ">Kazakhstan</option><option value="KE">Kenya</option><option value="KI">Kiribati</option><option value="KR">South Korea</option><option value="XK">Kosovo</option><option value="KW">Kuwait</option><option value="KG">Kyrgyzstan</option><option value="LA">Laos</option><option value="LV">Latvia</option><option value="LB">Lebanon</option><option value="LS">Lesotho</option><option value="LR">Liberia</option><option value="LY">Libya</option><option value="LI">Liechtenstein</option><option value="LT">Lithuania</option><option value="LU">Luxembourg</option><option value="MO">Macau</option><option value="MK">Macedonia</option><option value="MG">Madagascar</option><option value="MW">Malawi</option><option value="MY">Malaysia</option><option value="MV">Maldives</option><option value="ML">Mali</option><option value="MT">Malta</option><option value="MH">Marshall Islands</option><option value="MQ">Martinique</option><option value="MR">Mauritania</option><option value="MU">Mauritius</option><option value="YT">Mayotte</option><option value="MX">Mexico</option><option value="FM">Micronesia</option><option value="MD">Moldova, Republic of</option><option value="MC">Monaco</option><option value="MN">Mongolia</option><option value="ME">Montenegro</option><option value="MS">Montserrat</option><option value="MA">Morocco</option><option value="MZ">Mozambique</option><option value="MM">Myanmar</option><option value="NA">Namibia</option><option value="NR">Nauru</option><option value="NP">Nepal</option><option value="NL">Netherlands</option><option value="AN">Netherlands Antilles</option><option value="NC">New Caledonia</option><option value="NZ">New Zealand</option><option value="NI">Nicaragua</option><option value="NE">Niger</option><option value="NG">Nigeria</option><option value="NU">Niue</option><option value="NF">Norfolk Island</option><option value="MP">Northern Mariana Islands</option><option value="NO">Norway</option><option value="OM">Oman</option><option value="PK">Pakistan</option><option value="PW">Palau</option><option value="PA">Panama</option><option value="PG">Papua New Guinea</option><option value="PY">Paraguay</option><option value="PE">Peru</option><option value="PH">Philippines</option><option value="PN">Pitcairn Island</option><option value="PL">Poland</option><option value="PT">Portugal</option><option value="PR">Puerto Rico</option><option value="QA">Qatar</option><option value="RE">Reunion</option><option value="RO">Romania</option><option value="RU">Russian Federation</option><option value="RW">Rwanda</option><option value="KN">Saint Kitts and Nevis</option><option value="LC">Saint Lucia</option><option value="VC">Saint Vincent and the Grenadines</option><option value="WS">Samoa</option><option value="SM">San Marino</option><option value="ST">Sao Tome and Principe</option><option value="SA">Saudi Arabia</option><option value="SN">Senegal</option><option value="RS">Serbia</option><option value="SC">Seychelles</option><option value="SL">Sierra Leone</option><option value="SG">Singapore</option><option value="SK">Slovakia</option><option value="SI">Slovenia</option><option value="SB">Solomon Islands</option><option value="SO">Somalia</option><option value="ZA">South Africa</option><option value="SS">South Sudan</option><option value="ES">Spain</option><option value="LK">Sri Lanka</option><option value="SH">St. Helena</option><option value="PM">St. Pierre and Miquelon</option><option value="SD">Sudan</option><option value="SR">Suriname</option><option value="SY">Syria</option><option value="SZ">Swaziland</option><option value="SE">Sweden</option><option value="CH">Switzerland</option><option value="TW">Taiwan</option><option value="TJ">Tajikistan</option><option value="TZ">Tanzania</option><option value="TH">Thailand</option><option value="TG">Togo</option><option value="TK">Tokelau</option><option value="TO">Tonga</option><option value="TT">Trinidad and Tobago</option><option value="TN">Tunisia</option><option value="TR">Turkey</option><option value="TM">Turkmenistan</option><option value="TC">Turks and Caicos Islands</option><option value="TV">Tuvalu</option><option value="UG">Uganda</option><option value="UA">Ukraine</option><option value="AE">United Arab Emirates</option><option value="GB" selected="selected">United Kingdom</option><option value="US">United States</option><option value="UY">Uruguay</option><option value="UZ">Uzbekistan</option><option value="VU">Vanuatu</option><option value="VE">Venezuela</option><option value="VN">Viet Nam</option><option value="VI">Virgin Islands (U.S.)</option><option value="WF">Wallis and Futuna Islands</option><option value="EH">Western Sahara</option><option value="YE">Yemen</option><option value="ZM">Zambia</option><option value="ZW">Zimbabwe</option></select>';else{n+='<label class="visible-label" for="'+o+'">'+e.label+"</label>",n+="<select "+a+' class="w--input-field" name="'+o+'" id="'+o+'">';var r=e.extra_def.options;r=r.split("\r\n"),t.each(r,function(t,e){var o=e.split("|");n+=o.length>1?'<option value="'+o[0]+'">'+o[1]+"</option>":'<option value="'+o[0]+'">'+o[0]+"</option>"}),n+="</select>"}break;case"4":n+='<p class="form-radio--label">'+e.label+"</p>",r=e.extra_def.options,r=r.split("\r\n"),t.each(r,function(t,e){var i=e.split("|"),r="";r=i.length>1?i[1]:i[0],n+='<label class="visible-label" for="'+o+"_"+t+'">'+r+"</label>",n+='<input class="w--input-field" type="checkbox" name="'+o+'[]" '+a+' value="'+i[0]+'" id="'+o+"_"+t+'" onclick="if(this.checked) { this.form[\''+o+"["+t+"]'].value='"+r+"'; } else { this.form['"+o+"["+t+"]'].value=''; }\" />",n+='<input type="hidden" name="'+o+"["+t+']" />'});break;case"5":n+='<p class="form-radio--label">'+e.label+"</p>",r=e.extra_def.options,r=r.split("\r\n"),t.each(r,function(t,e){var i=e.split("|"),r="";r=i.length>1?i[1]:i[0],n+='<label class="visible-label" for="'+o+"_"+t+'">'+r+"</label>",n+='<input class="w--input-field" type="checkbox" name="'+o+'[]" '+a+' value="'+i[0]+'" id="'+o+"_"+t+'" onclick="if(this.checked) { this.form[\''+o+"["+t+"]'].value='"+r+"'; } else { this.form['"+o+"["+t+"]'].value=''; }\" />",n+='<input type="hidden" name="'+o+"["+t+']" />'});break;case"6":n+='<p class="form-field-static">'+e.extra_def.text+"</p>";break;case"7":e.extra_def.desc.length>0&&e.label!==e.extra_def.desc?(n+='<p class="checkbox-text">'+e.label+"</p>",n+='<label  class="visible-label" for="'+o+'">'+e.extra_def.desc+"</label>"):n+='<label  class="visible-label" for="'+o+'">'+e.label+"</label>",n+='<input class="w--input-field" type="checkbox" name="'+o+'" '+a+' value="1" id="'+o+'" />';break;case"8":n+='<label for="'+o+'">'+e.label+"</label>",n+='<input  class="w--input-field" type="file" name="'+o+'" '+a+' placeholder="'+e.label+'" id="'+o+'" />',n+='<p class="desc">Max upload size: '+e.extra_def.file_size+"mb ";break;case"9":n+='<label for="'+o+'">'+e.label+"</label>",n+='<input  class="w--input-field" type="text" name="'+o+'" '+a+' placeholder="'+e.label+'" id="'+o+'" />';break;case"10":n+='<label for="'+o+'">'+e.label+"</label>",n+='<input  class="w--input-field" type="hidden" name="'+o+'" '+a+' placeholder="'+e.label+'" id="'+o+'" />';break;default:n+='<label for="'+o+'">'+e.label+"</label>",n+='<input  class="w--input-field" type="'+i+'" name="'+o+'" '+a+' placeholder="'+e.label+'" id="'+o+'" />'}},buildFields:function(t){var e="text",o="",i="",r="";i="0"===t.is_custom_field?"Postal Code"===t.description?"zip":t.description.replace(/\s+/g,"").toLowerCase():"custom-"+t["@attributes"].id,"0"===t.is_shown&&(e="hidden",o=" row-hidden"),"Email"===t.description&&(e="email"),"1"===t.is_required&&(o+=" row-required",r=' data-validate="presence" data-validateMsg="Please enter a valid '+t.label+'" '),n+='<div class="form-row form-row--left '+o+'">',a.fieldType(t,i,e,r),n+="</div>"},fetchFields:function(){t.ajax({url:e.fieldsURL,method:"GET",data:{formID:t("#formID").val()},success:function(e){e=JSON.parse(e);var o=t.makeArray(e);n="",o=o[0].signup_form_field,t.each(o,function(t,e){a.buildFields(e)}),n+='<div class="form-row"><input type="submit" class="b--btn b--btn__submit" name="fetchform" value="Personalise form" /></div>',t("#customiseForm fieldset").html(n),t("#fetchForm").hide(),t("#tabbedBox").fadeIn(),t(".form-id--display").html(t("#formID").val()),t(".e--edit-form").show(),t(".form-row").on("click",function(){t(".toggle-btn").hasClass("is-active")&&(t(this).hasClass("form-row--half")?t(this).removeClass("form-row--half"):t(this).addClass("form-row--half"))}),t("#fetchForm .b--btn").removeClass("loading-animation").attr("disabled",!1).css({cursor:"pointer"})},error:function(){}})},fieldSort:function(){t("#customiseForm fieldset").sortable({revert:!0}),t("#customiseForm fieldset").disableSelection(),t("#customiseForm .form-row").on("mouseup",function(){t(this).removeClass(".is-dragging")}),t("#customiseForm .form-row").on("mousedown",function(){t(this).addClass("is-dragging")}),t(".toggle-btn").on("click",function(){return t(this).hasClass("is-active")?(t(this).removeClass("is-active"),t(this).parent().removeClass("row-toggled")):(t(this).addClass("is-active"),t(this).parent().addClass("row-toggled")),!1}),t("#customiseForm .form-row").droppable({greedy:!0,tolerance:"pointer"})},copyClipboard:function(t){var e=document.createElement("input");e.setAttribute("value",t),document.body.appendChild(e),e.select(),document.execCommand("copy"),document.body.removeChild(e)},toggleBtn:function(t,e){t.val().length>0?e.removeClass("btn-disabled"):e.addClass("btn-disabled")},formListener:function(){t("#personaliseForm form").on("submit",function(e){return e.preventDefault(),"content"!==t("#destination").val()||0!==t("#thankyouHeader").val().length&&0!==t("#thankyouContent").val().length&&0!==t("#shareImg").val().length?"url"===t("#destination").val()&&0===t("#thankyouURL").val().length?(t("#thankyouURL").after('<p class="error form-missing">Please complete the highlighted fields.</p>'),t(".required").addClass("invalid-fields"),!1):(t(".required").removeClass("invalid-fields"),t(".form-missing").remove(),a.buildEmbedCode(),t("#tabbedBox").tabs({disabled:""}),void t("#tabbedBox").tabs("option","active",2)):(t("#shareImg").after('<p class="error form-missing">Please complete the highlighted fields.</p>'),t(".required").addClass("invalid-fields"),!1)}),t("#formID").blur(function(){a.toggleBtn(t("#formID"),t("#fetchForm").find('input[type="submit"]'))}),t("#formID").keydown(function(){a.toggleBtn(t("#formID"),t("#fetchForm").find('input[type="submit"]'))}),t("#customiseForm").on("submit","form",function(e){e.preventDefault(),t("#tabbedBox").tabs("option","active",1)}),t("#generateForm").on("click",".b--btn__submit",function(e){e.preventDefault();var o=t(this).data("copy");return a.copyClipboard(t("#"+o).val()),t(this).val("Copied to clipboard"),setTimeout(function(){t(this).val("Copy to clipboard")},5e3),!1}),t("body").on("blur",".invalid-fields",function(){t(this).length>0?t(this).removeClass("invalid-fields"):t(this).addClass("invalid-fields")})},bindUIActions:function(){t("#fetchForm").find('input[type="submit"]').addClass("btn-disabled"),t("#tabbedBox").tabs({disabled:[2]}),t(".picker").spectrum({showInput:!0,className:"full-spectrum",showInitial:!1,showPalette:!0,showSelectionPalette:!0,maxSelectionSize:10,preferredFormat:"hex",palette:[["rgb(227,6,19)","rgb(45, 53, 61)","rgb(231, 55, 85)","rgb(58, 85, 175)","rgb(76, 98, 108)"]]})}};a.init(),a.formListener(),a.fetchForm(),a.editForm(),a.personaliseForm(),a.fieldSort()}(jQuery);

